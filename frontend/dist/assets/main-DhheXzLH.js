var e,t,n=Object.defineProperty,r=(e,t,r)=>((e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var s,a,o,l,c={exports:{}},u={},d={exports:{}},h={};function f(){if(s)return h;s=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function k(t,n,r){var i,s={},a=null,o=null;if(null!=n)for(i in void 0!==n.ref&&(o=n.ref),void 0!==n.key&&(a=""+n.key),n)x.call(n,i)&&!C.hasOwnProperty(i)&&(s[i]=n[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:e,type:t,key:a,ref:o,props:s,_owner:S.current}}function E(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var T=/\/+/g;function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(n,r,i,s,a){var o=typeof n;"undefined"!==o&&"boolean"!==o||(n=null);var l=!1;if(null===n)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case e:case t:l=!0}}if(l)return a=a(l=n),n=""===s?"."+N(l,0):s,w(a)?(i="",null!=n&&(i=n.replace(T,"$&/")+"/"),I(a,r,i,"",function(e){return e})):null!=a&&(E(a)&&(a=function(t,n){return{$$typeof:e,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+n)),r.push(a)),1;if(l=0,s=""===s?".":s+":",w(n))for(var c=0;c<n.length;c++){var u=s+N(o=n[c],c);l+=I(o,r,i,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(n),"function"==typeof u)for(n=u.call(n),c=0;!(o=n.next()).done;)l+=I(o=o.value,r,i,u=s+N(o,c++),a);else if("object"===o)throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}return h.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},h.Component=y,h.Fragment=n,h.Profiler=i,h.PureComponent=_,h.StrictMode=r,h.Suspense=c,h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,h.act=R,h.cloneElement=function(t,n,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),s=t.key,a=t.ref,o=t._owner;if(null!=n){if(void 0!==n.ref&&(a=n.ref,o=S.current),void 0!==n.key&&(s=""+n.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in n)x.call(n,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===n[c]&&void 0!==l?l[c]:n[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:e,type:t.type,key:s,ref:a,props:i,_owner:o}},h.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},h.createElement=k,h.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},h.createRef=function(){return{current:null}},h.forwardRef=function(e){return{$$typeof:l,render:e}},h.isValidElement=E,h.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},h.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},h.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},h.unstable_act=R,h.useCallback=function(e,t){return P.current.useCallback(e,t)},h.useContext=function(e){return P.current.useContext(e)},h.useDebugValue=function(){},h.useDeferredValue=function(e){return P.current.useDeferredValue(e)},h.useEffect=function(e,t){return P.current.useEffect(e,t)},h.useId=function(){return P.current.useId()},h.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},h.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},h.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},h.useMemo=function(e,t){return P.current.useMemo(e,t)},h.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},h.useRef=function(e){return P.current.useRef(e)},h.useState=function(e){return P.current.useState(e)},h.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},h.useTransition=function(){return P.current.useTransition()},h.version="18.3.1",h}function p(){return a||(a=1,d.exports=f()),d.exports}
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m=(l||(l=1,c.exports=function(){if(o)return u;o=1;var e=p(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(e,n,a){var o,l={},c=null,u=null;for(o in void 0!==a&&(c=""+a),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)r.call(n,o)&&!s.hasOwnProperty(o)&&(l[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps)void 0===l[o]&&(l[o]=n[o]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:i.current}}return u.Fragment=n,u.jsx=a,u.jsxs=a,u}()),c.exports),g=p();const y=i(g);var v,_,b,w,x,S={},C={exports:{}},k={},E={exports:{}},T={};function N(){return _||(_=1,E.exports=(v||(v=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function b(e){if(m=!1,_(e),!p)if(null!==n(l))p=!0,P(w);else{var t=n(c);null!==t&&O(b,t.startTime-e)}}function w(t,i){p=!1,m&&(m=!1,y(k),k=-1),f=!0;var s=h;try{for(_(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!N());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),_(i)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&O(b,g.startTime-i),u=!1}return u}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,C=null,k=-1,E=5,T=-1;function N(){return!(e.unstable_now()-T<E)}function I(){if(null!==C){var t=e.unstable_now();T=t;var n=!0;try{n=C(!0,t)}finally{n?x():(S=!1,C=null)}}else S=!1}if("function"==typeof v)x=function(){v(I)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel,A=j.port2;j.port1.onmessage=I,x=function(){A.postMessage(null)}}else x=function(){g(I,0)};function P(e){C=e,S||(S=!0,x())}function O(t,n){k=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,P(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(m?(y(k),k=-1):m=!0,O(b,s-a))):(r.sortIndex=o,t(l,r),p||f||(p=!0,P(w))),r},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(T)),T)),E.exports}
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function I(){if(b)return k;b=1;var e=p(),t=N();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(e,t){a(e,t),a(e+"Capture",t)}function a(e,t){for(i[e]=t,e=0;e<t.length;e++)r.add(t[e])}var o=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function h(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=f.hasOwnProperty(t)?f[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!l.call(d,e)||!l.call(u,e)&&(c.test(e)?d[e]=!0:(u[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(m,g);f[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(m,g);f[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(m,g);f[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),R=Symbol.iterator;function L(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,F=Object.assign;function z(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function $(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case j:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(ne(r)){if(1<r.length)throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,de,he=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(n(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,ke=null;function Ee(e){if(e=bi(e)){if("function"!=typeof Se)throw Error(n(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function Te(e){Ce?ke?ke.push(e):ke=[e]:Ce=e}function Ne(){if(Ce){var e=Ce,t=ke;if(ke=Ce=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function je(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==Ce||null!==ke)&&(je(),Ne())}}function Oe(e,t){var r=e.stateNode;if(null===r)return null;var i=xi(r);if(null===i)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(n(231,t,typeof r));return r}var De=!1;if(o)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){De=!1}function Le(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,ze=!1,Ue=null,Be={onError:function(e){Me=!0,Fe=e}};function $e(e,t,n,r,i,s,a,o,l){Me=!1,Fe=null,Le.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(n(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,i=t;;){var s=r.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(i=s.return)){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return He(s),e;if(a===i)return He(s),t;a=a.sibling}throw Error(n(188))}if(r.return!==i.return)r=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o)throw Error(n(189))}}if(r.alternate!==i)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=t.unstable_scheduleCallback,Qe=t.unstable_cancelCallback,Ye=t.unstable_shouldYield,Xe=t.unstable_requestPaint,Je=t.unstable_now,Ze=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,tt=t.unstable_UserBlockingPriority,nt=t.unstable_NormalPriority,rt=t.unstable_LowPriority,it=t.unstable_IdlePriority,st=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ct|0)|0},lt=Math.log,ct=Math.LN2;var ut=64,dt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return!(4194240&(ut<<=1))&&(ut=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var xt,St,Ct,kt,Et,Tt=!1,Nt=[],It=null,jt=null,At=null,Pt=new Map,Ot=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=_i(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,function(){Ct(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){zt(e)&&n.delete(t)}function Bt(){Tt=!1,null!==It&&zt(It)&&(It=null),null!==jt&&zt(jt)&&(jt=null),null!==At&&zt(At)&&(At=null),Pt.forEach(Ut),Ot.forEach(Ut)}function $t(e,n){e.blockedOn===n&&(e.blockedOn=null,Tt||(Tt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return $t(t,e)}if(0<Nt.length){$t(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&$t(It,e),null!==jt&&$t(jt,e),null!==At&&$t(At,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=v.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Gt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return jt=Mt(jt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Mt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=_i(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function an(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(un),hn=F({},un,{view:0,detail:0}),fn=an(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=an(pn),gn=an(F({},pn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),vn=an(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(_n),wn=an(F({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function En(){return kn}var Tn=F({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(Tn),In=an(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),Dn=[9,13,27,32],Rn=o&&"CompositionEvent"in window,Ln=null;o&&"documentMode"in document&&(Ln=document.documentMode);var Mn=o&&"TextEvent"in window&&!Ln,Fn=o&&(!Rn||Ln&&8<Ln&&11>=Ln),zn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){zr(e,0)}function Yn(e){if(K(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(o){var Zn;if(o){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"==typeof tr.oninput}Zn=er}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Gn&&(Gn.detachEvent("onpropertychange",rr),Kn=Gn=null)}function rr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,xe(e)),Pe(Qn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Kn=n,(Gn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var lr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function cr(e,t){if(lr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!l.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var a=dr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=o&&"documentMode"in document&&11>=document.documentMode,yr=null,vr=null,_r=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&cr(_r,r)||(_r=r,0<(r=Gr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Cr={},kr={};function Er(e){if(Cr[e])return Cr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Cr[e]=n[t];return e}o&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Er("animationend"),Nr=Er("animationiteration"),Ir=Er("animationstart"),jr=Er("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Rr=Pr[Dr];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Nr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(jr,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,i,s,a,o,l,c){if($e.apply(this,arguments),Me){if(!Me)throw Error(n(198));var u=Fe;Me=!1,Fe=null,ze||(ze=!0,Ue=u)}}(i,t,void 0,e),e.currentTarget=null}function zr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,c),s=l}}}if(ze)throw e=Ue,ze=!1,Ue=null,e}function Ur(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[$r]){e[$r]=!0,r.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=_i(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pe(function(){var r=s,i=xe(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=jn;break;case Tr:case Nr:case Ir:l=vn;break;case jr:l=An;break;case"scroll":l=fn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Oe(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!_i(c)&&!c[mi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?_i(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:wi(l),f=null==c?o:wi(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,_i(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?wi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Hn(o))if(Jn)g=or;else{g=sr;var y=ir}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&te(o,"number",o.value)),y=r?wi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(yr=y,vr=r,_r=null);break;case"focusout":_r=vr=yr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(a,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vn?Bn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(v=tn()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Vn=!0)),0<(y=Gr(r,_)).length&&(_=new wn(_,e,null,n,i),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=$n(n))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Un=!0,zn);case"textInput":return(e=t.data)===zn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Rn&&Bn(e,t)?(e=tn(),en=Zt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}zr(a,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Oe(n,s))&&a.unshift(Wr(n,l,o)):i||null!=(l=Oe(n,s))&&a.push(Wr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"==typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,r){if(t=Jr(t),Jr(e)!==t&&r)throw Error(n(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"==typeof setTimeout?setTimeout:void 0,si="function"==typeof clearTimeout?clearTimeout:void 0,ai="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==ai?function(e){return ai.resolve(null).then(e).catch(li)}:ii;function li(e){setTimeout(function(){throw e})}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,pi="__reactProps$"+hi,mi="__reactContainer$"+hi,gi="__reactEvents$"+hi,yi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function _i(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[fi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function xi(e){return e[pi]||null}var Si=[],Ci=-1;function ki(e){return{current:e}}function Ei(e){0>Ci||(e.current=Si[Ci],Si[Ci]=null,Ci--)}function Ti(e,t){Ci++,Si[Ci]=e.current,e.current=t}var Ni={},Ii=ki(Ni),ji=ki(!1),Ai=Ni;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!=(e=e.childContextTypes)}function Di(){Ei(ji),Ei(Ii)}function Ri(e,t,r){if(Ii.current!==Ni)throw Error(n(168));Ti(Ii,t),Ti(ji,r)}function Li(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,"function"!=typeof i.getChildContext)return r;for(var s in i=i.getChildContext())if(!(s in t))throw Error(n(108,q(e)||"Unknown",s));return F({},r,i)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Ai=Ii.current,Ti(Ii,e),Ti(ji,ji.current),!0}function Fi(e,t,r){var i=e.stateNode;if(!i)throw Error(n(169));r?(e=Li(e,t,Ai),i.__reactInternalMemoizedMergedChildContext=e,Ei(ji),Ei(Ii),Ti(Ii,e)):Ei(ji),Ti(ji,r)}var zi=null,Ui=!1,Bi=!1;function $i(e){null===zi?zi=[e]:zi.push(e)}function Vi(){if(!Bi&&null!==zi){Bi=!0;var e=0,t=bt;try{var n=zi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,Ui=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),Ke(et,Vi),i}finally{bt=t,Bi=!1}}return null}var qi=[],Hi=0,Wi=null,Gi=0,Ki=[],Qi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){qi[Hi++]=Gi,qi[Hi++]=Wi,Wi=e,Gi=t}function es(e,t,n){Ki[Qi++]=Xi,Ki[Qi++]=Ji,Ki[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Gi=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null}var rs=null,is=null,ss=!1,as=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function cs(e){return!(!(1&e.mode)||128&e.flags)}function us(e){if(ss){var t=is;if(t){var r=t;if(!ls(e,t)){if(cs(e))throw Error(n(418));t=ui(r.nextSibling);var i=rs;t&&ls(e,t)?os(i,r):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(cs(e))throw Error(n(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function hs(e){if(e!==rs)return!1;if(!ss)return ds(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=is)){if(cs(e))throw fs(),Error(n(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){is=ui(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}is=null}}else is=rs?ui(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=ui(e.nextSibling)}function ps(){is=rs=null,ss=!1}function ms(e){null===as?as=[e]:as.push(e)}var gs=v.ReactCurrentBatchConfig;function ys(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var i=r.stateNode}if(!i)throw Error(n(147,e));var s=i,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _s(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===x?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===O&&_s(i)===t.type)?((r=s(t,n.props)).ref=ys(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=ys(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case w:return(t=zc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(ne(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(ne(n)||L(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(ne(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}return function l(c,u,d,m){if("object"==typeof d&&null!==d&&d.type===x&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case _:e:{for(var g=d.key,y=u;null!==y;){if(y.key===g){if((g=d.type)===x){if(7===y.tag){r(c,y.sibling),(u=s(y,d.props.children)).return=c,c=u;break e}}else if(y.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===O&&_s(g)===y.type){r(c,y.sibling),(u=s(y,d.props)).ref=ys(c,y,d),u.return=c,c=u;break e}r(c,y);break}t(c,y),y=y.sibling}d.type===x?((u=Lc(d.props.children,c.mode,m,d.key)).return=c,c=u):((m=Rc(d.type,d.key,d.props,null,c.mode,m)).ref=ys(c,u,d),m.return=c,c=m)}return o(c);case w:e:{for(y=d.key;null!==u;){if(u.key===y){if(4===u.tag&&u.stateNode.containerInfo===d.containerInfo&&u.stateNode.implementation===d.implementation){r(c,u.sibling),(u=s(u,d.children||[])).return=c,c=u;break e}r(c,u);break}t(c,u),u=u.sibling}(u=zc(d,c.mode,m)).return=c,c=u}return o(c);case O:return l(c,u,(y=d._init)(d._payload),m)}if(ne(d))return function(n,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(n,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(n,d),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return r(n,d),ss&&Zi(n,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(n,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return ss&&Zi(n,m),c}for(d=i(n,d);m<o.length;m++)null!==(g=p(d,n,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(n,e)}),ss&&Zi(n,m),c}(c,u,d,m);if(L(d))return function(s,o,l,c){var u=L(l);if("function"!=typeof u)throw Error(n(150));if(null==(l=u.call(l)))throw Error(n(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(s,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(s,m),o=a(_,o,g),null===d?u=_:d.sibling=_,d=_,m=y}if(v.done)return r(s,m),ss&&Zi(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return ss&&Zi(s,g),u}for(m=i(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),ss&&Zi(s,g),u}(c,u,d,m);vs(c,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==u&&6===u.tag?(r(c,u.sibling),(u=s(u,d)).return=c,c=u):(r(c,u),(u=Fc(d,c.mode,m)).return=c,c=u),o(c)):r(c,u)}}var ws=bs(!0),xs=bs(!1),Ss=ki(null),Cs=null,ks=null,Es=null;function Ts(){Es=ks=Cs=null}function Ns(e){var t=Ss.current;Ei(Ss),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function js(e,t){Cs=e,Es=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Cs)throw Error(n(308));ks=e,Cs.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Ps=null;function Os(e){null===Ps?Ps=[e]:Ps.push(e)}function Ds(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Il){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}function $s(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=F({},d,h);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=d}}function qs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=r,"function"!=typeof s)throw Error(n(191,s));s.call(i)}}}var Hs={},Ws=ki(Hs),Gs=ki(Hs),Ks=ki(Hs);function Qs(e){if(e===Hs)throw Error(n(174));return e}function Ys(e,t){switch(Ti(Ks,t),Ti(Gs,e),Ti(Ws,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ws),Ti(Ws,t)}function Xs(){Ei(Ws),Ei(Gs),Ei(Ks)}function Js(e){Qs(Ks.current);var t=Qs(Ws.current),n=ce(t,e.type);t!==n&&(Ti(Gs,e),Ti(Ws,n))}function Zs(e){Gs.current===e&&(Ei(Ws),Ei(Gs))}var ea=ki(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=v.ReactCurrentDispatcher,sa=v.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ca=null,ua=!1,da=!1,ha=0,fa=0;function pa(){throw Error(n(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function ga(e,t,r,i,s,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:eo,e=r(i,s),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(n(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=to,e=r(i,s)}while(da)}if(ia.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=oa=null,ua=!1,t)throw Error(n(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?oa.memoizedState=ca=e:ca=ca.next=e,ca}function _a(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?oa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(n(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?oa.memoizedState=ca=e:ca=ca.next=e}return ca}function ba(e,t){return"function"==typeof t?t(e):t}function wa(e){var t=_a(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var i=la,s=i.baseQueue,a=r.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,r.pending=null}if(null!==s){a=s.next,i=i.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,oa.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,lr(i,t.memoizedState)||(bo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,r.lastRenderedState=i}if(null!==(e=r.interleaved)){s=e;do{a=s.lane,oa.lanes|=a,Ml|=a,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function xa(e){var t=_a(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var i=r.dispatch,s=r.pending,a=t.memoizedState;if(null!==s){r.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);lr(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,i]}function Sa(){}function Ca(e,t){var r=oa,i=_a(),s=t(),a=!lr(i.memoizedState,s);if(a&&(i.memoizedState=s,bo=!0),i=i.queue,La(Ta.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(r.flags|=2048,Aa(9,Ea.bind(null,r,i,s,t),void 0,null),null===jl)throw Error(n(349));30&aa||ka(r,t,s)}return s}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,Na(t)&&Ia(e)}function Ta(e,t,n){return n(function(){Na(t)&&Ia(e)})}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Ia(e){var t=Rs(e,1);null!==t&&rc(t,e,1,-1)}function ja(e){var t=va();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,oa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return _a().memoizedState}function Oa(e,t,n,r){var i=va();oa.flags|=e,i.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=_a();r=void 0===r?null:r;var s=void 0;if(null!==la){var a=la.memoizedState;if(s=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Aa(t,n,s,r))}oa.flags|=e,i.memoizedState=Aa(1|t,n,s,r)}function Ra(e,t){return Oa(8390656,8,e,t)}function La(e,t){return Da(2048,8,e,t)}function Ma(e,t){return Da(4,2,e,t)}function Fa(e,t){return Da(4,4,e,t)}function za(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!=n?n.concat([e]):null,Da(4,4,za.bind(null,t,e),n)}function Ba(){}function $a(e,t){var n=_a();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=_a();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 21&aa?(lr(n,t)||(n=gt(),oa.lanes|=n,Ml|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Wa(){return _a().memoizedState}function Ga(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ya(t,n);else if(null!==(n=Ds(e,t,n,r))){rc(n,e,r,tc()),Xa(n,t,r)}}function Ka(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,lr(o,a)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ds(e,t,i,r))&&(rc(n,e,r,i=tc()),Xa(n,t,r))}}function Qa(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function Ya(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}var Ja={readContext:As,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:As,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Oa(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,oa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:ja,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=ja(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=oa,s=va();if(ss){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===jl)throw Error(n(349));30&aa||ka(i,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,Ra(Ta.bind(null,i,a,e),[e]),i.flags|=2048,Aa(9,Ea.bind(null,i,a,r,t),void 0,null),r},useId:function(){var e=va(),t=jl.identifierPrefix;if(ss){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:As,useCallback:$a,useContext:As,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:Va,useReducer:wa,useRef:Pa,useState:function(){return wa(ba)},useDebugValue:Ba,useDeferredValue:function(e){return qa(_a(),la.memoizedState,e)},useTransition:function(){return[wa(ba)[0],_a().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ca,useId:Wa,unstable_isNewReconciler:!1},to={readContext:As,useCallback:$a,useContext:As,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:Va,useReducer:xa,useRef:Pa,useState:function(){return xa(ba)},useDebugValue:Ba,useDeferredValue:function(e){var t=_a();return null===la?t.memoizedState=e:qa(t,la.memoizedState,e)},useTransition:function(){return[xa(ba)[0],_a().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ca,useId:Wa,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=zs(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Us(e,s,i))&&(rc(t,e,i,r),Bs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=zs(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Us(e,s,i))&&(rc(t,e,i,r),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=zs(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Us(e,i,r))&&(rc(t,e,r,n),Bs(t,e,r))}};function so(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function ao(e,t,n){var r=!1,i=Ni,s=t.contextType;return"object"==typeof s&&null!==s?s=As(s):(i=Oi(t)?Ai:Ii.current,s=(r=null!=(r=t.contextTypes))?Pi(e,i):Ni),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function oo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=As(s):(s=Oi(t)?Ai:Ii.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&io.enqueueReplaceState(i,i.state,null),Vs(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fo="function"==typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=zs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),ho(0,t)},n}function mo(e,t,n){(n=zs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!=typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e)}var _o=v.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return js(t,i),r=ga(e,t,n,r,s,i),n=ya(),null===e||bo?(ss&&n&&ts(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function So(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Co(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function Co(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);131072&e.flags&&(bo=!0)}}return To(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Dl,Ol),Ol|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Dl,Ol),Ol|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Dl,Ol),Ol|=r;return wo(e,t,i,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,r,i){var s=Oi(n)?Ai:Ii.current;return s=Pi(t,s),js(t,i),n=ga(e,t,n,r,s,i),r=ya(),null===e||bo?(ss&&r&&ts(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function No(e,t,n,r,i){if(Oi(n)){var s=!0;Mi(t)}else s=!1;if(js(t,i),null===t.stateNode)qo(e,t),ao(t,n,r),lo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=As(c):c=Pi(t,c=Oi(n)?Ai:Ii.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,a,r,c),Ls=!1;var h=t.memoizedState;a.state=h,Vs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||ji.current||Ls?("function"==typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Ls||so(t,n,o,r,h,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=As(l):l=Pi(t,l=Oi(n)?Ai:Ii.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,a,r,l),Ls=!1,h=t.memoizedState,a.state=h,Vs(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||ji.current||Ls?("function"==typeof f&&(ro(t,n,f,r),p=t.memoizedState),(c=Ls||so(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,s,i)}function Io(e,t,n,r,i,s){Eo(e,t);var a=!!(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Ho(e,t,s);r=t.stateNode,_o.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function jo(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Ys(e,t.containerInfo)}function Ao(e,t,n,r,i){return ps(),ms(i),t.flags|=256,wo(e,t,n,r),t.child}var Po,Oo,Do,Ro,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,r){var i,s=t.pendingProps,a=ea.current,o=!1,l=!!(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&!!(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(ea,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},1&s||null===o?o=Mc(l,s,0,null):(o.childLanes=0,o.pendingProps=l),e=Lc(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(r),t.memoizedState=Lo,e):zo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,r,i,s,a,o){if(r)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,i=uo(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=Mc({mode:"visible",children:i.children},s,0,null),(a=Lc(a,s,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,1&t.mode&&ws(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,a);if(!(1&t.mode))return Uo(e,t,o,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,Uo(e,t,o,i=uo(a=Error(n(419)),i,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(i=jl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Rs(e,s),rc(i,e,s,-1))}return gc(),Uo(e,t,o,i=uo(Error(n(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,is=ui(s.nextSibling),rs=t,ss=!0,as=null,null!==e&&(Ki[Qi++]=Xi,Ki[Qi++]=Ji,Ki[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=zo(t,i.children),t.flags|=4096,t)}(e,t,l,s,i,a,r);if(o){o=s.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 1&l||t.child===a?(s=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags:((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null),null!==i?o=Dc(i,o):(o=Lc(o,l,r,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Lo,s}return e=(o=e.child).sibling,s=Dc(o,{mode:"visible",children:s.children}),!(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function zo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&ms(r),ws(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function $o(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Vo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),2&(r=ea.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ea,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$o(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$o(t,!0,n,null,s);break;case"together":$o(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function qo(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=Dc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Dc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Wo(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,r){var s=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Oi(t.type)&&Di(),Go(t),null;case 3:return s=t.stateNode,Xs(),Ei(ji),Ei(Ii),ra(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==as&&(oc(as),as=null))),Oo(e,t),Go(t),null;case 5:Zs(t);var a=Qs(Ks.current);if(r=t.type,null!==e&&null!=t.stateNode)Do(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(n(166));return Go(t),null}if(e=Qs(Ws.current),hs(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[fi]=t,s[pi]=o,e=!!(1&t.mode),r){case"dialog":Ur("cancel",s),Ur("close",s);break;case"iframe":case"object":case"embed":Ur("load",s);break;case"video":case"audio":for(a=0;a<Lr.length;a++)Ur(Lr[a],s);break;case"source":Ur("error",s);break;case"img":case"image":case"link":Ur("error",s),Ur("load",s);break;case"details":Ur("toggle",s);break;case"input":X(s,o),Ur("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",s);break;case"textarea":se(s,o),Ur("invalid",s)}for(var l in _e(r,o),a=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?s.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(s.textContent,c,e),a=["children",c]):"number"==typeof c&&s.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(s.textContent,c,e),a=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",s)}switch(r){case"input":G(s),ee(s,o,!0);break;case"textarea":G(s),oe(s);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(s.onclick=ei)}s=a,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof s.is?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),"select"===r&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[fi]=t,e[pi]=s,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,s),r){case"dialog":Ur("cancel",e),Ur("close",e),a=s;break;case"iframe":case"object":case"embed":Ur("load",e),a=s;break;case"video":case"audio":for(a=0;a<Lr.length;a++)Ur(Lr[a],e);a=s;break;case"source":Ur("error",e),a=s;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),a=s;break;case"details":Ur("toggle",e),a=s;break;case"input":X(e,s),a=Y(e,s),Ur("invalid",e);break;case"option":default:a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=F({},s,{value:void 0}),Ur("invalid",e);break;case"textarea":se(e,s),a=ie(e,s),Ur("invalid",e)}for(o in _e(r,a),c=a)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ye(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"==typeof u?("textarea"!==r||""!==u)&&fe(e,u):"number"==typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(i.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&y(e,o,u,l))}switch(r){case"input":G(e),ee(e,s,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=s.value&&e.setAttribute("value",""+H(s.value));break;case"select":e.multiple=!!s.multiple,null!=(o=s.value)?re(e,!!s.multiple,o,!1):null!=s.defaultValue&&re(e,!!s.multiple,s.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=ei)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,s);else{if("string"!=typeof s&&null===t.stateNode)throw Error(n(166));if(r=Qs(Ks.current),Qs(Ws.current),hs(t)){if(s=t.stateNode,r=t.memoizedProps,s[fi]=t,(o=s.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Zr(s.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(s.nodeValue,r,!!(1&e.mode))}o&&(t.flags|=4)}else(s=(9===r.nodeType?r:r.ownerDocument).createTextNode(s))[fi]=t,t.stateNode=s}return Go(t),null;case 13:if(Ei(ea),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&1&t.mode&&!(128&t.flags))fs(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==s&&null!==s.dehydrated){if(null===e){if(!o)throw Error(n(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(n(317));o[fi]=t}else ps(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),o=!1}else null!==as&&(oc(as),as=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ea.current?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Xs(),Oo(e,t),null===e&&Vr(t.stateNode.containerInfo),Go(t),null;case 10:return Ns(t.type._context),Go(t),null;case 19:if(Ei(ea),null===(o=t.memoizedState))return Go(t),null;if(s=!!(128&t.flags),null===(l=o.rendering))if(s)Wo(o,!1);else{if(0!==Rl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Wo(o,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;null!==r;)e=s,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ti(ea,1&ea.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Vl&&(t.flags|=128,s=!0,Wo(o,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ta(l))){if(t.flags|=128,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Wo(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ss)return Go(t),null}else 2*Je()-o.renderingStartTime>Vl&&1073741824!==r&&(t.flags|=128,s=!0,Wo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,r=ea.current,Ti(ea,s?1&r|2:1&r),t):(Go(t),null);case 22:case 23:return hc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&1&t.mode?!!(1073741824&Ol)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Qo(e,t){switch(ns(t),t.tag){case 1:return Oi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ei(ji),Ei(Ii),ra(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ei(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ea),null;case 4:return Xs(),null;case 10:return Ns(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Do=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qs(Ws.current);var a,o=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),o=[];break;case"select":s=F({},s,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":s=ie(e,s),r=ie(e,r),o=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=ei)}for(u in _e(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(i.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(i.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Xo=!1,Jo="function"==typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){kc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[gi],delete t[yi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Xo||el(n,t);case 6:var r=dl,i=hl;dl=null,fl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Vt(e)):ci(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(2&s||4&s)&&tl(n,t,a),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xo&&(el(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,fl(e,t,n),Xo=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var r=t.deletions;if(null!==r)for(var i=0;i<r.length;i++){var s=r[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(n(160));pl(a,o,s),dl=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){kc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&i){try{rl(3,e,e.return),il(3,e)}catch(g){kc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&i&&null!==r&&el(r,r.return);break;case 5:if(gl(t,e),vl(e),512&i&&null!==r&&el(r,r.return),32&e.flags){var s=e.stateNode;try{fe(s,"")}catch(g){kc(e,e.return,g)}}if(4&i&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==r?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ye(s,h):"dangerouslySetInnerHTML"===d?he(s,h):"children"===d?fe(s,h):y(s,d,h,u)}switch(l){case"input":Z(s,a);break;case"textarea":ae(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?re(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?re(s,!!a.multiple,a.defaultValue,!0):re(s,!!a.multiple,a.multiple?[]:"",!1))}s[pi]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(n(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&i&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||($l=Je())),4&i&&ml(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Xo=(u=Xo)||d,gl(t,e),Xo=u):gl(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){i=f,r=f.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(i,r,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Zo=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"==typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&i&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ol(r)){var i=r;break e}r=r.return}throw Error(n(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(fe(s,""),i.flags&=-33),ul(e,ll(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(n(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Zo=e,bl(e)}function bl(e,t,n){for(var r=!!(1&e.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Yo;var c=Xo;if(Yo=a,(Xo=l)&&!c)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Zo=l):Sl(i);for(;null!==s;)Zo=s,bl(s),s=s.sibling;Zo=i,Yo=o,Xo=c}wl(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,Zo=s):wl(e)}}function wl(e){for(;null!==Zo;){var t=Zo;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Xo||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Xo)if(null===r)i.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:no(t.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qs(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}qs(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(n(163))}Xo||512&t.flags&&sl(t)}catch(f){kc(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Zo=r;break}Zo=t.return}}function xl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Sl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){kc(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Cl,kl=Math.ceil,El=v.ReactCurrentDispatcher,Tl=v.ReactCurrentOwner,Nl=v.ReactCurrentBatchConfig,Il=0,jl=null,Al=null,Pl=0,Ol=0,Dl=ki(0),Rl=0,Ll=null,Ml=0,Fl=0,zl=0,Ul=null,Bl=null,$l=0,Vl=1/0,ql=null,Hl=!1,Wl=null,Gl=null,Kl=!1,Ql=null,Yl=0,Xl=0,Jl=null,Zl=-1,ec=0;function tc(){return 6&Il?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 1&e.mode?2&Il&&0!==Pl?Pl&-Pl:null!==gs.transition?(0===ec&&(ec=gt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type):1}function rc(e,t,r,i){if(50<Xl)throw Xl=0,Jl=null,Error(n(185));vt(e,r,i),2&Il&&e===jl||(e===jl&&(!(2&Il)&&(Fl|=r),4===Rl&&lc(e,Pl)),ic(e,i),1===r&&0===Il&&!(1&t.mode)&&(Vl=Je()+500,Ui&&Vi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ot(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ft(e,e===jl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,$i(e)}(cc.bind(null,e)):$i(cc.bind(null,e)),oi(function(){!(6&Il)&&Vi()}),n=null;else{switch(wt(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=it}n=jc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,6&Il)throw Error(n(327));var r=e.callbackNode;if(Sc()&&e.callbackNode!==r)return null;var i=ft(e,e===jl?Pl:0);if(0===i)return null;if(30&i||0!==(i&e.expiredLanes)||t)t=yc(e,i);else{t=i;var s=Il;Il|=2;var a=mc();for(jl===e&&Pl===t||(ql=null,Vl=Je()+500,fc(e,t));;)try{_c();break}catch(l){pc(e,l)}Ts(),El.current=a,Il=s,null!==Al?t=0:(jl=null,Pl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(i=s,t=ac(e,s))),1===t)throw r=Ll,fc(e,0),lc(e,i),ic(e,Je()),r;if(6===t)lc(e,i);else{if(s=e.current.alternate,!(30&i||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=yc(e,i),2===t&&(a=mt(e),0!==a&&(i=a,t=ac(e,a))),1!==t)))throw r=Ll,fc(e,0),lc(e,i),ic(e,Je()),r;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(n(345));case 2:case 5:xc(e,Bl,ql);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=$l+500-Je())){if(0!==ft(e,0))break;if(((s=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ii(xc.bind(null,e,Bl,ql),t);break}xc(e,Bl,ql);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var o=31-ot(i);a=1<<o,(o=t[o])>s&&(s=o),i&=~a}if(i=s,10<(i=(120>(i=Je()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kl(i/1960))-i)){e.timeoutHandle=ii(xc.bind(null,e,Bl,ql),i);break}xc(e,Bl,ql);break;default:throw Error(n(329))}}}return ic(e,Je()),e.callbackNode===r?sc.bind(null,e):null}function ac(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~zl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(6&Il)throw Error(n(327));Sc();var t=ft(e,0);if(!(1&t))return ic(e,Je()),null;var r=yc(e,t);if(0!==e.tag&&2===r){var i=mt(e);0!==i&&(t=i,r=ac(e,i))}if(1===r)throw r=Ll,fc(e,0),lc(e,t),ic(e,Je()),r;if(6===r)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,ql),ic(e,Je()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Vl=Je()+500,Ui&&Vi())}}function dc(e){null!==Ql&&0===Ql.tag&&!(6&Il)&&Sc();var t=Il;Il|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,!(6&(Il=t))&&Vi()}}function hc(){Ol=Dl.current,Ei(Dl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,si(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Di();break;case 3:Xs(),Ei(ji),Ei(Ii),ra();break;case 5:Zs(r);break;case 4:Xs();break;case 13:case 19:Ei(ea);break;case 10:Ns(r.type._context);break;case 22:case 23:hc()}n=n.return}if(jl=e,Al=e=Dc(e.current,null),Pl=Ol=t,Rl=0,Ll=null,zl=Fl=Ml=0,Bl=Ul=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ps=null}return e}function pc(e,t){for(;;){var r=Al;try{if(Ts(),ia.current=Ja,ua){for(var i=oa.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}ua=!1}if(aa=0,ca=la=oa=null,da=!1,ha=0,Tl.current=null,null===r||null===r.return){Rl=1,Ll=t,Al=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(!(1&t)){go(a,u,t),gc();break e}c=Error(n(426))}else if(ss&&1&l.mode){var y=yo(o);if(null!==y){!(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),ms(co(c,l));break e}}a=c=co(c,l),4!==Rl&&(Rl=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,$s(a,po(0,c,t));break e;case 1:l=c;var v=a.type,_=a.stateNode;if(!(128&a.flags||"function"!=typeof v.getDerivedStateFromError&&(null===_||"function"!=typeof _.componentDidCatch||null!==Gl&&Gl.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,$s(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}wc(r)}catch(b){t=b,Al===r&&null!==r&&(Al=r=r.return);continue}break}}function mc(){var e=El.current;return El.current=Ja,null===e?Ja:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===jl||!(268435455&Ml)&&!(268435455&Fl)||lc(jl,Pl)}function yc(e,t){var r=Il;Il|=2;var i=mc();for(jl===e&&Pl===t||(ql=null,fc(e,t));;)try{vc();break}catch(s){pc(e,s)}if(Ts(),Il=r,El.current=i,null!==Al)throw Error(n(261));return jl=null,Pl=0,Rl}function vc(){for(;null!==Al;)bc(Al)}function _c(){for(;null!==Al&&!Ye();)bc(Al)}function bc(e){var t=Cl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Rl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Ko(n,t,Ol)))return void(Al=n);if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,r){var i=bt,s=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,r,i){do{Sc()}while(null!==Ql);if(6&Il)throw Error(n(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===jl&&(Al=jl=null,Pl=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Kl||(Kl=!0,jc(nt,function(){return Sc(),null})),a=!!(15990&r.flags),!!(15990&r.subtreeFlags)||a){a=Nl.transition,Nl.transition=null;var o=bt;bt=1;var l=Il;Il|=4,Tl.current=null,function(e,t){if(ti=Ht,pr(e=fr())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(i&&0!==i.rangeCount){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch(w){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===a&&++d===i&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ni={focusedElem:e,selectionRange:r},Ht=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,1028&t.subtreeFlags&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(n(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,r),yl(r,e),mr(ni),Ht=!!ti,ni=ti=null,e.current=r,_l(r),Xe(),Il=l,bt=o,Nl.transition=a}else e.current=r;if(Kl&&(Kl=!1,Ql=e,Yl=s),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),ic(e,Je()),null!==t)for(i=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;!!(1&Yl)&&0!==e.tag&&Sc(),a=e.pendingLanes,1&a?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Vi()}(e,t,r,i)}finally{Nl.transition=s,bt=i}return null}function Sc(){if(null!==Ql){var e=wt(Yl),t=Nl.transition,r=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Ql)var i=!1;else{if(e=Ql,Ql=null,Yl=0,6&Il)throw Error(n(331));var s=Il;for(Il|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(16&Zo.flags){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var f=(d=Zo).sibling,p=d.return;if(al(d),d===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=a}}if(2064&a.subtreeFlags&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(2048&(a=Zo).flags)switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break e}Zo=a.return}}var _=e.current;for(Zo=_;null!==Zo;){var b=(o=Zo).child;if(2064&o.subtreeFlags&&null!==b)b.return=o,Zo=b;else e:for(o=_;null!==Zo;){if(2048&(l=Zo).flags)try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(x){kc(l,l.return,x)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(Il=s,Vi(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(x){}i=!0}return i}finally{bt=r,Nl.transition=t}}return!1}function Cc(e,t,n){e=Us(e,t=po(0,t=co(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function kc(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Us(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,jl===e&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>Je()-$l?fc(e,0):zl|=n),ic(e,t)}function Tc(e,t){0===t&&(1&e.mode?(t=dt,!(130023424&(dt<<=1))&&(dt=4194304)):t=1);var n=tc();null!==(e=Rs(e,t))&&(vt(e,t,n),ic(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(n(314))}null!==i&&i.delete(t),Tc(e,r)}function jc(e,t){return Ke(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,r,i,s,a){var o=2;if(i=e,"function"==typeof e)Oc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case x:return Lc(r.children,s,a,t);case S:o=8,s|=8;break;case C:return(e=Pc(12,r,t,2|s)).elementType=C,e.lanes=a,e;case j:return(e=Pc(13,r,t,s)).elementType=j,e.lanes=a,e;case A:return(e=Pc(19,r,t,s)).elementType=A,e.lanes=a,e;case D:return Mc(r,s,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case T:o=9;break e;case I:o=11;break e;case P:o=14;break e;case O:o=16,i=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Pc(o,r,t,s)).elementType=e,t.type=i,t.lanes=a,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function $c(e){if(!e)return Ni;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var r=e.type;if(Oi(r))return Li(e,r,t)}return t}function Vc(e,t,n,r,i,s,a,o,l){return(e=Bc(n,r,!0,e,0,s,0,o,l)).context=$c(null),n=e.current,(s=zs(r=tc(),i=nc(n))).callback=null!=t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function qc(e,t,n,r){var i=t.current,s=tc(),a=nc(i);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=zs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(rc(e,i,a,s),Bs(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Cl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||ji.current)bo=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:jo(t),ps();break;case 5:Js(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(Ti(ea,1&ea.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ti(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Vo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ho(e,t,n)}(e,t,r);bo=!!(131072&e.flags)}else bo=!1,ss&&1048576&t.flags&&es(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;qo(e,t),e=t.pendingProps;var s=Pi(t,Ii.current);js(t,r),s=ga(null,t,i,e,s,r);var a=ya();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(i)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ms(t),s.updater=io,t.stateNode=s,s._reactInternals=t,lo(t,i,e,r),t=Io(null,t,i,!0,a,r)):(t.tag=0,ss&&a&&ts(t),wo(null,t,s,r),t=t.child),t;case 16:i=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return Oc(e)?1:0;if(null!=e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(i),e=no(i,e),s){case 0:t=To(null,t,i,e,r);break e;case 1:t=No(null,t,i,e,r);break e;case 11:t=xo(null,t,i,e,r);break e;case 14:t=So(null,t,i,no(i.type,e),r);break e}throw Error(n(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,To(e,t,i,s=t.elementType===i?s:no(i,s),r);case 1:return i=t.type,s=t.pendingProps,No(e,t,i,s=t.elementType===i?s:no(i,s),r);case 3:e:{if(jo(t),null===e)throw Error(n(387));i=t.pendingProps,s=(a=t.memoizedState).element,Fs(e,t),Vs(t,i,null,r);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,i,r,s=co(Error(n(423)),t));break e}if(i!==s){t=Ao(e,t,i,r,s=co(Error(n(424)),t));break e}for(is=ui(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,as=null,r=xs(t,null,i,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ps(),i===s){t=Ho(e,t,r);break e}wo(e,t,i,r)}t=t.child}return t;case 5:return Js(t),null===e&&us(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ri(i,s)?o=null:null!==a&&ri(i,a)&&(t.flags|=32),Eo(e,t),wo(e,t,o,r),t.child;case 6:return null===e&&us(t),null;case 13:return Fo(e,t,r);case 4:return Ys(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ws(t,null,i,r):wo(e,t,i,r),t.child;case 11:return i=t.type,s=t.pendingProps,xo(e,t,i,s=t.elementType===i?s:no(i,s),r);case 7:return wo(e,t,t.pendingProps,r),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ti(Ss,i._currentValue),i._currentValue=o,null!==a)if(lr(a.value,o)){if(a.children===s.children&&!ji.current){t=Ho(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=zs(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),Is(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(n(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Is(o,r,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,js(t,r),i=i(s=As(s)),t.flags|=1,wo(e,t,i,r),t.child;case 14:return s=no(i=t.type,t.pendingProps),So(e,t,i,s=no(i.type,s),r);case 15:return Co(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:no(i,s),qo(e,t),t.tag=1,Oi(i)?(e=!0,Mi(t)):e=!1,js(t,r),ao(t,i,s),lo(t,i,s,r),Io(null,t,i,!0,e,r);case 19:return Vo(e,t,r);case 22:return ko(e,t,r)}throw Error(n(156,t.tag))};var Kc="function"==typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[mi]=a.current,Vr(8===e.nodeType?e.parentNode:e),dc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[mi]=l.current,Vr(8===e.nodeType?e.parentNode:e),dc(function(){qc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(a)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){qc(null,e,null,null)}),t[mi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(_t(t,1|n),ic(t,Je()),!(6&Il)&&(Vl=Je()+500,Vi()))}break;case 13:dc(function(){var t=Rs(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Gc(e,1)}},St=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=nc(e),n=Rs(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},kt=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,r){switch(t){case"input":if(Z(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var s=xi(i);if(!s)throw Error(n(90));K(i),Z(i,s)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ie=uc,je=dc;var tu={usingClientEntryPoint:!1,Events:[bi,wi,xi,Te,Ne,uc]},nu={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{st=iu.inject(ru),at=iu}catch(de){}}return k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,k.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(n(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,r)},k.createRoot=function(e,t){if(!Xc(e))throw Error(n(299));var r=!1,i="",s=Kc;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,r,0,i,s),e[mi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Qc(t)},k.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=We(t))?null:e.stateNode},k.flushSync=function(e){return dc(e)},k.hydrate=function(e,t,r){if(!Jc(t))throw Error(n(200));return eu(null,e,t,!0,r)},k.hydrateRoot=function(e,t,r){if(!Xc(e))throw Error(n(405));var i=null!=r&&r.hydratedSources||null,s=!1,a="",o=Kc;if(null!=r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Vc(t,null,e,1,null!=r?r:null,s,0,a,o),e[mi]=t.current,Vr(e),i)for(e=0;e<i.length;e++)s=(s=(r=i[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Yc(t)},k.render=function(e,t,r){if(!Jc(t))throw Error(n(200));return eu(null,e,t,!1,r)},k.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(n(40));return!!e._reactRootContainer&&(dc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},k.unstable_batchedUpdates=uc,k.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Jc(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return eu(e,t,r,!1,i)},k.version="18.3.1-next-f1338f8080-20240426",k}function j(){if(w)return C.exports;return w=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),C.exports=I(),C.exports}var A=function(){if(x)return S;x=1;var e=j();return S.createRoot=e.createRoot,S.hydrateRoot=e.hydrateRoot,S}(),P="popstate";
/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function O(e={}){return function(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=u();null==c&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o="PUSH";let n=M(m.location,e,t);c=u()+1;let r=L(n,c),d=m.createHref(n);try{a.pushState(r,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}s&&l&&l({action:o,location:m.location,delta:1})}function f(e,t){o="REPLACE";let n=M(m.location,e,t);c=u();let r=L(n,c),i=m.createHref(n);a.replaceState(r,"",i),s&&l&&l({action:o,location:m.location,delta:0})}function p(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href);D(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:F(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r);return new URL(r,n)}(e)}let m={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(P,d),l=e,()=>{i.removeEventListener(P,d),l=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>a.go(e)};return m}(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return M("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:F(t)},0,e)}function D(e,t){if(!1===e||null==e)throw new Error(t)}function R(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function L(e,t){return{usr:e.state,key:e.key,idx:t}}function M(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?z(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function F({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function z(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function U(e,t,n="/"){return function(e,t,n,r){let i="string"==typeof t?z(t):t,s=ee(i.pathname||"/",n);if(null==s)return null;let a=B(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let l=0;null==o&&l<a.length;++l){let e=Z(s);o=X(a[l],e,r)}return o}(e,t,n,!1)}function B(e,t=[],n=[],r="",i=!1){let s=(e,s,a=i,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&a)return;D(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=ie([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(D(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),B(e.children,t,u,c,a)),(null!=e.path||e.index)&&t.push({path:c,score:Y(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&(null==(n=e.path)?void 0:n.includes("?")))for(let r of $(e.path))s(e,t,!0,r);else s(e,t)}),t}function $(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=$(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var V=/^:[\w-]+$/,q=3,H=2,W=1,G=10,K=-2,Q=e=>"*"===e;function Y(e,t){let n=e.split("/"),r=n.length;return n.some(Q)&&(r+=K),t&&(r+=H),n.filter(e=>!Q(e)).reduce((e,t)=>e+(V.test(t)?q:""===t?W:G),r)}function X(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=J({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=J({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:ie([s,u.pathname]),pathnameBase:se(ie([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=ie([s,u.pathnameBase]))}return a}function J(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){R("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[r];return e[t]=n&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function Z(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return R(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ee(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function te(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ne(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function re(e,t,n,r=!1){let i;"string"==typeof e?i=z(e):(i={...e},D(!i.pathname||!i.pathname.includes("?"),te("?","pathname","search",i)),D(!i.pathname||!i.pathname.includes("#"),te("#","pathname","hash",i)),D(!i.search||!i.search.includes("#"),te("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:n,search:r="",hash:i=""}="string"==typeof e?z(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:ae(r),hash:oe(i)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var ie=e=>e.join("/").replace(/\/\/+/g,"/"),se=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ae=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",oe=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var le=["POST","PUT","PATCH","DELETE"];new Set(le);var ce=["GET",...le];new Set(ce);var ue=g.createContext(null);ue.displayName="DataRouter";var de=g.createContext(null);de.displayName="DataRouterState",g.createContext(!1);var he=g.createContext({isTransitioning:!1});he.displayName="ViewTransition",g.createContext(new Map).displayName="Fetchers",g.createContext(null).displayName="Await";var fe=g.createContext(null);fe.displayName="Navigation";var pe=g.createContext(null);pe.displayName="Location";var me=g.createContext({outlet:null,matches:[],isDataRoute:!1});me.displayName="Route";var ge=g.createContext(null);function ye(){return null!=g.useContext(pe)}function ve(){return D(ye(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(pe).location}ge.displayName="RouteError";var _e="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function be(e){g.useContext(fe).static||g.useLayoutEffect(e)}function we(){let{isDataRoute:e}=g.useContext(me);return e?function(){let{router:e}=function(e){let t=g.useContext(ue);return D(t,Ie(e)),t}("useNavigate"),t=je("useNavigate"),n=g.useRef(!1);return be(()=>{n.current=!0}),g.useCallback(async(r,i={})=>{R(n.current,_e),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}():function(){D(ye(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(ue),{basename:t,navigator:n}=g.useContext(fe),{matches:r}=g.useContext(me),{pathname:i}=ve(),s=JSON.stringify(ne(r)),a=g.useRef(!1);return be(()=>{a.current=!0}),g.useCallback((r,o={})=>{if(R(a.current,_e),!a.current)return;if("number"==typeof r)return void n.go(r);let l=re(r,JSON.parse(s),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ie([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,s,i,e])}()}var xe=g.createContext(null);function Se(e,{relative:t}={}){let{matches:n}=g.useContext(me),{pathname:r}=ve(),i=JSON.stringify(ne(n));return g.useMemo(()=>re(e,JSON.parse(i),r,"path"===t),[e,i,r,t])}function Ce(e,t,n,r,i){var s;D(ye(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=g.useContext(fe),{matches:o}=g.useContext(me),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";Pe(u,!h||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let f,p=ve();if(t){let e="string"==typeof t?z(t):t;D("/"===d||(null==(s=e.pathname)?void 0:s.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),f=e}else f=p;let m=f.pathname||"/",y=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=U(e,{pathname:y});R(h||null!=v,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),R(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=function(e,t=[],n=null,r=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,s=null==n?void 0:n.errors;if(null!=s){let e=i.findIndex(e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id]));D(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let a=!1,o=-1;if(n)for(let l=0;l<i.length;l++){let e=i[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=l),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){a=!0,i=o>=0?i.slice(0,o+1):[i[0]];break}}}return i.reduceRight((e,l,c)=>{let u,d=!1,h=null,f=null;n&&(u=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||Ee,a&&(o<0&&0===c?(Pe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):o===c&&(d=!0,f=l.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,c+1)),m=()=>{let t;return t=u?h:d?f:l.route.Component?g.createElement(l.route.Component,null):l.route.element?l.route.element:e,g.createElement(Ne,{match:l,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?g.createElement(Te,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0},unstable_onError:r}):m()},null)}(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ie([d,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:ie([d,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,r,i);return t&&_?g.createElement(pe.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},_):_}function ke(){let e=function(){var e;let t=g.useContext(ge),n=function(e){let t=g.useContext(de);return D(t,Ie(e)),t}("useRouteError"),r=je("useRouteError");if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:s},"ErrorBoundary")," or"," ",g.createElement("code",{style:s},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:i},n):null,a)}var Ee=g.createElement(ke,null),Te=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?g.createElement(me.Provider,{value:this.props.routeContext},g.createElement(ge.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ne({routeContext:e,match:t,children:n}){let r=g.useContext(ue);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(me.Provider,{value:e},n)}function Ie(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function je(e){let t=function(e){let t=g.useContext(me);return D(t,Ie(e)),t}(e),n=t.matches[t.matches.length-1];return D(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var Ae={};function Pe(e,t,n){t||Ae[e]||(Ae[e]=!0,R(!1,n))}function Oe({to:e,replace:t,state:n,relative:r}){D(ye(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=g.useContext(fe);R(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=g.useContext(me),{pathname:a}=ve(),o=we(),l=re(e,ne(s),a,"path"===r),c=JSON.stringify(l);return g.useEffect(()=>{o(JSON.parse(c),{replace:t,state:n,relative:r})},[o,c,r,t,n]),null}function De(e){return function(e){let t=g.useContext(me).outlet;return g.useMemo(()=>t&&g.createElement(xe.Provider,{value:e},t),[t,e])}(e.context)}function Re(e){D(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){D(!ye(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),o=g.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);"string"==typeof n&&(n=z(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,f=g.useMemo(()=>{let e=ee(l,a);return null==e?null:{location:{pathname:e,search:c,hash:u,state:d,key:h},navigationType:r}},[a,l,c,u,d,h,r]);return R(null!=f,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:g.createElement(fe.Provider,{value:o},g.createElement(pe.Provider,{children:t,value:f}))}function Me({children:e,location:t}){return Ce(Fe(e),t)}function Fe(e,t=[]){let n=[];return g.Children.forEach(e,(e,r)=>{if(!g.isValidElement(e))return;let i=[...t,r];if(e.type===g.Fragment)return void n.push.apply(n,Fe(e.props.children,i));D(e.type===Re,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),D(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Fe(e.props.children,i)),n.push(s)}),n}g.memo(function({routes:e,future:t,state:n,unstable_onError:r}){return Ce(e,void 0,n,r,t)});var ze="get",Ue="application/x-www-form-urlencoded";function Be(e){return null!=e&&"string"==typeof e.tagName}function $e(e=""){return new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var Ve=null;var qe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function He(e){return null==e||qe.has(e)?e:(R(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ue}"`),null)}function We(e,t){let n,r,i,s,a;if(Be(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?ee(a,t):null,n=e.getAttribute("method")||ze,i=He(e.getAttribute("enctype"))||Ue,s=new FormData(e)}else if(function(e){return Be(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Be(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?ee(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||ze,i=He(e.getAttribute("formenctype"))||He(a.getAttribute("enctype"))||Ue,s=new FormData(a,e),!function(){if(null===Ve)try{new FormData(document.createElement("form"),0),Ve=!1}catch(e){Ve=!0}return Ve}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,r)}}else{if(Be(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ze,r=null,i=Ue,a=e}var o;return s&&"text/plain"===i&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}function Ge(e,t){if(!1===e||null==e)throw new Error(t)}function Ke(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Qe(e,t,n){return function(e,t){let n=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e},[])}((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ke).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function Ye(e,t,n,r,i,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null==(r=n[t].route.path)?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{var l;let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null==(l=n[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function Xe(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Je(){let e=g.useContext(ue);return Ge(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ze=g.createContext(void 0);function et(){let e=g.useContext(Ze);return Ge(e,"You must render this element inside a <HydratedRouter> element"),e}function tt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function nt({page:e,...t}){let{router:n}=Je(),r=g.useMemo(()=>U(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(rt,{page:e,matches:r,...t}):null}function rt({page:e,matches:t,...n}){let r=ve(),{manifest:i,routeModules:s}=et(),{basename:a}=Je(),{loaderData:o,matches:l}=function(){let e=g.useContext(de);return Ge(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=g.useMemo(()=>Ye(e,t,l,i,r,"data"),[e,t,l,i,r]),u=g.useMemo(()=>Ye(e,t,l,i,r,"assets"),[e,t,l,i,r]),d=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach(e=>{var t;let r=i.routes[e.route.id];r&&r.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in o&&(null==(t=s[e.route.id])?void 0:t.shouldRevalidate)||r.hasClientLoader?l=!0:n.add(e.route.id))}),0===n.size)return[];let u=function(e,t,n){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===ee(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}(e,a,"data");return l&&n.size>0&&u.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[a,o,r,i,c,t,e,s]),h=g.useMemo(()=>Xe(u,i),[u,i]),f=function(e){let{manifest:t,routeModules:n}=et(),[r,i]=g.useState([]);return g.useEffect(()=>{let r=!1;return Qe(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}(u);return g.createElement(g.Fragment,null,d.map(e=>g.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),h.map(e=>g.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),f.map(({key:e,link:t})=>g.createElement("link",{key:e,nonce:n.nonce,...t})))}function it(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}Ze.displayName="FrameworkContext";var st="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{st&&(window.__reactRouterVersion="7.9.4")}catch(XD){}function at({basename:e,children:t,window:n}){let r=g.useRef();null==r.current&&(r.current=O({window:n,v5Compat:!0}));let i=r.current,[s,a]=g.useState({action:i.action,location:i.location}),o=g.useCallback(e=>{g.startTransition(()=>a(e))},[a]);return g.useLayoutEffect(()=>i.listen(o),[i,o]),g.createElement(Le,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var ot=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lt=g.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:s,state:a,target:o,to:l,preventScrollReset:c,viewTransition:u,...d},h){let f,{basename:p}=g.useContext(fe),m="string"==typeof l&&ot.test(l),y=!1;if("string"==typeof l&&m&&(f=l,st))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),n=ee(t.pathname,p);t.origin===e.origin&&null!=n?l=n+t.search+t.hash:y=!0}catch(XD){R(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=function(e,{relative:t}={}){D(ye(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(fe),{hash:i,pathname:s,search:a}=Se(e,{relative:t}),o=s;return"/"!==n&&(o="/"===s?n:ie([n,s])),r.createHref({pathname:o,search:a,hash:i})}(l,{relative:r}),[_,b,w]=function(e,t){let n=g.useContext(Ze),[r,i]=g.useState(!1),[s,a]=g.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=g.useRef(null);g.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),g.useEffect(()=>{if(r){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{i(!0)},p=()=>{i(!1),a(!1)};return n?"intent"!==e?[s,h,{}]:[s,h,{onFocus:tt(o,f),onBlur:tt(l,p),onMouseEnter:tt(c,f),onMouseLeave:tt(u,p),onTouchStart:tt(d,f)}]:[!1,h,{}]}(n,d),x=function(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=we(),l=ve(),c=Se(e,{relative:s});return g.useCallback(u=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(u,t)){u.preventDefault();let t=void 0!==n?n:F(l)===F(c);o(e,{replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,c,n,r,t,e,i,s,a])}(l,{replace:s,state:a,target:o,preventScrollReset:c,relative:r,viewTransition:u});let S=g.createElement("a",{...d,...w,href:f||v,onClick:y||i?e:function(t){e&&e(t),t.defaultPrevented||x(t)},ref:it(h,b),target:o,"data-discover":m||"render"!==t?void 0:"true"});return _&&!m?g.createElement(g.Fragment,null,S,g.createElement(nt,{page:v})):S});lt.displayName="Link";var ct=g.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:s,viewTransition:a,children:o,...l},c){let u=Se(s,{relative:l.relative}),d=ve(),h=g.useContext(de),{navigator:f,basename:p}=g.useContext(fe),m=null!=h&&function(e,{relative:t}={}){let n=g.useContext(he);D(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ut("useViewTransitionState"),i=Se(e,{relative:t});if(!n.isTransitioning)return!1;let s=ee(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=ee(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=J(i.pathname,a)||null!=J(i.pathname,s)}(u)&&!0===a,y=f.encodeLocation?f.encodeLocation(u).pathname:u.pathname,v=d.pathname,_=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(v=v.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase()),_&&p&&(_=ee(_,p)||_);const b="/"!==y&&y.endsWith("/")?y.length-1:y.length;let w,x=v===y||!r&&v.startsWith(y)&&"/"===v.charAt(b),S=null!=_&&(_===y||!r&&_.startsWith(y)&&"/"===_.charAt(y.length)),C={isActive:x,isPending:S,isTransitioning:m},k=x?e:void 0;w="function"==typeof n?n(C):[n,x?"active":null,S?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let E="function"==typeof i?i(C):i;return g.createElement(lt,{...l,"aria-current":k,className:w,ref:c,style:E,to:s,viewTransition:a},"function"==typeof o?o(C):o)});function ut(e){let t=g.useContext(ue);return D(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}function dt(e){R("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef($e(e)),n=g.useRef(!1),r=ve(),i=g.useMemo(()=>function(e,t){let n=$e(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),s=we(),a=g.useCallback((e,t)=>{const r=$e("function"==typeof e?e(new URLSearchParams(i)):e);n.current=!0,s("?"+r,t)},[s,i]);return[i,a]}ct.displayName="NavLink",g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:a=ze,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},f)=>{let p=function(){let{router:e}=ut("useSubmit"),{basename:t}=g.useContext(fe),n=je("useRouteId");return g.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=We(r,t);if(!1===i.navigate){let t=i.fetcherKey||ft();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}(),m=function(e,{relative:t}={}){let{basename:n}=g.useContext(fe),r=g.useContext(me);D(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Se(e||".",{relative:t})},a=ve();if(null==e){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?`?${n}`:""}}e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:ie([n,s.pathname]));return F(s)}(o,{relative:c}),y="get"===a.toLowerCase()?"get":"post",v="string"==typeof o&&ot.test(o);return g.createElement("form",{ref:f,method:y,action:m,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=(null==r?void 0:r.getAttribute("formmethod"))||a;p(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:d})},...h,"data-discover":v||"render"!==e?void 0:"true"})}).displayName="Form";var ht=0,ft=()=>`__${String(++ht)}__`;const pt=i(j());function mt(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=mt(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function gt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=mt(e))&&(r&&(r+=" "),r+=t);return r}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var yt=e=>"number"==typeof e&&!isNaN(e),vt=e=>"string"==typeof e,_t=e=>"function"==typeof e,bt=e=>vt(e)||_t(e)?e:null,wt=(e,t)=>!1===e||yt(e)&&e>0?e:t,xt=e=>g.isValidElement(e)||vt(e)||_t(e)||yt(e);function St(e,t){return{content:Ct(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function Ct(e,t,n=!1){return g.isValidElement(e)&&!vt(e.type)?g.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):_t(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function kt({delay:e,isRunning:t,closeToast:n,type:r="default",hide:i,className:s,controlledProgress:a,progress:o,rtl:l,isIn:c,theme:u}){let d=i||a&&0===o,h={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};a&&(h.transform=`scaleX(${o})`);let f=gt("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":l}),p=_t(s)?s({rtl:l,type:r,defaultClassName:f}):gt(f,s),m={[a&&o>=1?"onTransitionEnd":"onAnimationEnd"]:a&&o<1?null:()=>{c&&n()}};return y.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":d},y.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${r}`}),y.createElement("div",{role:"progressbar","aria-hidden":d?"true":"false","aria-label":"notification timer",className:p,style:h,...m}))}var Et=1,Tt=()=>""+Et++;function Nt(e,t,n){let r=1,i=0,s=[],a=[],o=t,l=new Map,c=new Set,u=()=>{a=Array.from(l.values()),c.forEach(e=>e())},d=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},h=e=>{if(null==e)l.forEach(d);else{let t=l.get(e);t&&d(t)}u()},f=e=>{var t,r;let{toastId:i,updateId:s}=e.props,a=null==s;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(i,e),u(),n(St(e,a?"added":"updated")),a&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:o,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach(n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))})},removeToast:h,toasts:l,clearQueue:()=>{i-=s.length,s=[]},buildToast:(t,a)=>{if((({containerId:t,toastId:n,updateId:r})=>{let i=t?t!==e:1!==e,s=l.has(n)&&null==r;return i||s})(a))return;let{toastId:c,updateId:d,data:p,staleId:m,delay:g}=a,y=null==d;y&&i++;let v={...o,style:o.toastStyle,key:r++,...Object.fromEntries(Object.entries(a).filter(([e,t])=>null!=t)),toastId:c,updateId:d,data:p,isIn:!1,className:bt(a.className||o.toastClassName),progressClassName:bt(a.progressClassName||o.progressClassName),autoClose:!a.isLoading&&wt(a.autoClose,o.autoClose),closeToast(e){l.get(c).removalReason=e,h(c)},deleteToast(){let e=l.get(c);if(null!=e){if(n(St(e,"removed")),l.delete(c),i--,i<0&&(i=0),s.length>0)return void f(s.shift());u()}}};v.closeButton=o.closeButton,!1===a.closeButton||xt(a.closeButton)?v.closeButton=a.closeButton:!0===a.closeButton&&(v.closeButton=!xt(o.closeButton)||o.closeButton);let _={content:t,props:v,staleId:m};o.limit&&o.limit>0&&i>o.limit&&y?s.push(_):yt(g)?setTimeout(()=>{f(_)},g):f(_)},setProps(e){o=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>a}}var It=new Map,jt=[],At=new Set,Pt=e=>At.forEach(t=>t(e)),Ot=()=>It.size>0;function Dt(e,t){var n;if(t)return!(null==(n=It.get(t))||!n.isToastActive(e));let r=!1;return It.forEach(t=>{t.isToastActive(e)&&(r=!0)}),r}function Rt(e){if(Ot()){if(null==e||(e=>vt(e)||yt(e))(e))It.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=It.get(e.containerId);t?t.removeToast(e.id):It.forEach(t=>{t.removeToast(e.id)})}}else jt=jt.filter(t=>null!=e&&t.options.toastId!==e)}function Lt(e,t){xt(e)&&(Ot()||jt.push({content:e,options:t}),It.forEach(n=>{n.buildToast(e,t)}))}function Mt(e,t){It.forEach(n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)})}function Ft(e){let t=e.containerId||1;return{subscribe(n){let r=Nt(t,e,Pt);It.set(t,r);let i=r.observe(n);return jt.forEach(e=>Lt(e.content,e.options)),jt=[],()=>{i(),It.delete(t)}},setProps(e){var n;null==(n=It.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=It.get(t))?void 0:e.getSnapshot()}}}function zt(e){return e&&(vt(e.toastId)||yt(e.toastId))?e.toastId:Tt()}function Ut(e,t){return Lt(e,t),t.toastId}function Bt(e,t){return{...t,type:t&&t.type||e,toastId:zt(t)}}function $t(e){return(t,n)=>Ut(t,Bt(e,n))}function Vt(e,t){return Ut(e,Bt("default",t))}function qt(e){let[t,n]=g.useState(!1),[r,i]=g.useState(!1),s=g.useRef(null),a=g.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:d}=e;function h(){n(!0)}function f(){n(!1)}function p(n){let r=s.current;if(a.canDrag&&r){a.didMove=!0,t&&f(),"x"===e.draggableDirection?a.delta=n.clientX-a.start:a.delta=n.clientY-a.start,a.start!==n.clientX&&(a.canCloseOnClick=!1);let i="x"===e.draggableDirection?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;r.style.transform=`translate3d(${i},0)`,r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance))}}function m(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",m);let t=s.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return i(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=It.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),g.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||f(),window.addEventListener("focus",h),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",f)}},[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",m);let n=s.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:i,right:a}=s.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=i&&t.clientX<=a&&t.clientY>=n&&t.clientY<=r?f():h()}};return o&&l&&(y.onMouseEnter=f,e.stacked||(y.onMouseLeave=h)),d&&(y.onClick=e=>{u&&u(e),a.canCloseOnClick&&c(!0)}),{playToast:h,pauseToast:f,isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:y}}Vt.loading=(e,t)=>Ut(e,Bt("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Vt.promise=function(e,{pending:t,error:n,success:r},i){let s;t&&(s=vt(t)?Vt.loading(t,i):Vt.loading(t.render,{...i,...t}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(e,t,n)=>{if(null==t)return void Vt.dismiss(s);let r={type:e,...a,...i,data:n},o=vt(t)?{render:t}:t;return s?Vt.update(s,{...r,...o}):Vt(o.render,{...r,...o}),n},l=_t(e)?e():e;return l.then(e=>o("success",r,e)).catch(e=>o("error",n,e)),l},Vt.success=$t("success"),Vt.info=$t("info"),Vt.error=$t("error"),Vt.warning=$t("warning"),Vt.warn=Vt.warning,Vt.dark=(e,t)=>Ut(e,Bt("default",{theme:"dark",...t})),Vt.dismiss=function(e){Rt(e)},Vt.clearWaitingQueue=(e={})=>{It.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},Vt.isActive=Dt,Vt.update=(e,t={})=>{let n=((e,{containerId:t})=>{var n;return null==(n=It.get(t||1))?void 0:n.toasts.get(e)})(e,t);if(n){let{props:r,content:i}=n,s={delay:100,...r,...t,toastId:t.toastId||e,updateId:Tt()};s.toastId!==e&&(s.staleId=e);let a=s.render||i;delete s.render,Ut(a,s)}},Vt.done=e=>{Vt.update(e,{progress:1})},Vt.onChange=function(e){return At.add(e),()=>{At.delete(e)}},Vt.play=e=>Mt(!0,e),Vt.pause=e=>Mt(!1,e);var Ht="undefined"!=typeof window?g.useLayoutEffect:g.useEffect,Wt=({theme:e,type:t,isLoading:n,...r})=>y.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${t})`,...r});var Gt={info:function(e){return y.createElement(Wt,{...e},y.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return y.createElement(Wt,{...e},y.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return y.createElement(Wt,{...e},y.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return y.createElement(Wt,{...e},y.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return y.createElement("div",{className:"Toastify__spinner"})}};function Kt({theme:e,type:t,isLoading:n,icon:r}){let i=null,s={theme:e,type:t};return!1===r||(_t(r)?i=r({...s,isLoading:n}):g.isValidElement(r)?i=g.cloneElement(r,s):n?i=Gt.spinner():(e=>e in Gt)(t)&&(i=Gt[t](s))),i}var Qt=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=qt(e),{closeButton:a,children:o,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:h,transition:f,position:p,className:m,style:v,progressClassName:_,updateId:b,role:w,progress:x,rtl:S,toastId:C,deleteToast:k,isIn:E,isLoading:T,closeOnClick:N,theme:I,ariaLabel:j}=e,A=gt("Toastify__toast",`Toastify__toast-theme--${I}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":N}),P=_t(m)?m({rtl:S,position:p,type:u,defaultClassName:A}):gt(A,m),O=Kt(e),D=!!x||!l,R={closeToast:h,type:u,theme:I},L=null;return!1===a||(L=_t(a)?a(R):g.isValidElement(a)?g.cloneElement(a,R):function({closeToast:e,theme:t,ariaLabel:n="close"}){return y.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:t=>{t.stopPropagation(),e(!0)},"aria-label":n},y.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},y.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(R)),y.createElement(f,{isIn:E,done:k,position:p,preventExitTransition:n,nodeRef:r,playToast:s},y.createElement("div",{id:C,tabIndex:0,onClick:c,"data-in":E,className:P,...i,style:v,ref:r,...E&&{role:w,"aria-label":j}},null!=O&&y.createElement("div",{className:gt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},O),Ct(o,e,!t),L,!e.customProgressBar&&y.createElement(kt,{...b&&!D?{key:`p-${b}`}:{},rtl:S,theme:I,delay:l,isRunning:t,isIn:E,closeToast:h,hide:d,type:u,className:_,controlledProgress:D,progress:x||0})))},Yt=function({enter:e,exit:t,appendPosition:n=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:s,position:a,preventExitTransition:o,done:l,nodeRef:c,isIn:u,playToast:d}){let h=n?`${e}--${a}`:e,f=n?`${t}--${a}`:t,p=g.useRef(0);return g.useLayoutEffect(()=>{let e=c.current,t=h.split(" "),n=r=>{r.target===c.current&&(d(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===p.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),g.useEffect(()=>{let e=c.current,t=()=>{e.removeEventListener("animationend",t),r?function(e,t,n=300){let{scrollHeight:r,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}(e,l,i):l()};u||(o?t():(p.current=1,e.className+=` ${f}`,e.addEventListener("animationend",t)))},[u]),y.createElement(y.Fragment,null,s)}}(((e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}))("bounce",!0)),Xt={position:"top-right",transition:Yt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code};function Jt(e){let t={...Xt,...e},n=e.stacked,[r,i]=g.useState(!0),s=g.useRef(null),{getToastToRender:a,isToastActive:o,count:l}=function(e){var t;let{subscribe:n,getSnapshot:r,setProps:i}=g.useRef(Ft(e)).current;i(e);let s=null==(t=g.useSyncExternalStore(n,r,r))?void 0:t.slice();return{getToastToRender:function(t){if(!s)return[];let n=new Map;return e.newestOnTop&&s.reverse(),s.forEach(e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)}),Array.from(n,e=>t(e[0],e[1]))},isToastActive:Dt,count:null==s?void 0:s.length}}(t),{className:c,style:u,rtl:d,containerId:h,hotKeys:f}=t;function p(e){let t=gt("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":d});return _t(c)?c({position:e,rtl:d,defaultClassName:t}):gt(t,bt(c))}function m(){n&&(i(!0),Vt.play())}return Ht(()=>{var e;if(n){let n=s.current.querySelectorAll('[data-in="true"]'),i=12,a=null==(e=t.position)?void 0:e.includes("top"),o=0,l=0;Array.from(n).reverse().forEach((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed=`${r}`),n.dataset.pos||(n.dataset.pos=a?"top":"bot");let s=o*(r?.2:1)+(r?0:i*t);n.style.setProperty("--y",`${a?s:-1*s}px`),n.style.setProperty("--g",`${i}`),n.style.setProperty("--s",""+(1-(r?l:0))),o+=n.offsetHeight,l+=.025})}},[r,l,n]),g.useEffect(()=>{function e(e){var t;let n=s.current;f(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),i(!1),Vt.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(i(!0),Vt.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[f]),y.createElement("section",{ref:s,className:"Toastify",id:h,onMouseEnter:()=>{n&&(i(!1),Vt.pause())},onMouseLeave:m,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},a((e,t)=>{let r=t.length?{...u}:{...u,pointerEvents:"none"};return y.createElement("div",{tabIndex:-1,className:p(e),"data-stacked":n,style:r,key:`c-${e}`},t.map(({content:e,props:t})=>y.createElement(Qt,{...t,stacked:n,collapseAll:m,isIn:o(t.toastId,t.containerId),key:`t-${t.key}`},e)))}))}const Zt=g.createContext({});function en(e){const t=g.useRef(null);return null===t.current&&(t.current=e()),t.current}const tn="undefined"!=typeof window?g.useLayoutEffect:g.useEffect,nn=g.createContext(null);const rn=g.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function sn(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function an(...e){return g.useCallback(function(...e){return t=>{let n=!1;const r=e.map(e=>{const r=sn(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():sn(e[t],null)}}}}(...e),e)}class on extends g.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=function(e){return"object"==typeof(t=e)&&null!==t&&"offsetHeight"in e;var t}(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ln({children:e,isPresent:t,anchorX:n,root:r}){const i=g.useId(),s=g.useRef(null),a=g.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=g.useContext(rn),l=an(s,null==e?void 0:e.ref);return g.useInsertionEffect(()=>{const{width:e,height:l,top:c,left:u,right:d}=a.current;if(t||!s.current||!e||!l)return;const h="left"===n?`left: ${u}`:`right: ${d}`;s.current.dataset.motionPopId=i;const f=document.createElement("style");o&&(f.nonce=o);const p=r??document.head;return p.appendChild(f),f.sheet&&f.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${l}px !important;\n            ${h}px !important;\n            top: ${c}px !important;\n          }\n        `),()=>{p.contains(f)&&p.removeChild(f)}},[t]),m.jsx(on,{isPresent:t,childRef:s,sizeRef:a,children:g.cloneElement(e,{ref:l})})}const cn=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:o,root:l})=>{const c=en(un),u=g.useId();let d=!0,h=g.useMemo(()=>(d=!1,{id:u,initial:t,isPresent:n,custom:i,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;r&&r()},register:e=>(c.set(e,!1),()=>c.delete(e))}),[n,c,r]);return s&&d&&(h={...h}),g.useMemo(()=>{c.forEach((e,t)=>c.set(t,!1))},[n]),g.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),"popLayout"===a&&(e=m.jsx(ln,{isPresent:n,anchorX:o,root:l,children:e})),m.jsx(nn.Provider,{value:h,children:e})};function un(){return new Map}const dn=e=>e.key||"";function hn(e){const t=[];return g.Children.forEach(e,e=>{g.isValidElement(e)&&t.push(e)}),t}const fn=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:o="left",root:l})=>{const[c,u]=function(e=!0){const t=g.useContext(nn);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=g.useId();g.useEffect(()=>{if(e)return i(s)},[e]);const a=g.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}(a),d=g.useMemo(()=>hn(e),[e]),h=a&&!c?[]:d.map(dn),f=g.useRef(!0),p=g.useRef(d),y=en(()=>new Map),[v,_]=g.useState(d),[b,w]=g.useState(d);tn(()=>{f.current=!1,p.current=d;for(let e=0;e<b.length;e++){const t=dn(b[e]);h.includes(t)?y.delete(t):!0!==y.get(t)&&y.set(t,!1)}},[b,h.length,h.join("-")]);const x=[];if(d!==v){let e=[...d];for(let t=0;t<b.length;t++){const n=b[t],r=dn(n);h.includes(r)||(e.splice(t,0,n),x.push(n))}return"wait"===s&&x.length&&(e=x),w(hn(e)),_(d),null}const{forceRender:S}=g.useContext(Zt);return m.jsx(m.Fragment,{children:b.map(e=>{const g=dn(e),v=!(a&&!c)&&(d===b||h.includes(g));return m.jsx(cn,{isPresent:v,initial:!(f.current&&!n)&&void 0,custom:t,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:v?void 0:()=>{if(!y.has(g))return;y.set(g,!0);let e=!0;y.forEach(t=>{t||(e=!1)}),e&&(null==S||S(),w(p.current),a&&(null==u||u()),r&&r())},anchorX:o,children:e},g)})})};var pn,mn;const gn=i(function(){if(mn)return pn;mn=1;var e="undefined"!=typeof Element,t="function"==typeof Map,n="function"==typeof Set,r="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(s,a){if(s===a)return!0;if(s&&a&&"object"==typeof s&&"object"==typeof a){if(s.constructor!==a.constructor)return!1;var o,l,c,u;if(Array.isArray(s)){if((o=s.length)!=a.length)return!1;for(l=o;0!==l--;)if(!i(s[l],a[l]))return!1;return!0}if(t&&s instanceof Map&&a instanceof Map){if(s.size!==a.size)return!1;for(u=s.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=s.entries();!(l=u.next()).done;)if(!i(l.value[1],a.get(l.value[0])))return!1;return!0}if(n&&s instanceof Set&&a instanceof Set){if(s.size!==a.size)return!1;for(u=s.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(a)){if((o=s.length)!=a.length)return!1;for(l=o;0!==l--;)if(s[l]!==a[l])return!1;return!0}if(s.constructor===RegExp)return s.source===a.source&&s.flags===a.flags;if(s.valueOf!==Object.prototype.valueOf&&"function"==typeof s.valueOf&&"function"==typeof a.valueOf)return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString&&"function"==typeof s.toString&&"function"==typeof a.toString)return s.toString()===a.toString();if((o=(c=Object.keys(s)).length)!==Object.keys(a).length)return!1;for(l=o;0!==l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(e&&s instanceof Element)return!1;for(l=o;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!s.$$typeof)&&!i(s[c[l]],a[c[l]]))return!1;return!0}return s!=s&&a!=a}return pn=function(e,t){try{return i(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}}());var yn,vn;var _n=vn?yn:(vn=1,yn=function(e,t,n,r,i,s,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,a,o],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}});const bn=i(_n);var wn,xn;const Sn=i(xn?wn:(xn=1,wn=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var c=s[l];if(!o(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0}));var Cn=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Cn||{}),kn={rel:["amphtml","canonical","alternate"]},En={type:["application/ld+json"]},Tn={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},Nn=Object.values(Cn),In={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},jn=Object.entries(In).reduce((e,[t,n])=>(e[n]=t,e),{}),An="data-rh",Pn="defaultTitle",On="defer",Dn="encodeSpecialCharacters",Rn="onChangeClientState",Ln="titleTemplate",Mn="prioritizeSeoTags",Fn=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},zn=e=>{let t=Fn(e,"title");const n=Fn(e,Ln);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,()=>t);const r=Fn(e,Pn);return t||r||void 0},Un=e=>Fn(e,Rn)||(()=>{}),Bn=(e,t)=>t.filter(t=>void 0!==t[e]).map(t=>t[e]).reduce((e,t)=>({...e,...t}),{}),$n=(e,t)=>t.filter(e=>void 0!==e.base).map(e=>e.base).reverse().reduce((t,n)=>{if(!t.length){const r=Object.keys(n);for(let i=0;i<r.length;i+=1){const s=r[i].toLowerCase();if(-1!==e.indexOf(s)&&n[s])return t.concat(n)}}return t},[]),Vn=(e,t,n)=>{const r={};return n.filter(t=>{return!!Array.isArray(t[e])||(void 0!==t[e]&&(n=`Helmet: ${e} should be of type "Array". Instead found type "${typeof t[e]}"`,console&&"function"==typeof console.warn&&console.warn(n)),!1);var n}).map(t=>t[e]).reverse().reduce((e,n)=>{const i={};n.filter(e=>{let n;const s=Object.keys(e);for(let r=0;r<s.length;r+=1){const i=s[r],a=i.toLowerCase();-1===t.indexOf(a)||"rel"===n&&"canonical"===e[n].toLowerCase()||"rel"===a&&"stylesheet"===e[a].toLowerCase()||(n=a),-1===t.indexOf(i)||"innerHTML"!==i&&"cssText"!==i&&"itemprop"!==i||(n=i)}if(!n||!e[n])return!1;const a=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][a]&&(i[n][a]=!0,!0)}).reverse().forEach(t=>e.push(t));const s=Object.keys(i);for(let t=0;t<s.length;t+=1){const e=s[t],n={...r[e],...i[e]};r[e]=n}return e},[]).reverse()},qn=(e,t)=>{if(Array.isArray(e)&&e.length)for(let n=0;n<e.length;n+=1){if(e[n][t])return!0}return!1},Hn=e=>Array.isArray(e)?e.join(""):e,Wn=(e,t)=>Array.isArray(e)?e.reduce((e,n)=>(((e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1})(n,t)?e.priority.push(n):e.default.push(n),e),{priority:[],default:[]}):{default:e,priority:[]},Gn=(e,t)=>({...e,[t]:void 0}),Kn=["noscript","script","style"],Qn=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Yn=e=>Object.keys(e).reduce((t,n)=>{const r=void 0!==e[n]?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${r}`:r},""),Xn=(e,t={})=>Object.keys(e).reduce((t,n)=>(t[In[n]||n]=e[n],t),t),Jn=(e,t)=>t.map((t,n)=>{const r={key:n,[An]:!0};return Object.keys(t).forEach(e=>{const n=In[e]||e;if("innerHTML"===n||"cssText"===n){const e=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:e}}else r[n]=t[e]}),y.createElement(e,r)}),Zn=(e,t,n=!0)=>{switch(e){case"title":return{toComponent:()=>((e,t,n)=>{const r=Xn(n,{key:t,[An]:!0});return[y.createElement("title",r,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,n,r)=>{const i=Yn(n),s=Hn(t);return i?`<${e} ${An}="true" ${i}>${Qn(s,r)}</${e}>`:`<${e} ${An}="true">${Qn(s,r)}</${e}>`})(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Xn(t),toString:()=>Yn(t)};default:return{toComponent:()=>Jn(e,t),toString:()=>((e,t,n=!0)=>t.reduce((t,r)=>{const i=r,s=Object.keys(i).filter(e=>!("innerHTML"===e||"cssText"===e)).reduce((e,t)=>{const r=void 0===i[t]?t:`${t}="${Qn(i[t],n)}"`;return e?`${e} ${r}`:r},""),a=i.innerHTML||i.cssText||"",o=-1===Kn.indexOf(e);return`${t}<${e} ${An}="true" ${s}${o?"/>":`>${a}</${e}>`}`},""))(e,t,n)}}},er=e=>{const{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:i,noscriptTags:s,styleTags:a,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:u,metaTags:d,scriptTags:h}=e,f={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:f,linkTags:u,metaTags:d,scriptTags:h}=(({metaTags:e,linkTags:t,scriptTags:n,encode:r})=>{const i=Wn(e,Tn),s=Wn(t,kn),a=Wn(n,En);return{priorityMethods:{toComponent:()=>[...Jn("meta",i.priority),...Jn("link",s.priority),...Jn("script",a.priority)],toString:()=>`${Zn("meta",i.priority,r)} ${Zn("link",s.priority,r)} ${Zn("script",a.priority,r)}`},metaTags:i.default,linkTags:s.default,scriptTags:a.default}})(e)),{priority:f,base:Zn("base",t,r),bodyAttributes:Zn("bodyAttributes",n,r),htmlAttributes:Zn("htmlAttributes",i,r),link:Zn("link",u,r),meta:Zn("meta",d,r),noscript:Zn("noscript",s,r),script:Zn("script",h,r),style:Zn("style",a,r),title:Zn("title",{title:o,titleAttributes:l},r)}},tr=[],nr=!("undefined"==typeof window||!window.document||!window.document.createElement),rr=class{constructor(e,t){r(this,"instances",[]),r(this,"canUseDOM",nr),r(this,"context"),r(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?tr:this.instances,add:e=>{(this.canUseDOM?tr:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?tr:this.instances).indexOf(e);(this.canUseDOM?tr:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=er({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},ir=y.createContext({}),sr=(e=class extends g.Component{constructor(t){super(t),r(this,"helmetData"),this.helmetData=new rr(this.props.context||{},e.canUseDOM)}render(){return y.createElement(ir.Provider,{value:this.helmetData.value},this.props.children)}},r(e,"canUseDOM",nr),e),ar=(e,t)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${e}[${An}]`),i=[].slice.call(r),s=[];let a;return t&&t.length&&t.forEach(t=>{const n=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)n.innerHTML=t.innerHTML;else if("cssText"===e)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{const r=e,i=void 0===t[r]?"":t[r];n.setAttribute(e,i)}n.setAttribute(An,"true"),i.some((e,t)=>(a=t,n.isEqualNode(e)))?i.splice(a,1):s.push(n)}),i.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),s.forEach(e=>n.appendChild(e)),{oldTags:i,newTags:s}},or=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const r=n.getAttribute(An),i=r?r.split(","):[],s=[...i],a=Object.keys(t);for(const o of a){const e=t[o]||"";n.getAttribute(o)!==e&&n.setAttribute(o,e),-1===i.indexOf(o)&&i.push(o);const r=s.indexOf(o);-1!==r&&s.splice(r,1)}for(let o=s.length-1;o>=0;o-=1)n.removeAttribute(s[o]);i.length===s.length?n.removeAttribute(An):n.getAttribute(An)!==a.join(",")&&n.setAttribute(An,a.join(","))},lr=(e,t)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:i,linkTags:s,metaTags:a,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:u,title:d,titleAttributes:h}=e;or("body",r),or("html",i),((e,t)=>{void 0!==e&&document.title!==e&&(document.title=Hn(e)),or("title",t)})(d,h);const f={baseTag:ar("base",n),linkTags:ar("link",s),metaTags:ar("meta",a),noscriptTags:ar("noscript",o),scriptTags:ar("script",c),styleTags:ar("style",u)},p={},m={};Object.keys(f).forEach(e=>{const{newTags:t,oldTags:n}=f[e];t.length&&(p[e]=t),n.length&&(m[e]=f[e].oldTags)}),t&&t(),l(e,p,m)},cr=null,ur=e=>{cr&&cancelAnimationFrame(cr),e.defer?cr=requestAnimationFrame(()=>{lr(e,()=>{cr=null})}):(lr(e),cr=null)},dr=class extends g.Component{constructor(){super(...arguments),r(this,"rendered",!1)}shouldComponentUpdate(e){return!Sn(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let n=null;const r=(i=e.get().map(e=>{const t={...e.props};return delete t.context,t}),{baseTag:$n(["href"],i),bodyAttributes:Bn("bodyAttributes",i),defer:Fn(i,On),encode:Fn(i,Dn),htmlAttributes:Bn("htmlAttributes",i),linkTags:Vn("link",["rel","href"],i),metaTags:Vn("meta",["name","charset","http-equiv","property","itemprop"],i),noscriptTags:Vn("noscript",["innerHTML"],i),onChangeClientState:Un(i),scriptTags:Vn("script",["src","innerHTML"],i),styleTags:Vn("style",["cssText"],i),title:zn(i),titleAttributes:Bn("titleAttributes",i),prioritizeSeoTags:qn(i,Mn)});var i;sr.canUseDOM?ur(r):er&&(n=er(r)),t(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},hr=(t=class extends g.Component{shouldComponentUpdate(e){return!gn(Gn(this.props,"helmetData"),Gn(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach(t=>{n={...n,[t]:e[t]}}),n}warnOnInvalidChildren(e,t){return bn(Nn.some(t=>e.type===t),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Nn.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),bn(!t||"string"==typeof t||Array.isArray(t)&&!t.some(e=>"string"!=typeof e),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return y.Children.forEach(e,e=>{if(!e||!e.props)return;const{children:r,...i}=e.props,s=Object.keys(i).reduce((e,t)=>(e[jn[t]||t]=i[t],e),{});let{type:a}=e;switch("symbol"==typeof a?a=a.toString():this.warnOnInvalidChildren(e,r),a){case"Symbol(react.fragment)":t=this.mapChildrenToProps(r,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(e,n,s,r);break;default:t=this.mapObjectTypeChildren(e,t,s,r)}}),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:r}=t;if(e&&(n=this.mapChildrenToProps(e,n)),r&&!(r instanceof rr)){r=new rr(r.context,!0),delete n.helmetData}return r?y.createElement(dr,{...n,context:r.value}):y.createElement(ir.Consumer,null,e=>y.createElement(dr,{...n,context:e}))}},r(t,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),t);async function fr(e,t={}){const{maxWidth:n=1200,maxHeight:r=1200,quality:i=.7,format:s="jpeg"}=t;return e&&"string"==typeof e&&(e.includes("firebasestorage.googleapis.com")||e.startsWith("data:")||e.startsWith("blob:"))?e:new Promise((t,a)=>{const o=new Image;o.onload=()=>{try{let e=o.width,a=o.height;e>n&&(a=a*n/e,e=n),a>r&&(e=e*r/a,a=r);const l=document.createElement("canvas");l.width=e,l.height=a;let c;switch(l.getContext("2d").drawImage(o,0,0,e,a),s.toLowerCase()){case"png":c="image/png";break;case"webp":c="image/webp";break;default:c="image/jpeg"}const u=l.toDataURL(c,i);t(u)}catch(a){console.error("Error compressing image:",a),t(e)}},o.onerror=()=>{console.error(`Failed to load image for compression: ${e}`),t(e)},o.crossOrigin="anonymous",o.src=e})}const pr=async(e,t=10)=>{if(!e)return"/images/placeholder.jpg";try{return await async function(e,t=20,n=20){try{return e&&"string"==typeof e&&(e.includes("firebasestorage.googleapis.com")||e.startsWith("data:")||e.startsWith("blob:"))?null:await fr(e,{maxWidth:t,maxHeight:n,quality:.5})}catch(r){return console.error("Error creating placeholder:",r),null}}(e,t,t)||"/images/placeholder.jpg"}catch(n){return console.error("Error creating tiny placeholder:",n),"/images/placeholder.jpg"}},mr=async e=>{try{const t=await caches.open("image-cache");return!!(await t.match(e))}catch(t){return console.error("Error checking image cache:",t),!1}};function gr(){return"serviceWorker"in navigator?navigator.serviceWorker.register("/service-worker.js").then(e=>(console.log("Service Worker registered with scope:",e.scope),e)).catch(e=>(console.error("Service Worker registration failed:",e),null)):Promise.resolve(null)}const yr=g.createContext({cachedImages:new Set,addToCache:()=>{},isCached:()=>!1,preloadImages:()=>{}}),vr=()=>g.useContext(yr),_r=({children:e})=>{const[t,n]=g.useState(new Set),[r,i]=g.useState(!1);g.useEffect(()=>{gr().then(e=>{e&&i(!0)})},[]),g.useEffect(()=>{const e=()=>{try{const e=localStorage.getItem("imageCacheRegistry");e&&n(new Set(JSON.parse(e)))}catch(e){console.error("Failed to load image cache from localStorage:",e)}};e();const t=t=>{"imageCacheRegistry"===t.key&&e()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]),g.useEffect(()=>{try{localStorage.setItem("imageCacheRegistry",JSON.stringify([...t]))}catch(e){console.error("Failed to save image cache to localStorage:",e)}},[t]);const s=async e=>{var i;if(e&&!t.has(e))try{await mr(e)||await(async e=>{try{const t=await caches.open("image-cache"),n=await fetch(e,{cache:"no-store"});await t.put(e,n)}catch(t){console.error("Error caching image:",t)}})(e),r&&await(i=[e],i&&Array.isArray(i)&&0!==i.length&&"serviceWorker"in navigator&&navigator.serviceWorker.controller?(navigator.serviceWorker.controller.postMessage({type:"CACHE_IMAGES",images:i}),Promise.resolve(!0)):Promise.resolve(!1)),n(t=>{const n=new Set(t);return n.add(e),n})}catch(s){console.error(`Failed to cache image: ${e}`,s)}},a={cachedImages:t,addToCache:s,isCached:e=>t.has(e),preloadImages:async e=>{if(!e||!e.length)return;const n=e.filter(e=>!t.has(e));for(let t=0;t<n.length;t+=5){const e=n.slice(t,t+5);await Promise.allSettled(e.map(e=>s(e)))}}};return m.jsx(yr.Provider,{value:a,children:e})};var br,wr,xr={exports:{}},Sr={};var Cr=(wr||(wr=1,xr.exports=function(){if(br)return Sr;br=1;var e=p(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,s=e.useMemo,a=e.useDebugValue;return Sr.useSyncExternalStoreWithSelector=function(e,o,l,c,u){var d=r(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=s(function(){function e(e){if(!i){if(i=!0,n=e,e=c(e),void 0!==u&&h.hasValue){var s=h.value;if(u(s,e))return r=s}return r=e}if(s=r,t(n,e))return s;var a=c(e);return void 0!==u&&u(s,a)?(n=e,s):(n=e,r=a)}var n,r,i=!1,s=void 0===l?null:l;return[function(){return e(o())},null===s?void 0:function(){return e(s())}]},[o,l,c,u]);var f=n(e,d[0],d[1]);return i(function(){h.hasValue=!0,h.value=f},[f]),a(f),f},Sr}()),xr.exports);var kr={notify(){},get:()=>[]};var Er=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),Tr=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Nr=(()=>Er||Tr?g.useLayoutEffect:g.useEffect)(),Ir=Symbol.for("react-redux-context"),jr="undefined"!=typeof globalThis?globalThis:{};function Ar(){if(!g.createContext)return{};const e=jr[Ir]??(jr[Ir]=new Map);let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var Pr=Ar();var Or=function(e){const{children:t,context:n,serverState:r,store:i}=e,s=g.useMemo(()=>{const e=function(e){let t,n=kr,r=0,i=!1;function s(){l.onStateChange&&l.onStateChange()}function a(){r++,t||(t=e.subscribe(s),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function o(){r--,t&&0===r&&(t(),t=void 0,n.clear(),n=kr)}const l={addNestedSub:function(e){a();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),o())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:s,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,a())},tryUnsubscribe:function(){i&&(i=!1,o())},getListeners:()=>n};return l}(i);return{store:i,subscription:e,getServerState:r?()=>r:void 0}},[i,r]),a=g.useMemo(()=>i.getState(),[i]);Nr(()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[s,a]);const o=n||Pr;return g.createElement(o.Provider,{value:s},t)};function Dr(e=Pr){return function(){return g.useContext(e)}}var Rr=Dr();function Lr(e=Pr){const t=e===Pr?Rr:Dr(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var Mr=Lr();function Fr(e=Pr){const t=e===Pr?Mr:Lr(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var zr=Fr(),Ur=(e,t)=>e===t;function Br(e=Pr){const t=e===Pr?Rr:Dr(e),n=(e,n={})=>{const{equalityFn:r=Ur}="function"==typeof n?{equalityFn:n}:n,i=t(),{store:s,subscription:a,getServerState:o}=i;g.useRef(!0);const l=g.useCallback({[e.name]:t=>e(t)}[e.name],[e]),c=Cr.useSyncExternalStoreWithSelector(a.addNestedSub,s.getState,o||s.getState,l,r);return g.useDebugValue(c),c};return Object.assign(n,{withTypes:()=>n}),n}var $r=Br();function Vr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var qr=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),Hr=()=>Math.random().toString(36).substring(7).split("").join("."),Wr={INIT:`@@redux/INIT${Hr()}`,REPLACE:`@@redux/REPLACE${Hr()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Hr()}`};function Gr(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Kr(e,t,n){if("function"!=typeof e)throw new Error(Vr(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Vr(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Vr(1));return n(Kr)(e,t)}let r=e,i=t,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((e,t)=>{a.set(t,e)}))}function u(){if(l)throw new Error(Vr(3));return i}function d(e){if("function"!=typeof e)throw new Error(Vr(4));if(l)throw new Error(Vr(5));let t=!0;c();const n=o++;return a.set(n,e),function(){if(t){if(l)throw new Error(Vr(6));t=!1,c(),a.delete(n),s=null}}}function h(e){if(!Gr(e))throw new Error(Vr(7));if(void 0===e.type)throw new Error(Vr(8));if("string"!=typeof e.type)throw new Error(Vr(17));if(l)throw new Error(Vr(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=a).forEach(e=>{e()}),e}h({type:Wr.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Vr(10));r=e,h({type:Wr.REPLACE})},[qr]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(Vr(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[qr](){return this}}}}}function Qr(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const r=t[s];"function"==typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:Wr.INIT}))throw new Error(Vr(12));if(void 0===n(void 0,{type:Wr.PROBE_UNKNOWN_ACTION()}))throw new Error(Vr(13))})}(n)}catch(XD){i=XD}return function(e={},t){if(i)throw i;let s=!1;const a={};for(let i=0;i<r.length;i++){const o=r[i],l=n[o],c=e[o],u=l(c,t);if(void 0===u)throw t&&t.type,new Error(Vr(14));a[o]=u,s=s||u!==c}return s=s||r.length!==Object.keys(e).length,s?a:e}}function Yr(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}var Xr=Symbol.for("immer-nothing"),Jr=Symbol.for("immer-draftable"),Zr=Symbol.for("immer-state");function ei(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ti=Object.getPrototypeOf;function ni(e){return!!e&&!!e[Zr]}function ri(e){var t;return!!e&&(ai(e)||Array.isArray(e)||!!e[Jr]||!!(null==(t=e.constructor)?void 0:t[Jr])||di(e)||hi(e))}var ii=Object.prototype.constructor.toString(),si=new WeakMap;function ai(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if("function"!=typeof n)return!1;let r=si.get(n);return void 0===r&&(r=Function.toString.call(n),si.set(n,r)),r===ii}function oi(e,t,n=!0){if(0===li(e)){(n?Reflect.ownKeys(e):Object.keys(e)).forEach(n=>{t(n,e[n],e)})}else e.forEach((n,r)=>t(r,n,e))}function li(e){const t=e[Zr];return t?t.type_:Array.isArray(e)?1:di(e)?2:hi(e)?3:0}function ci(e,t){return 2===li(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ui(e,t,n){const r=li(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function di(e){return e instanceof Map}function hi(e){return e instanceof Set}function fi(e){return e.copy_||e.base_}function pi(e,t){if(di(e))return new Map(e);if(hi(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ai(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Zr];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(ti(e),t)}{const t=ti(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function mi(e,t=!1){return yi(e)||ni(e)||!ri(e)||(li(e)>1&&Object.defineProperties(e,{set:gi,add:gi,clear:gi,delete:gi}),Object.freeze(e),t&&Object.values(e).forEach(e=>mi(e,!0))),e}var gi={value:function(){ei(2)}};function yi(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var vi,_i={};function bi(e){const t=_i[e];return t||ei(0),t}function wi(){return vi}function xi(e,t){t&&(bi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Si(e){Ci(e),e.drafts_.forEach(Ei),e.drafts_=null}function Ci(e){e===vi&&(vi=e.parent_)}function ki(e){return vi={drafts_:[],parent_:vi,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ei(e){const t=e[Zr];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Ti(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Zr].modified_&&(Si(t),ei(4)),ri(e)&&(e=Ni(t,e),t.parent_||ji(t,e)),t.patches_&&bi("Patches").generateReplacementPatches_(n[Zr].base_,e,t.patches_,t.inversePatches_)):e=Ni(t,n,[]),Si(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Xr?e:void 0}function Ni(e,t,n){if(yi(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[Zr];if(!i)return oi(t,(r,s)=>Ii(e,i,t,r,s,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return ji(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const t=i.copy_;let s=t,a=!1;3===i.type_&&(s=new Set(t),t.clear(),a=!0),oi(s,(r,s)=>Ii(e,i,t,r,s,n,a),r),ji(e,t,!1),n&&e.patches_&&bi("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function Ii(e,t,n,r,i,s,a){if(null==i)return;if("object"!=typeof i&&!a)return;const o=yi(i);if(!o||a){if(ni(i)){const a=Ni(e,i,s&&t&&3!==t.type_&&!ci(t.assigned_,r)?s.concat(r):void 0);if(ui(n,r,a),!ni(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(ri(i)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[r]===i&&o)return;Ni(e,i),t&&t.scope_.parent_||"symbol"==typeof r||!(di(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))||ji(e,i)}}}function ji(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mi(t,n)}var Ai={get(e,t){if(t===Zr)return e;const n=fi(e);if(!ci(n,t))return function(e,t,n){var r;const i=Di(t,n);return i?"value"in i?i.value:null==(r=i.get)?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!ri(r)?r:r===Oi(e.base_,t)?(Li(e),e.copy_[t]=Mi(r,e)):r},has:(e,t)=>t in fi(e),ownKeys:e=>Reflect.ownKeys(fi(e)),set(e,t,n){const r=Di(fi(e),t);if(null==r?void 0:r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Oi(fi(e),t),a=null==r?void 0:r[Zr];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((i=n)===(s=r)?0!==i||1/i==1/s:i!=i&&s!=s)&&(void 0!==n||ci(e.base_,t)))return!0;Li(e),Ri(e)}var i,s;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Oi(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Li(e),Ri(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=fi(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){ei(11)},getPrototypeOf:e=>ti(e.base_),setPrototypeOf(){ei(12)}},Pi={};function Oi(e,t){const n=e[Zr];return(n?fi(n):e)[t]}function Di(e,t){if(!(t in e))return;let n=ti(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=ti(n)}}function Ri(e){e.modified_||(e.modified_=!0,e.parent_&&Ri(e.parent_))}function Li(e){e.copy_||(e.copy_=pi(e.base_,e.scope_.immer_.useStrictShallowCopy_))}oi(Ai,(e,t)=>{Pi[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Pi.deleteProperty=function(e,t){return Pi.set.call(this,e,t,void 0)},Pi.set=function(e,t,n){return Ai.set.call(this,e[0],t,n,e[0])};function Mi(e,t){const n=di(e)?bi("MapSet").proxyMap_(e,t):hi(e)?bi("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:wi(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Ai;n&&(i=[r],s=Pi);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}(e,t);return(t?t.scope_:wi()).drafts_.push(n),n}function Fi(e){if(!ri(e)||yi(e))return e;const t=e[Zr];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=pi(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=pi(e,!0);return oi(n,(e,t)=>{ui(n,e,Fi(t))},r),t&&(t.finalized_=!1),n}var zi=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...i){return r.produce(e,e=>t.call(this,e,...i))}}let r;if("function"!=typeof t&&ei(6),void 0!==n&&"function"!=typeof n&&ei(7),ri(e)){const i=ki(this),s=Mi(e,void 0);let a=!0;try{r=t(s),a=!1}finally{a?Si(i):Ci(i)}return xi(i,n),Ti(r,i)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===Xr&&(r=void 0),this.autoFreeze_&&mi(r,!0),n){const t=[],i=[];bi("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}ei(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,r;return[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof(null==e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ri(e)||ei(8),ni(e)&&(e=function(e){ni(e)||ei(10);return Fi(e)}(e));const t=ki(this),n=Mi(e,void 0);return n[Zr].isManual_=!0,Ci(t),n}finishDraft(e,t){const n=e&&e[Zr];n&&n.isManual_||ei(9);const{scope_:r}=n;return xi(r,t),Ti(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=bi("Patches").applyPatches_;return ni(e)?r(e,t):this.produce(e,e=>r(e,t))}},Ui=zi.produce;function Bi(e){return({dispatch:t,getState:n})=>r=>i=>"function"==typeof i?i(t,n,e):r(i)}var $i=Bi(),Vi=Bi,qi="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Yr:Yr.apply(null,arguments)};function Hi(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(hs(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return Gr(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}var Wi=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Gi(e){return ri(e)?Ui(e,()=>{}):e}function Ki(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var Qi=e=>t=>{setTimeout(t,e)},Yi=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new Wi(e);return n&&r.push(((e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,a=!1;const o=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Qi(10):"callback"===e.type?e.queueNotification:Qi(e.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){const t=r.subscribe(()=>i&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t.RTK_autoBatch),s=!i,s&&(a||(a=!0,l(c))),r.dispatch(e)}finally{i=!0}}})})("object"==typeof n?n:void 0)),r};function Xi(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"==typeof e?e:e.type;if(!r)throw new Error(hs(28));if(r in t)throw new Error(hs(29));return t[r]=n,i},addAsyncThunk:(e,r)=>(r.pending&&(t[e.pending.type]=r.pending),r.rejected&&(t[e.rejected.type]=r.rejected),r.fulfilled&&(t[e.fulfilled.type]=r.fulfilled),r.settled&&n.push({matcher:e.settled,reducer:r.settled}),i),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}function Ji(...e){return t=>e.some(e=>((e,t)=>{return(n=e)&&"function"==typeof n.match?e.match(t):e(t);var n})(e,t))}var Zi=["name","message","stack","code"],es=class{constructor(e,t){r(this,"_type"),this.payload=e,this.meta=t}},ts=class{constructor(e,t){r(this,"_type"),this.payload=e,this.meta=t}},ns=e=>{if("object"==typeof e&&null!==e){const t={};for(const n of Zi)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},rs="External signal was aborted",is=(()=>{function e(e,t,n){const r=Hi(e+"/fulfilled",(e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}})),i=Hi(e+"/pending",(e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}})),s=Hi(e+"/rejected",(e,t,r,i,s)=>({payload:i,error:(n&&n.serializeError||ns)(e||"Rejected"),meta:{...s||{},arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)}}));return Object.assign(function(e,{signal:a}={}){return(o,l,c)=>{const u=(null==n?void 0:n.idGenerator)?n.idGenerator(e):((e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),d=new AbortController;let h,f;function p(e){f=e,d.abort()}a&&(a.aborted?p(rs):a.addEventListener("abort",()=>p(rs),{once:!0}));const m=async function(){var a,m;let g;try{let s=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:l,extra:c});if(null!==(y=s)&&"object"==typeof y&&"function"==typeof y.then&&(s=await s),!1===s||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const v=new Promise((e,t)=>{h=()=>{t({name:"AbortError",message:f||"Aborted"})},d.signal.addEventListener("abort",h)});o(i(u,e,null==(m=null==n?void 0:n.getPendingMeta)?void 0:m.call(n,{requestId:u,arg:e},{getState:l,extra:c}))),g=await Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:l,extra:c,requestId:u,signal:d.signal,abort:p,rejectWithValue:(e,t)=>new es(e,t),fulfillWithValue:(e,t)=>new ts(e,t)})).then(t=>{if(t instanceof es)throw t;return t instanceof ts?r(t.payload,u,e,t.meta):r(t,u,e)})])}catch(v){g=v instanceof es?s(null,u,e,v.payload,v.meta):s(v,u,e)}finally{h&&d.signal.removeEventListener("abort",h)}var y;return n&&!n.dispatchConditionRejection&&s.match(g)&&g.meta.condition||o(g),g}();return Object.assign(m,{abort:p,requestId:u,arg:e,unwrap:()=>m.then(ss)})}},{pending:i,rejected:s,fulfilled:r,settled:Ji(s,r),typePrefix:e})}return e.withTypes=()=>e,e})();function ss(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var as=Symbol.for("rtk-slice-createasyncthunk");function os(e,t){return`${e}/${t}`}function ls({creators:e}={}){var t;const n=null==(t=null==e?void 0:e.asyncThunk)?void 0:t[as];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(hs(11));const i=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(hs(12));if(n in a.sliceCaseReducersByType)throw new Error(hs(13));return a.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(a.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],r]="function"==typeof e.extraReducers?Xi(e.extraReducers):[e.extraReducers],i={...t,...a.sliceCaseReducersByType};return function(e,t){let n,[r,i,s]=Xi(t);if("function"==typeof e)n=()=>Gi(e());else{const t=Gi(e);n=()=>t}function a(e=n(),t){let a=[r[t.type],...i.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===a.filter(e=>!!e).length&&(a=[s]),a.reduce((e,n)=>{if(n){if(ni(e)){const r=n(e,t);return void 0===r?e:r}if(ri(e))return Ui(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return a.getInitialState=n,a}(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}s.forEach(r=>{const s=i[r],a={reducerName:r,type:os(t,r),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function({type:e,reducerName:t,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(hs(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,a?Hi(e,a):Hi(e))}(a,s,o):function({type:e,reducerName:t},n,r,i){if(!i)throw new Error(hs(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=n,d=i(e,s,u);r.exposeAction(t,d),a&&r.addCase(d.fulfilled,a);o&&r.addCase(d.pending,o);l&&r.addCase(d.rejected,l);c&&r.addMatcher(d.settled,c);r.exposeCaseReducer(t,{fulfilled:a||ds,pending:o||ds,rejected:l||ds,settled:c||ds})}(a,s,o,n)});const c=e=>e,u=new Map,d=new WeakMap;let h;function f(e,t){return h||(h=l()),h(e,t)}function p(){return h||(h=l()),h.getInitialState()}function m(t,n=!1){function r(e){let i=e[t];return void 0===i&&n&&(i=Ki(d,r,p)),i}function i(t=c){const r=Ki(u,n,()=>new WeakMap);return Ki(r,t,()=>{const r={};for(const[i,s]of Object.entries(e.selectors??{}))r[i]=cs(s,t,()=>Ki(d,t,p),n);return r})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const g={name:t,reducer:f,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:p,...m(r),injectInto(e,{reducerPath:t,...n}={}){const i=t??r;return e.inject({reducerPath:i,reducer:f},n),{...g,...m(i,!0)}}};return g}}function cs(e,t,n,r){function i(i,...s){let a=t(i);return void 0===a&&r&&(a=n()),e(a,...s)}return i.unwrapped=e,i}var us=ls();function ds(){}function hs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fs={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ms={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ps(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new gs;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class gs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ys=function(e){return function(e){const t=ps(e);return ms.encodeByteArray(t,!0)}(e).replace(/\./g,"")},vs=function(e){try{return ms.decodeString(e,!0)}catch(XD){console.error("base64Decode failed: ",XD)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _s=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,bs=()=>{try{return _s()||(()=>{if("undefined"==typeof process)return;const e=fs.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(XD){return}const t=e&&vs(e[1]);return t&&JSON.parse(t)})()}catch(XD){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${XD}`)}},ws=e=>{var t,n;return null===(n=null===(t=bs())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},xs=()=>{var e;return null===(e=bs())||void 0===e?void 0:e.config},Ss=e=>{var t;return null===(t=bs())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Cs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Es(e){return(await fetch(e,{credentials:"include"})).ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts={};let Ns=!1;function Is(e,t){if("undefined"==typeof window||"undefined"==typeof document||!ks(window.location.host)||Ts[e]===t||Ts[e]||Ns)return;function n(e){return`__firebase__banner__${e}`}Ts[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ts))Ts[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Ns=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function As(){return!function(){var e;const t=null===(e=bs())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(XD){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Ps extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Os.prototype.create)}}class Os{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Ds,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new Ps(r,a,n)}}const Ds=/\{\$([^}]+)}/g;function Rs(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ls(n)&&Ls(s)){if(!Rs(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ls(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Fs(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function zs(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Us{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Bs),void 0===r.error&&(r.error=Bs),void 0===r.complete&&(r.complete=Bs);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(XD){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(XD){"undefined"!=typeof console&&console.error&&console.error(XD)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bs(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(e){return e&&e._delegate?e._delegate:e}class Vs{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Cs;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(XD){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(XD){if(r)return null;throw XD}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch(XD){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(XD){}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===qs?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ws{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hs(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gs,Ks;(Ks=Gs||(Gs={}))[Ks.DEBUG=0]="DEBUG",Ks[Ks.VERBOSE=1]="VERBOSE",Ks[Ks.INFO=2]="INFO",Ks[Ks.WARN=3]="WARN",Ks[Ks.ERROR=4]="ERROR",Ks[Ks.SILENT=5]="SILENT";const Qs={debug:Gs.DEBUG,verbose:Gs.VERBOSE,info:Gs.INFO,warn:Gs.WARN,error:Gs.ERROR,silent:Gs.SILENT},Ys=Gs.INFO,Xs={[Gs.DEBUG]:"log",[Gs.VERBOSE]:"log",[Gs.INFO]:"info",[Gs.WARN]:"warn",[Gs.ERROR]:"error"},Js=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=Xs[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Zs{constructor(e){this.name=e,this._logLevel=Ys,this._logHandler=Js,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gs))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Qs[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gs.DEBUG,...e),this._logHandler(this,Gs.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gs.VERBOSE,...e),this._logHandler(this,Gs.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gs.INFO,...e),this._logHandler(this,Gs.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gs.WARN,...e),this._logHandler(this,Gs.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gs.ERROR,...e),this._logHandler(this,Gs.ERROR,...e)}}let ea,ta;const na=new WeakMap,ra=new WeakMap,ia=new WeakMap,sa=new WeakMap,aa=new WeakMap;let oa={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ra.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ia.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ua(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function la(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ta||(ta=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(da(this),t),ua(na.get(this))}:function(...t){return ua(e.apply(da(this),t))}:function(t,...n){const r=e.call(da(this),t,...n);return ia.set(r,t.sort?t.sort():[t]),ua(r)}}function ca(e){return"function"==typeof e?la(e):(e instanceof IDBTransaction&&function(e){if(ra.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});ra.set(e,t)}(e),t=e,(ea||(ea=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,oa):e);var t}function ua(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ua(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&na.set(t,e)}).catch(()=>{}),aa.set(t,e),t}(e);if(sa.has(e))return sa.get(e);const t=ca(e);return t!==e&&(sa.set(e,t),aa.set(t,e)),t}const da=e=>aa.get(e);const ha=["get","getKey","getAll","getAllKeys","count"],fa=["put","add","delete","clear"],pa=new Map;function ma(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(pa.get(t))return pa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=fa.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ha.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return pa.set(t,s),s}oa=(e=>({...e,get:(t,n,r)=>ma(t,n)||e.get(t,n,r),has:(t,n)=>!!ma(t,n)||e.has(t,n)}))(oa);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ga{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const ya="@firebase/app",va="0.13.2",_a=new Zs("@firebase/app"),ba="@firebase/app-compat",wa="@firebase/analytics-compat",xa="@firebase/analytics",Sa="@firebase/app-check-compat",Ca="@firebase/app-check",ka="@firebase/auth",Ea="@firebase/auth-compat",Ta="@firebase/database",Na="@firebase/data-connect",Ia="@firebase/database-compat",ja="@firebase/functions",Aa="@firebase/functions-compat",Pa="@firebase/installations",Oa="@firebase/installations-compat",Da="@firebase/messaging",Ra="@firebase/messaging-compat",La="@firebase/performance",Ma="@firebase/performance-compat",Fa="@firebase/remote-config",za="@firebase/remote-config-compat",Ua="@firebase/storage",Ba="@firebase/storage-compat",$a="@firebase/firestore",Va="@firebase/ai",qa="@firebase/firestore-compat",Ha="firebase",Wa="[DEFAULT]",Ga={[ya]:"fire-core",[ba]:"fire-core-compat",[xa]:"fire-analytics",[wa]:"fire-analytics-compat",[Ca]:"fire-app-check",[Sa]:"fire-app-check-compat",[ka]:"fire-auth",[Ea]:"fire-auth-compat",[Ta]:"fire-rtdb",[Na]:"fire-data-connect",[Ia]:"fire-rtdb-compat",[ja]:"fire-fn",[Aa]:"fire-fn-compat",[Pa]:"fire-iid",[Oa]:"fire-iid-compat",[Da]:"fire-fcm",[Ra]:"fire-fcm-compat",[La]:"fire-perf",[Ma]:"fire-perf-compat",[Fa]:"fire-rc",[za]:"fire-rc-compat",[Ua]:"fire-gcs",[Ba]:"fire-gcs-compat",[$a]:"fire-fst",[qa]:"fire-fst-compat",[Va]:"fire-vertex","fire-js":"fire-js",[Ha]:"fire-js-all"},Ka=new Map,Qa=new Map,Ya=new Map;function Xa(e,t){try{e.container.addComponent(t)}catch(XD){_a.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,XD)}}function Ja(e){const t=e.name;if(Ya.has(t))return _a.debug(`There were multiple attempts to register component ${t}.`),!1;Ya.set(t,e);for(const n of Ka.values())Xa(n,e);for(const n of Qa.values())Xa(n,e);return!0}function Za(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function eo(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Os("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class no{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="11.10.0";function io(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:Wa,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!=typeof i||!i)throw to.create("bad-app-name",{appName:String(i)});if(n||(n=xs()),!n)throw to.create("no-options");const s=Ka.get(i);if(s){if(Rs(n,s.options)&&Rs(r,s.config))return s;throw to.create("duplicate-app",{appName:i})}const a=new Ws(i);for(const l of Ya.values())a.addComponent(l);const o=new no(n,r,a);return Ka.set(i,o),o}function so(e=Wa){const t=Ka.get(e);if(!t&&e===Wa&&xs())return io();if(!t)throw to.create("no-app",{appName:e});return t}function ao(e,t,n){var r;let i=null!==(r=Ga[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void _a.warn(e.join(" "))}Ja(new Vs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="firebase-heartbeat-store";let lo=null;function co(){return lo||(lo=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=ua(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ua(a.result),e.oldVersion,e.newVersion,ua(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(oo)}catch(XD){console.warn(XD)}}}).catch(e=>{throw to.create("idb-open",{originalErrorMessage:e.message})})),lo}async function uo(e,t){try{const n=(await co()).transaction(oo,"readwrite"),r=n.objectStore(oo);await r.put(t,ho(e)),await n.done}catch(XD){if(XD instanceof Ps)_a.warn(XD.message);else{const t=to.create("idb-set",{originalErrorMessage:null==XD?void 0:XD.message});_a.warn(t.message)}}}function ho(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mo(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=po();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(XD){_a.warn(XD)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=po(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),go(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),go(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ys(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(XD){return _a.warn(XD),""}}}function po(){return(new Date).toISOString().substring(0,10)}class mo{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(XD){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await co()).transaction(oo),n=await t.objectStore(oo).get(ho(e));return await t.done,n}catch(XD){if(XD instanceof Ps)_a.warn(XD.message);else{const t=to.create("idb-get",{originalErrorMessage:null==XD?void 0:XD.message});_a.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return uo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return uo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function go(e){return ys(JSON.stringify({version:2,heartbeats:e})).length}var yo;yo="",Ja(new Vs("platform-logger",e=>new ga(e),"PRIVATE")),Ja(new Vs("heartbeat",e=>new fo(e),"PRIVATE")),ao(ya,va,yo),ao(ya,va,"esm2017"),ao("fire-js","");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
ao("firebase","11.10.0","app");var vo,_o,bo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,_o=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},vo=r}).apply(void 0!==bo?bo:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var wo,xo,So,Co,ko,Eo,To,No,Io="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Io&&Io];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout(()=>{throw e},0)}function C(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new E,e=>e.reset());class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,N=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(A)}};var A=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(n){S(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}N=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function R(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&R.aa.h.call(this)}}d(R,O);var L={2:"touch",3:"pen",4:"mouse"};R.prototype.h=function(){R.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function z(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=V(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new z(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=Z(n),e&&e[M]?e.K(t,n,!!a(r)&&!!r.capture,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=X(e);if(l||(e[q]=l=new B(e)),n=l.add(t,n,r,o,s),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function G(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=Z(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=V(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,i)),(n=-1<e?t[e]:null)&&K(n))}function K(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])$(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=X(t))?($(n,e),0==n.h&&(n.src=null,t[q]=null)):U(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new R(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function X(e){return(e=e[q])instanceof B?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){P.call(this),this.i=new B(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;w(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ne(a,r,!0,t)&&i}if(i=ne(a=t.g=e,r,!0,t)&&i,i=ne(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ne(a=t.g=n[s],r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&$(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ee,P),ee.prototype[M]=!0,ee.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(e){P.call(this),this.h=e,this.g={}}d(ae,P);var oe=[];function le(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}ae.prototype.N=function(){ae.aa.N.call(this),le(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=i.JSON.stringify,ue=i.JSON.parse,de=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function he(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}he.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){O.call(this,"d")}function ye(){O.call(this,"c")}d(ge,O),d(ye,O);var ve={},_e=null;function be(){return _e=_e||new ee}function we(e){O.call(this,ve.La,e)}function xe(e){const t=be();te(t,new we(t))}function Se(e,t){O.call(this,ve.STAT_EVENT,e),this.stat=t}function Ce(e){const t=be();te(t,new Se(t,e))}function ke(e,t){O.call(this,ve.Ma,e),this.size=t}function Ee(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Te(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return ce(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}ve.La="serverreachability",d(we,O),ve.STAT_EVENT="statevent",d(Se,O),ve.Ma="timingevent",d(ke,O),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ie,je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(Pe,he),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Ie=new Pe;var Re={},Le={};function Me(e,t,n){e.L=1,e.v=ct(it(t)),e.m=n,e.P=!0,Fe(e,null)}function Fe(e,t){e.F=Date.now(),Be(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),xt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(oe[0]=i.toString()),i=oe);for(var s=0;s<i.length;s++){var a=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),xe(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ue(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Le:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?Le:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ee(c(e.ba,e),t)}function Ve(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||sn(e.j,e)}function He(e){Ve(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Xe(n.h,e)))if(!e.K&&Xe(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rn(n),Gt(n)}en(n),Ce(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ee(c(n.Za,n),6e3));if(1>=Ye(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else on(n,11)}else if((e.K||n.g==e)&&rn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=cn(r,r.J?r.ia:null,r.W),a.K){Ze(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(Ve(o),Be(o)),r.g=a}else Zt(r);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||on(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?on(n,7):Wt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}xe()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==$t(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=$t(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Vt(this.g)))){this.J||4!=h||7==t||xe(),Ve(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Vt(this.g);e="";var s=r.length,a=4==$t(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),qe(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),He(this),qe(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ue(this,o),e==Le){4==h&&(this.s=4,Ce(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Re){this.s=4,Ce(15),Ne(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),We(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),tn(d),d.M=!0,Ce(11))}}else Ne(this.i,this.l,o,"[Invalid Chunked Response]"),He(this),qe(this)}else Ne(this.i,this.l,o,null),We(this,o);4==h&&He(this),this.o&&!this.J&&(4==h?sn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=$t(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=x(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),He(this),qe(this)}}}catch(h){}},Oe.prototype.cancel=function(){this.J=!0,He(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(xe(),Ce(17)),He(this),this.s=2,qe(this)):$e(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ye(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ke.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,at(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ot(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,st(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),at(this,t[4]),this.l=ut(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function it(e){return new rt(e)}function st(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function at(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(bt(this,t),xt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=dt(t,gt)),e.i=new vt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dt(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(dt(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dt(n,"/"==n.charAt(0)?mt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",dt(n,yt)),e.join("")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,mt=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function bt(e,t){_t(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wt(e,t){return _t(e),t=St(e,t),e.g.has(t)}function xt(e,t,n){bt(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function kt(){this.g=new de}function Et(e,t,n){const r=n||"";try{tt(e,function(e,n){let i=e;a(e)&&(i=ce(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(XD){throw t.push(r+"type="+encodeURIComponent("_badmap")),XD}}function Tt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Nt(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function It(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function jt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,At(e)}function At(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Dt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){_t(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"==typeof e)wt(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,wt(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(Tt,he),Tt.prototype.g=function(){return new Nt(this.l,this.j)},Tt.prototype.i=function(e){return function(){return e}}({}),d(Nt,ee),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,At(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,At(this)),this.g&&(this.readyState=3,At(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;It(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jt(this):At(this),3==this.readyState&&It(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,jt(this))},e.Qa=function(e){this.g&&(this.response=e,jt(this))},e.ga=function(){this.g&&jt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Dt,ee);var Rt=/^https?$/i,Lt=["POST","PUT"];function Mt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ft(e),Ut(e)}function Ft(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function zt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=$t(e)||2!=e.Z()))if(e.u&&4==$t(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==$t(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(nt)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Rt.test(a?a.toLowerCase():"")}n=s}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<$t(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ft(e)}}finally{Ut(e)}}}function Ut(e,t){if(e.g){Bt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{n.onreadystatechange=r}catch(XD){}}}function Bt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function $t(e){return e.g?e.g.readyState:0}function Vt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ht(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Da=new kt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wt(e){if(Kt(e),3==e.G){var t=e.U++,n=it(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Xt(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=ct(it(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}ln(e)}function Gt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Kt(e){Gt(e),e.u&&(i.clearTimeout(e.u),e.u=null),rn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||j(),N||(T(),N=!0),I.add(t,e),e.B=0}}function Yt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),Xt(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Jt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Me(n,r,t)}function Xt(e,t){e.H&&v(e.H,function(e,n){lt(t,n,e)}),e.l&&tt({},function(e,n){lt(t,n,e)})}function Jt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Et(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||j(),N||(T(),N=!0),I.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ee(c(e.Fa,e),an(e,e.v)),e.v++,!0)}function tn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Xt(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(it(t)),n.m=null,n.P=!0,Fe(n,e)}function rn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){rn(e),tn(e),e.g=null;var r=2}else{if(!Xe(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(r=be(),new ke(r,n)),Qt(e)}else Zt(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ye(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ee(c(e.Ga,e,t),an(e,e.B)),e.B++,0)))}(e,t)||2==r&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:on(e,5);break;case 4:on(e,10);break;case 3:on(e,6);break;default:on(e,2)}}function an(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function on(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ct(r),t?function(e,t){const n=new Te;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),ln(e),Kt(e)}function ln(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function cn(e,t,n){var r=n instanceof rt?it(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),at(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new rt(null);r&&st(a,r),t&&(a.g=t),s&&at(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),Xt(e,r),r}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Dt(new Tt({eb:n})):new Dt(e.pa)).Ha(e.J),t}function dn(){}function hn(){}function fn(e,t){ee.call(this),this.g=new Ht(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gn(this)}function pn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mn(){ye.call(this),this.status=1}function gn(e){this.g=e}(e=Dt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?fe(this.o):fe(Ie),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Mt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Lt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Mt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Ut(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ut(this,!0)),Dt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Ht.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=cn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jt(this,i,t),lt(n=it(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Xt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Pt(s)))+"&"+t:this.m&&Ot(n,this.m,s)),Je(this.h,i),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),i.T=!0,Me(i,n,null)):Me(i,n,t),this.G=2}}else 3==this.G&&(e?Yt(this,e):0==this.i.length||Qe(this.h)||Yt(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ee(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Gt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Gt(this),en(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=dn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},hn.prototype.g=function(e,t){return new fn(e,t)},d(fn,ee),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Wt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Qt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,fn.aa.N.call(this)},d(pn,ge),d(mn,ye),d(gn,dn),gn.prototype.ua=function(){te(this.g,"a")},gn.prototype.ta=function(e){te(this.g,new pn(e))},gn.prototype.sa=function(e){te(this.g,new mn)},gn.prototype.ra=function(){te(this.g,"b")},hn.prototype.createWebChannel=hn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,No=function(){return new hn},To=function(){return be()},Eo=ve,ko={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Co=je,Ae.COMPLETE="complete",So=Ae,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,xo=pe,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,wo=Dt}).apply(void 0!==Io?Io:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const jo="@firebase/firestore",Ao="4.8.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Po.UNAUTHENTICATED=new Po(null),Po.GOOGLE_CREDENTIALS=new Po("google-credentials-uid"),Po.FIRST_PARTY=new Po("first-party-uid"),Po.MOCK_USER=new Po("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Oo="11.10.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Zs("@firebase/firestore");function Ro(){return Do.logLevel}function Lo(e,...t){if(Do.logLevel<=Gs.DEBUG){const n=t.map(zo);Do.debug(`Firestore (${Oo}): ${e}`,...n)}}function Mo(e,...t){if(Do.logLevel<=Gs.ERROR){const n=t.map(zo);Do.error(`Firestore (${Oo}): ${e}`,...n)}}function Fo(e,...t){if(Do.logLevel<=Gs.WARN){const n=t.map(zo);Do.warn(`Firestore (${Oo}): ${e}`,...n)}}function zo(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Bo(e,r,n)}function Bo(e,t,n){let r=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(i){r+=" CONTEXT: "+n}throw Mo(r),new Error(r)}function $o(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Bo(t,i,r)}function Vo(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ho extends Ps{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ko{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Po.UNAUTHENTICATED))}shutdown(){}}class Qo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yo{constructor(e){this.t=e,this.currentUser=Po.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$o(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wo,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Lo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Lo("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wo)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Lo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?($o("string"==typeof t.accessToken,31837,{l:t}),new Go(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $o(null===e||"string"==typeof e,2055,{h:e}),new Po(e)}}class Xo{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Po.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Jo{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Xo(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Po.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class el{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$o(void 0===this.o,3512);const n=e=>{null!=e.error&&Lo("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Lo("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Lo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Lo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zo(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?($o("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Zo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(){return new TextEncoder}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=tl(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function il(e,t){return e<t?-1:e>t?1:0}function sl(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return il(r,i);{const s=nl(),a=ol(s.encode(al(e,n)),s.encode(al(t,n)));return 0!==a?a:il(r,i)}}n+=r>65535?2:1}return il(e.length,t.length)}function al(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function ol(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return il(e[n],t[n]);return il(e.length,t.length)}function ll(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="__name__";class ul{constructor(e,t,n){void 0===t?t=0:t>e.length&&Uo(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Uo(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ul.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ul?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ul.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return il(e.length,t.length)}static compareSegments(e,t){const n=ul.isNumericId(e),r=ul.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ul.extractNumericId(e).compare(ul.extractNumericId(t)):sl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vo.fromString(e.substring(4,e.length-2))}}class dl extends ul{construct(e,t,n){return new dl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ho(qo.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new dl(t)}static emptyPath(){return new dl([])}}const hl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fl extends ul{construct(e,t,n){return new fl(e,t,n)}static isValidIdentifier(e){return hl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===cl}static keyField(){return new fl([cl])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ho(qo.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ho(qo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ho(qo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ho(qo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fl(t)}static emptyPath(){return new fl([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.path=e}static fromPath(e){return new pl(dl.fromString(e))}static fromName(e){return new pl(dl.fromString(e).popFirst(5))}static empty(){return new pl(dl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pl(new dl(e.slice()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(e,t,n){if(!n)throw new Ho(qo.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gl(e){if(!pl.isDocumentKey(e))throw new Ho(qo.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function yl(e){if(pl.isDocumentKey(e))throw new Ho(qo.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vl(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function _l(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Uo(12329,{type:typeof e})}function bl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ho(qo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_l(e);throw new Ho(qo.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wl(e,t){const n={typeString:e};return t&&(n.value=t),n}function xl(e,t){if(!vl(e))throw new Ho(qo.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ho(qo.INVALID_ARGUMENT,n);return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=-62135596800,Cl=1e6;class kl{static now(){return kl.fromMillis(Date.now())}static fromDate(e){return kl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Cl);return new kl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ho(qo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ho(qo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sl)throw new Ho(qo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ho(qo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cl}_compareTo(e){return this.seconds===e.seconds?il(this.nanoseconds,e.nanoseconds):il(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xl(e,kl._jsonSchema))return new kl(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kl._jsonSchemaVersion="firestore/timestamp/1.0",kl._jsonSchema={type:wl("string",kl._jsonSchemaVersion),seconds:wl("number"),nanoseconds:wl("number")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class El{static fromTimestamp(e){return new El(e)}static min(){return new El(new kl(0,0))}static max(){return new El(new kl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(e){return new Nl(e.readTime,e.key,-1)}class Nl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Nl(El.min(),pl.empty(),-1)}static max(){return new Nl(El.max(),pl.empty(),-1)}}function Il(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=pl.comparator(e.documentKey,t.documentKey),0!==n?n:il(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class jl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(e){if(e.code!==qo.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Lo("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Uo(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Pl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Pl?t:Pl.resolve(t)}catch(t){return Pl.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Pl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Pl.reject(t)}static resolve(e){return new Pl((t,n)=>{t(e)})}static reject(e){return new Pl((t,n)=>{n(e)})}static waitFor(e){return new Pl((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Pl.resolve(!1);for(const n of e)t=t.next(e=>e?Pl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Pl((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Pl((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ol(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Dl.ue=-1;function Rl(e){return null==e}function Ll(e){return 0===e&&1/e==-1/0}function Ml(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function Fl(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ul(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,t){this.comparator=e,this.root=t||ql.EMPTY}insert(e,t){return new $l(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ql.BLACK,null,null))}remove(e){return new $l(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ql.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vl(this.root,e,this.comparator,!0)}}class Vl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ql{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ql.RED,this.left=null!=r?r:ql.EMPTY,this.right=null!=i?i:ql.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ql(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ql.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ql.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ql.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ql.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Uo(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Uo(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Uo(27949);return e+(this.isRed()?0:1)}}ql.EMPTY=null,ql.RED=!0,ql.BLACK=!1,ql.EMPTY=new class{constructor(){this.size=0}get key(){throw Uo(57766)}get value(){throw Uo(16141)}get color(){throw Uo(16727)}get left(){throw Uo(29726)}get right(){throw Uo(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ql(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hl{constructor(e){this.comparator=e,this.data=new $l(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wl(this.data.getIterator())}getIteratorFrom(e){return new Wl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Hl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hl(this.comparator);return t.data=e,t}}class Wl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.fields=e,e.sort(fl.comparator)}static empty(){return new Gl([])}unionWith(e){let t=new Hl(fl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Gl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Kl("Invalid base64 string: "+t):t}}(e);return new Ql(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ql(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return il(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ql.EMPTY_BYTE_STRING=new Ql("");const Yl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xl(e){if($o(!!e,39018),"string"==typeof e){let t=0;const n=Yl.exec(e);if($o(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Jl(e.seconds),nanos:Jl(e.nanos)}}function Jl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zl(e){return"string"==typeof e?Ql.fromBase64String(e):Ql.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec="server_timestamp",tc="__type__",nc="__previous_value__",rc="__local_write_time__";function ic(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[tc])||void 0===n?void 0:n.stringValue)===ec}function sc(e){const t=e.mapValue.fields[nc];return ic(t)?sc(t):t}function ac(e){const t=Xl(e.mapValue.fields[rc].timestampValue);return new kl(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const lc="(default)";class cc{constructor(e,t){this.projectId=e,this.database=t||lc}static empty(){return new cc("","")}get isDefaultDatabase(){return this.database===lc}isEqual(e){return e instanceof cc&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc="__type__",dc="__max__",hc={},fc="__vector__",pc="value";function mc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ic(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===dc}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[uc])||void 0===n?void 0:n.stringValue)===fc}(e)?10:11:Uo(28295,{value:e})}function gc(e,t){if(e===t)return!0;const n=mc(e);if(n!==mc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ac(e).isEqual(ac(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Xl(e.timestampValue),r=Xl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Zl(e.bytesValue).isEqual(Zl(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jl(e.geoPointValue.latitude)===Jl(t.geoPointValue.latitude)&&Jl(e.geoPointValue.longitude)===Jl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jl(e.integerValue)===Jl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Jl(e.doubleValue),r=Jl(t.doubleValue);return n===r?Ll(n)===Ll(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ll(e.arrayValue.values||[],t.arrayValue.values||[],gc);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zl(n)!==zl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gc(n[i],r[i])))return!1;return!0}(e,t);default:return Uo(52216,{left:e})}var r}function yc(e,t){return void 0!==(e.values||[]).find(e=>gc(e,t))}function vc(e,t){if(e===t)return 0;const n=mc(e),r=mc(t);if(n!==r)return il(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return il(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Jl(e.integerValue||e.doubleValue),r=Jl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _c(e.timestampValue,t.timestampValue);case 4:return _c(ac(e),ac(t));case 5:return sl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Zl(e),r=Zl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=il(n[i],r[i]);if(0!==e)return e}return il(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=il(Jl(e.latitude),Jl(t.latitude));return 0!==n?n:il(Jl(e.longitude),Jl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return bc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[pc])||void 0===n?void 0:n.arrayValue,c=null===(r=o[pc])||void 0===r?void 0:r.arrayValue,u=il((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:bc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===hc&&t===hc)return 0;if(e===hc)return 1;if(t===hc)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=sl(r[a],s[a]);if(0!==e)return e;const t=vc(n[r[a]],i[s[a]]);if(0!==t)return t}return il(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Uo(23264,{le:n})}}function _c(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return il(e,t);const n=Xl(e),r=Xl(t),i=il(n.seconds,r.seconds);return 0!==i?i:il(n.nanos,r.nanos)}function bc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=vc(n[i],r[i]);if(e)return e}return il(n.length,r.length)}function wc(e){return xc(e)}function xc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Xl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Zl(e.bytesValue).toBase64():"referenceValue"in e?function(e){return pl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=xc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${xc(e.fields[i])}`;return n+"}"}(e.mapValue):Uo(61005,{value:e})}function Sc(e){switch(mc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=sc(e);return t?16+Sc(t):16;case 5:return 2*e.stringValue.length;case 6:return Zl(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+Sc(t),0);case 10:case 11:return function(e){let t=0;return Ul(e.fields,(e,n)=>{t+=e.length+Sc(n)}),t}(e.mapValue);default:throw Uo(13486,{value:e})}}function Cc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function kc(e){return!!e&&"integerValue"in e}function Ec(e){return!!e&&"arrayValue"in e}function Tc(e){return!!e&&"nullValue"in e}function Nc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ic(e){return!!e&&"mapValue"in e}function jc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ul(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=jc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=jc(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Ac{constructor(e){this.value=e}static empty(){return new Ac({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ic(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jc(t)}setAll(e){let t=fl.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=jc(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ic(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ic(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ul(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ac(jc(this.value))}}function Pc(e){const t=[];return Ul(e.fields,(e,n)=>{const r=new fl([e]);if(Ic(n)){const e=Pc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Gl(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Oc{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Oc(e,0,El.min(),El.min(),El.min(),Ac.empty(),0)}static newFoundDocument(e,t,n,r){return new Oc(e,1,t,El.min(),n,r,0)}static newNoDocument(e,t){return new Oc(e,2,t,El.min(),El.min(),Ac.empty(),0)}static newUnknownDocument(e,t){return new Oc(e,3,t,El.min(),El.min(),Ac.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(El.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ac.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ac.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=El.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Oc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t){this.position=e,this.inclusive=t}}function Rc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?pl.comparator(pl.fromName(a.referenceValue),n.key):vc(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Lc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!gc(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Fc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{}class Uc extends zc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Gc(e,t,n):"array-contains"===t?new Xc(e,n):"in"===t?new Jc(e,n):"not-in"===t?new Zc(e,n):"array-contains-any"===t?new eu(e,n):new Uc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Kc(e,n):new Qc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(vc(t,this.value)):null!==t&&mc(this.value)===mc(t)&&this.matchesComparison(vc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Uo(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bc extends zc{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Bc(e,t)}matches(e){return $c(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function $c(e){return"and"===e.op}function Vc(e){return function(e){for(const t of e.filters)if(t instanceof Bc)return!1;return!0}(e)&&$c(e)}function qc(e){if(e instanceof Uc)return e.field.canonicalString()+e.op.toString()+wc(e.value);if(Vc(e))return e.filters.map(e=>qc(e)).join(",");{const t=e.filters.map(e=>qc(e)).join(",");return`${e.op}(${t})`}}function Hc(e,t){return e instanceof Uc?(n=e,(r=t)instanceof Uc&&n.op===r.op&&n.field.isEqual(r.field)&&gc(n.value,r.value)):e instanceof Bc?function(e,t){return t instanceof Bc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Hc(n,t.filters[r]),!0)}(e,t):void Uo(19439);var n,r}function Wc(e){return e instanceof Uc?`${(t=e).field.canonicalString()} ${t.op} ${wc(t.value)}`:e instanceof Bc?function(e){return e.op.toString()+" {"+e.getFilters().map(Wc).join(" ,")+"}"}(e):"Filter";var t}class Gc extends Uc{constructor(e,t,n){super(e,t,n),this.key=pl.fromName(n.referenceValue)}matches(e){const t=pl.comparator(e.key,this.key);return this.matchesComparison(t)}}class Kc extends Uc{constructor(e,t){super(e,"in",t),this.keys=Yc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qc extends Uc{constructor(e,t){super(e,"not-in",t),this.keys=Yc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Yc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>pl.fromName(e.referenceValue))}class Xc extends Uc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ec(t)&&yc(t.arrayValue,this.value)}}class Jc extends Uc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yc(this.value.arrayValue,t)}}class Zc extends Uc{constructor(e,t){super(e,"not-in",t)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!yc(this.value.arrayValue,t)}}class eu extends Uc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ec(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>yc(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t=null,n=[],r=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Pe=null}}function nu(e,t=null,n=[],r=[],i=null,s=null,a=null){return new tu(e,t,n,r,i,s,a)}function ru(e){const t=Vo(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>qc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Rl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>wc(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>wc(e)).join(",")),t.Pe=e}return t.Pe}function iu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Fc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Hc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lc(e.startAt,t.startAt)&&Lc(e.endAt,t.endAt)}function su(e){return pl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t=null,n=[],r=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ou(e){return new au(e)}function lu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function cu(e){return null!==e.collectionGroup}function uu(e){const t=Vo(e);if(null===t.Te){t.Te=[];const e=new Set;for(const r of t.explicitOrderBy)t.Te.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new Hl(fl.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new Mc(r,n))}),e.has(fl.keyField().canonicalString())||t.Te.push(new Mc(fl.keyField(),n))}return t.Te}function du(e){const t=Vo(e);return t.Ie||(t.Ie=function(e,t){if("F"===e.limitType)return nu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Mc(e.field,t)});const n=e.endAt?new Dc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Dc(e.startAt.position,e.startAt.inclusive):null;return nu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,uu(e))),t.Ie}function hu(e,t){const n=e.filters.concat([t]);return new au(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function fu(e,t,n){return new au(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function pu(e,t){return iu(du(e),du(t))&&e.limitType===t.limitType}function mu(e){return`${ru(du(e))}|lt:${e.limitType}`}function gu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Wc(e)).join(", ")}]`),Rl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>wc(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>wc(e)).join(",")),`Target(${t})`}(du(e))}; limitType=${e.limitType})`}function yu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of uu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=Rc(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,uu(n),r)||n.endAt&&!function(e,t,n){const r=Rc(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,uu(n),r)));var n,r}function vu(e){return(t,n)=>{let r=!1;for(const i of uu(e)){const e=_u(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function _u(e,t,n){const r=e.field.isKeyField()?pl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vc(r,i):Uo(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Uo(19790,{direction:e.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ul(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Bl(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new $l(pl.comparator);function xu(){return wu}const Su=new $l(pl.comparator);function Cu(...e){let t=Su;for(const n of e)t=t.insert(n.key,n);return t}function ku(e){let t=Su;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Eu(){return Nu()}function Tu(){return Nu()}function Nu(){return new bu(e=>e.toString(),(e,t)=>e.isEqual(t))}const Iu=new $l(pl.comparator),ju=new Hl(pl.comparator);function Au(...e){let t=ju;for(const n of e)t=t.add(n);return t}const Pu=new Hl(il);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ou(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ll(t)?"-0":t}}function Du(e){return{integerValue:""+e}}function Ru(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Ll(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?Du(t):Ou(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this._=void 0}}function Mu(e,t,n){return e instanceof Uu?function(e,t){const n={fields:{[tc]:{stringValue:ec},[rc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ic(t)&&(t=sc(t)),t&&(n.fields[nc]=t),{mapValue:n}}(n,t):e instanceof Bu?$u(e,t):e instanceof Vu?qu(e,t):function(e,t){const n=zu(e,t),r=Wu(n)+Wu(e.Ee);return kc(n)&&kc(e.Ee)?Du(r):Ou(e.serializer,r)}(e,t)}function Fu(e,t,n){return e instanceof Bu?$u(e,t):e instanceof Vu?qu(e,t):n}function zu(e,t){return e instanceof Hu?kc(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class Uu extends Lu{}class Bu extends Lu{constructor(e){super(),this.elements=e}}function $u(e,t){const n=Gu(t);for(const r of e.elements)n.some(e=>gc(e,r))||n.push(r);return{arrayValue:{values:n}}}class Vu extends Lu{constructor(e){super(),this.elements=e}}function qu(e,t){let n=Gu(t);for(const r of e.elements)n=n.filter(e=>!gc(e,r));return{arrayValue:{values:n}}}class Hu extends Lu{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Wu(e){return Jl(e.integerValue||e.doubleValue)}function Gu(e){return Ec(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.field=e,this.transform=t}}class Qu{constructor(e,t){this.version=e,this.transformResults=t}}class Yu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yu}static exists(e){return new Yu(void 0,e)}static updateTime(e){return new Yu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ju{}function Zu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new cd(e.key,Yu.none()):new id(e.key,e.data,Yu.none());{const n=e.data,r=Ac.empty();let i=new Hl(fl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new sd(e.key,r,new Gl(i.toArray()),Yu.none())}}function ed(e,t,n){var r;e instanceof id?function(e,t,n){const r=e.value.clone(),i=od(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof sd?function(e,t,n){if(!Xu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=od(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ad(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function td(e,t,n,r){return e instanceof id?function(e,t,n,r){if(!Xu(e.precondition,t))return n;const i=e.value.clone(),s=ld(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof sd?function(e,t,n,r){if(!Xu(e.precondition,t))return n;const i=ld(e.fieldTransforms,r,t),s=t.data;return s.setAll(ad(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(i=t,s=n,Xu(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s);var i,s}function nd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=zu(r.transform,e||null);null!=i&&(null===n&&(n=Ac.empty()),n.set(r.field,i))}return n||null}function rd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&ll(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Bu&&r instanceof Bu||n instanceof Vu&&r instanceof Vu?ll(n.elements,r.elements,gc):n instanceof Hu&&r instanceof Hu?gc(n.Ee,r.Ee):n instanceof Uu&&r instanceof Uu);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class id extends Ju{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class sd extends Ju{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ad(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function od(e,t,n){const r=new Map;$o(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Fu(a,o,n[i]))}return r}function ld(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Mu(e,s,t))}return r}class cd extends Ju{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ud extends Ju{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ed(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=td(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=td(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Tu();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Zu(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(El.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Au())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(e,t)=>rd(e,t))&&ll(this.baseMutations,e.baseMutations,(e,t)=>rd(e,t))}}class hd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){$o(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=function(){return Iu}();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new hd(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var md,gd;function yd(e){if(void 0===e)return Mo("GRPC error has no .code"),qo.UNKNOWN;switch(e){case md.OK:return qo.OK;case md.CANCELLED:return qo.CANCELLED;case md.UNKNOWN:return qo.UNKNOWN;case md.DEADLINE_EXCEEDED:return qo.DEADLINE_EXCEEDED;case md.RESOURCE_EXHAUSTED:return qo.RESOURCE_EXHAUSTED;case md.INTERNAL:return qo.INTERNAL;case md.UNAVAILABLE:return qo.UNAVAILABLE;case md.UNAUTHENTICATED:return qo.UNAUTHENTICATED;case md.INVALID_ARGUMENT:return qo.INVALID_ARGUMENT;case md.NOT_FOUND:return qo.NOT_FOUND;case md.ALREADY_EXISTS:return qo.ALREADY_EXISTS;case md.PERMISSION_DENIED:return qo.PERMISSION_DENIED;case md.FAILED_PRECONDITION:return qo.FAILED_PRECONDITION;case md.ABORTED:return qo.ABORTED;case md.OUT_OF_RANGE:return qo.OUT_OF_RANGE;case md.UNIMPLEMENTED:return qo.UNIMPLEMENTED;case md.DATA_LOSS:return qo.DATA_LOSS;default:return Uo(39323,{code:e})}}(gd=md||(md={}))[gd.OK=0]="OK",gd[gd.CANCELLED=1]="CANCELLED",gd[gd.UNKNOWN=2]="UNKNOWN",gd[gd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gd[gd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gd[gd.NOT_FOUND=5]="NOT_FOUND",gd[gd.ALREADY_EXISTS=6]="ALREADY_EXISTS",gd[gd.PERMISSION_DENIED=7]="PERMISSION_DENIED",gd[gd.UNAUTHENTICATED=16]="UNAUTHENTICATED",gd[gd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gd[gd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gd[gd.ABORTED=10]="ABORTED",gd[gd.OUT_OF_RANGE=11]="OUT_OF_RANGE",gd[gd.UNIMPLEMENTED=12]="UNIMPLEMENTED",gd[gd.INTERNAL=13]="INTERNAL",gd[gd.UNAVAILABLE=14]="UNAVAILABLE",gd[gd.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const vd=new vo([4294967295,4294967295],0);function _d(e){const t=nl().encode(e),n=new _o;return n.update(t),new Uint8Array(n.digest())}function bd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new vo([n,r],0),new vo([i,s],0)]}class wd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new xd(`Invalid padding: ${t}`);if(n<0)throw new xd(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new xd(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new xd(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=vo.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(vo.fromNumber(n)));return 1===r.compare(vd)&&(r=new vo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=_d(e),[n,r]=bd(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);if(!this.ye(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new wd(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.fe)return;const t=_d(e),[n,r]=bd(t);for(let i=0;i<this.hashCount;i++){const e=this.pe(n,r,i);this.we(e)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class xd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Cd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Sd(El.min(),r,new $l(il),xu(),Au())}}class Cd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Cd(n,t,Au(),Au(),Au())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class Ed{constructor(e,t){this.targetId=e,this.De=t}}class Td{constructor(e,t,n=Ql.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Nd{constructor(){this.ve=0,this.Ce=Ad(),this.Fe=Ql.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Au(),t=Au(),n=Au();return this.Ce.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Uo(38017,{changeType:i})}}),new Cd(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=Ad()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,$o(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Id{constructor(e){this.We=e,this.Ge=new Map,this.ze=xu(),this.je=jd(),this.Je=jd(),this.He=new $l(il)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:Uo(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const i=r.target;if(su(i))if(0===n){const e=new pl(i.path);this.Xe(t,e,Oc.newNoDocument(e,El.min()))}else $o(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),i=n?this.ut(n,e,r):1;if(0!==i){this.rt(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Zl(n).toUint8Array()}catch(o){if(o instanceof Kl)return Fo("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new wd(s,r,i)}catch(o){return Fo(o instanceof xd?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return 0===a.fe?null:a}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.We.lt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const i=this.st(r);if(i){if(n.current&&su(i.target)){const t=new pl(i.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,Oc.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=Au();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new Sd(e,t,this.He,this.ze,n);return this.ze=xu(),this.je=jd(),this.Je=jd(),this.He=new $l(il),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Nd,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Hl(il),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Hl(il),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||Lo("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Nd),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function jd(){return new $l(pl.comparator)}function Ad(){return new $l(pl.comparator)}const Pd=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Od=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Dd=(()=>({and:"AND",or:"OR"}))();class Rd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ld(e,t){return e.useProto3Json||Rl(t)?t:{value:t}}function Md(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Fd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function zd(e,t){return Md(e,t.toTimestamp())}function Ud(e){return $o(!!e,49232),El.fromTimestamp(function(e){const t=Xl(e);return new kl(t.seconds,t.nanos)}(e))}function Bd(e,t){return $d(e,t).canonicalString()}function $d(e,t){const n=(r=e,new dl(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function Vd(e){const t=dl.fromString(e);return $o(oh(t),10190,{key:t.toString()}),t}function qd(e,t){return Bd(e.databaseId,t.path)}function Hd(e,t){const n=Vd(t);if(n.get(1)!==e.databaseId.projectId)throw new Ho(qo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ho(qo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pl(Kd(n))}function Wd(e,t){return Bd(e.databaseId,t)}function Gd(e){return new dl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Kd(e){return $o(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Qd(e,t,n){return{name:qd(e,t),fields:n.value.mapValue.fields}}function Yd(e,t){return{documents:[Wd(e,t.path)]}}function Xd(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Wd(e,i);const s=function(e){if(0!==e.length)return sh(Bc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>{return{field:rh((t=e).field),direction:eh(t.dir)};var t})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Ld(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:i};var l}function Jd(e){let t=function(e){const t=Vd(e);return 4===t.length?dl.emptyPath():Kd(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$o(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Zd(e);return t instanceof Bc&&Vc(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>{return new Mc(ih((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Rl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Dc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Dc(n,t)}(n.endAt)),function(e,t,n,r,i,s,a,o){return new au(e,t,n,r,i,s,a,o)}(t,i,a,s,o,"F",l,c)}function Zd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ih(e.unaryFilter.field);return Uc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ih(e.unaryFilter.field);return Uc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ih(e.unaryFilter.field);return Uc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ih(e.unaryFilter.field);return Uc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Uo(61313);default:return Uo(60726)}}(e):void 0!==e.fieldFilter?(t=e,Uc.create(ih(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Uo(58110);default:return Uo(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Bc.create(e.compositeFilter.filters.map(e=>Zd(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Uo(1026)}}(e.compositeFilter.op))}(e):Uo(30097,{filter:e});var t}function eh(e){return Pd[e]}function th(e){return Od[e]}function nh(e){return Dd[e]}function rh(e){return{fieldPath:e.canonicalString()}}function ih(e){return fl.fromServerFormat(e.fieldPath)}function sh(e){return e instanceof Uc?function(e){if("=="===e.op){if(Nc(e.value))return{unaryFilter:{field:rh(e.field),op:"IS_NAN"}};if(Tc(e.value))return{unaryFilter:{field:rh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Nc(e.value))return{unaryFilter:{field:rh(e.field),op:"IS_NOT_NAN"}};if(Tc(e.value))return{unaryFilter:{field:rh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rh(e.field),op:th(e.op),value:e.value}}}(e):e instanceof Bc?function(e){const t=e.getFilters().map(e=>sh(e));return 1===t.length?t[0]:{compositeFilter:{op:nh(e.op),filters:t}}}(e):Uo(54877,{filter:e})}function ah(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function oh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t,n,r,i=El.min(),s=El.min(),a=Ql.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new lh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this.gt=e}}function uh(e){const t=Jd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fu(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this.Dn=new hh}addToCollectionParentIndex(e,t){return this.Dn.add(t),Pl.resolve()}getCollectionParents(e,t){return Pl.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Pl.resolve()}deleteFieldIndex(e,t){return Pl.resolve()}deleteAllFieldIndexes(e){return Pl.resolve()}createTargetIndexes(e,t){return Pl.resolve()}getDocumentsMatchingTarget(e,t){return Pl.resolve(null)}getIndexType(e,t){return Pl.resolve(0)}getFieldIndexes(e,t){return Pl.resolve([])}getNextCollectionGroupToUpdate(e){return Pl.resolve(null)}getMinOffset(e,t){return Pl.resolve(Nl.min())}getMinOffsetFromCollectionGroup(e,t){return Pl.resolve(Nl.min())}updateCollectionGroup(e,t,n){return Pl.resolve()}updateIndexEntries(e,t){return Pl.resolve()}}class hh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hl(dl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Hl(dl.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ph=41943040;class mh{static withCacheSize(e){return new mh(e,mh.DEFAULT_COLLECTION_PERCENTILE,mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mh.DEFAULT_COLLECTION_PERCENTILE=10,mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mh.DEFAULT=new mh(ph,mh.DEFAULT_COLLECTION_PERCENTILE,mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mh.DISABLED=new mh(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gh{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new gh(0)}static ur(){return new gh(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="LruGarbageCollector";function vh([e,t],[n,r]){const i=il(e,n);return 0===i?il(t,r):i}class _h{constructor(e){this.Tr=e,this.buffer=new Hl(vh),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();vh(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){Lo(yh,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ol(e)?Lo(yh,"Ignoring IndexedDB error during garbage collection: ",e):await Al(e)}await this.Rr(3e5)})}}class wh{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Pl.resolve(Dl.ue);const n=new _h(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Lo("LruGarbageCollector","Garbage collection skipped; disabled"),Pl.resolve(fh)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Lo("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fh):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Lo("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ro()<=Gs.DEBUG&&Lo("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(a-s)+`ms\n\tRemoved ${i} targets in `+(o-a)+`ms\n\tRemoved ${e} documents in `+(l-o)+`ms\nTotal Duration: ${l-c}ms`),Pl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xh{constructor(){this.changes=new bu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Pl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&td(n.mutation,e,Gl.empty(),kl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Au()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Au()){const r=Eu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Cu();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Eu();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Au()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=xu();const s=Nu(),a=Nu();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof sd)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),td(a.mutation,t,a.mutation.getFieldMask(),kl.now())):s.set(t.key,Gl.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Sh(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Nu();let r=new $l((e,t)=>e-t),i=Au();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Gl.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Au()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Tu();l.forEach(e=>{if(!i.has(e)){const r=Zu(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Pl.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return i=t,pl.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):cu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Pl.resolve(Eu());let a=-1,o=i;return s.next(t=>Pl.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Pl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Au())).next(e=>({batchId:a,changes:ku(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pl(t)).next(e=>{let t=Cu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Cu();return this.indexManager.getCollectionParents(e,i).next(a=>Pl.forEach(a,a=>{const o=(l=t,c=a.child(i),new au(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Oc.newInvalidDocument(r)))});let n=Cu();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&td(s.mutation,r,Gl.empty(),kl.now()),yu(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Pl.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,{id:(n=t).id,version:n.version,createTime:Ud(n.createTime)}),Pl.resolve();var n}getNamedQuery(e,t){return Pl.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,{name:(n=t).name,query:uh(n.bundledQuery),readTime:Ud(n.readTime)}),Pl.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this.overlays=new $l(pl.comparator),this.kr=new Map}getOverlay(e,t){return Pl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Eu();return Pl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),Pl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),Pl.resolve()}getOverlaysForCollection(e,t,n){const r=Eu(),i=t.length+1,s=new pl(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Pl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new $l((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Eu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Eu(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Pl.resolve(a)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new fd(t,n));let i=this.kr.get(t);void 0===i&&(i=Au(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.sessionToken=Ql.EMPTY_BYTE_STRING}getSessionToken(e){return Pl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Pl.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this.qr=new Hl(Ih.Qr),this.$r=new Hl(Ih.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new Ih(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Ih(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new pl(new dl([])),n=new Ih(t,e),r=new Ih(t,e+1),i=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new pl(new dl([])),n=new Ih(t,e),r=new Ih(t,e+1);let i=Au();return this.$r.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ih(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ih{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return pl.comparator(e.key,t.key)||il(e.Hr,t.Hr)}static Ur(e,t){return il(e.Hr,t.Hr)||pl.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Hl(Ih.Qr)}checkEmpty(e){return Pl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new dd(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Yr=this.Yr.add(new Ih(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Pl.resolve(s)}lookupMutationBatch(e,t){return Pl.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return Pl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Pl.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return Pl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ih(t,0),r=new Ih(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),Pl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hl(il);return t.forEach(e=>{const t=new Ih(e,0),r=new Ih(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),Pl.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;pl.isDocumentKey(i)||(i=i.child(""));const s=new Ih(new pl(i),0);let a=new Hl(il);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Hr)),!0)},s),Pl.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){$o(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return Pl.forEach(t.mutations,r=>{const i=new Ih(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new Ih(t,0),r=this.Yr.firstAfterOrEqual(n);return Pl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Pl.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.ni=e,this.docs=new $l(pl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Pl.resolve(n?n.document.mutableCopy():Oc.newInvalidDocument(t))}getEntries(e,t){let n=xu();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Oc.newInvalidDocument(e))}),Pl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=xu();const s=t.path,a=new pl(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Il(Tl(a),n)<=0||(r.has(a.key)||yu(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Pl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Uo(9500)}ri(e,t){return Pl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ph(this)}getSize(e){return Pl.resolve(this.size)}}class Ph extends xh{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),Pl.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.persistence=e,this.ii=new bu(e=>ru(e),iu),this.lastRemoteSnapshotVersion=El.min(),this.highestTargetId=0,this.si=0,this.oi=new Nh,this.targetCount=0,this._i=gh.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),Pl.resolve()}getLastRemoteSnapshotVersion(e){return Pl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pl.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Pl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),Pl.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new gh(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Pl.resolve()}updateTargetData(e,t){return this.hr(t),Pl.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Pl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ii.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Pl.waitFor(i).next(()=>r)}getTargetCount(e){return Pl.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return Pl.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),Pl.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Pl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Pl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return Pl.resolve(n)}containsKey(e,t){return Pl.resolve(this.oi.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t){this.ai={},this.overlays={},this.ui=new Dl(0),this.ci=!1,this.ci=!0,this.li=new Th,this.referenceDelegate=e(this),this.hi=new Oh(this),this.indexManager=new dh,this.remoteDocumentCache=new Ah(e=>this.referenceDelegate.Pi(e)),this.serializer=new ch(t),this.Ti=new kh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Eh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new jh(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){Lo("MemoryPersistence","Starting transaction:",e);const r=new Rh(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return Pl.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class Rh extends jl{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.Ai=new Nh,this.Ri=null}static Vi(e){return new Lh(e)}get mi(){if(this.Ri)return this.Ri;throw Uo(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),Pl.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),Pl.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Pl.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pl.forEach(this.mi,n=>{const r=pl.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,El.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Pl.or([()=>Pl.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mh{constructor(e,t){this.persistence=e,this.gi=new bu(e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fl(t)),t=Ml(e.get(n),t);return Fl(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new wh(e,t)}(this,t)}static Vi(e,t){return new Mh(e,t)}Ii(){}di(e){return Pl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return Pl.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?Pl.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,El.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Pl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Pl.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Pl.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Pl.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sc(e.data.value)),t}Sr(e,t,n){return Pl.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return Pl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=Au(),r=Au();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Fh(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=As()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(js())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ps(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ys(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new zh;return this.ws(e,t,n).next(r=>{if(i.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>i.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(Ro()<=Gs.DEBUG&&Lo("QueryEngine","SDK will not create cache indexes for query:",gu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Pl.resolve()):(Ro()<=Gs.DEBUG&&Lo("QueryEngine","Query:",gu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(Ro()<=Gs.DEBUG&&Lo("QueryEngine","The SDK decides to create cache indexes for query:",gu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,du(t))):Pl.resolve())}ps(e,t){if(lu(t))return Pl.resolve(null);let n=du(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=fu(t,null,"F"),n=du(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Au(...r);return this.gs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,r);return this.Ds(t,s,i,n.readTime)?this.ps(e,fu(t,null,"F")):this.vs(e,s,t,n)}))})))}ys(e,t,n,r){return lu(t)||r.isEqual(El.min())?Pl.resolve(null):this.gs.getDocuments(e,n).next(i=>{const s=this.bs(t,i);return this.Ds(t,s,n,r)?Pl.resolve(null):(Ro()<=Gs.DEBUG&&Lo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gu(t)),this.vs(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=El.fromTimestamp(1e9===r?new kl(n+1,0):new kl(n,r));return new Nl(i,pl.empty(),t)}(r,-1)).next(e=>e))})}bs(e,t){let n=new Hl(vu(e));return t.forEach((t,r)=>{yu(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ws(e,t,n){return Ro()<=Gs.DEBUG&&Lo("QueryEngine","Using full collection scan to execute query:",gu(t)),this.gs.getDocumentsMatchingQuery(e,t,Nl.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="LocalStore";class $h{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new $l(il),this.Ms=new bu(e=>ru(e),iu),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ch(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}async function Vh(e,t){const n=Vo(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=Au();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Bs:e,removedBatchIds:i,addedBatchIds:s}))})})}function qh(e){const t=Vo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function Hh(e,t){const n=Vo(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.hi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.hi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ql.EMPTY_BYTE_STRING,El.min()).withLastLimboFreeSnapshotVersion(El.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.hi.updateTargetData(e,c))});let o=xu(),l=Au();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(function(e,t,n){let r=Au(),i=Au();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=xu();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(El.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Lo(Bh,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Ls:r,ks:i}})}(e,s,t.documentUpdates).next(e=>{o=e.Ls,l=e.ks})),!r.isEqual(El.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Pl.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Fs=i,e))}function Wh(e,t){const n=Vo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function Gh(e,t,n){const r=Vo(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(a){if(!Ol(a))throw a;Lo(Bh,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function Kh(e,t,n){const r=Vo(e);let i=El.min(),s=Au();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Vo(e),i=r.Ms.get(n);return void 0!==i?Pl.resolve(r.Fs.get(i)):r.hi.getTargetData(t,n)}(r,e,du(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:El.min(),n?s:Au())).next(e=>(function(e,t,n){let r=e.xs.get(t)||El.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,qs:s})))}class Qh{constructor(){this.activeTargetIds=Pu}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yh{constructor(){this.Fo=new Qh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Qh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{xo(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="ConnectivityMonitor";class Zh{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Lo(Jh,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Lo(Jh,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function tf(){return null===ef?ef=268435456+Math.round(2147483648*Math.random()):ef++,"0x"+ef.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const nf="RestConnection",rf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sf{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===lc?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){const s=tf(),a=this.Go(e,t.toUriEncodedString());Lo(nf,`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(o,r,i);const{host:l}=new URL(a),c=ks(l);return this.jo(e,a,o,n,c).then(t=>(Lo(nf,`Received RPC '${e}' ${s}: `,t),t),t=>{throw Fo(nf,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Jo(e,t,n,r,i,s){return this.Wo(e,t,n,r,i)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Oo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=rf[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="WebChannelConnection";class lf extends sf{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,i){const s=tf();return new Promise((i,a)=>{const o=new wo;o.setWithCredentials(!0),o.listenOnce(So.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Co.NO_ERROR:const t=o.getResponseJson();Lo(of,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case Co.TIMEOUT:Lo(of,`RPC '${e}' ${s} timed out`),a(new Ho(qo.DEADLINE_EXCEEDED,"Request time out"));break;case Co.HTTP_ERROR:const n=o.getStatus();if(Lo(of,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(qo).indexOf(t)>=0?t:qo.UNKNOWN}(t.status);a(new Ho(e,t.message))}else a(new Ho(qo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ho(qo.UNAVAILABLE,"Connection failed."));break;default:Uo(9055,{c_:e,streamId:s,l_:o.getLastErrorCode(),h_:o.getLastError()})}}finally{Lo(of,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);Lo(of,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}P_(e,t,n){const r=tf(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=No(),a=To(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.zo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Lo(of,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);this.T_(u);let d=!1,h=!1;const f=new af({Ho:t=>{h?Lo(of,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Lo(of,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Lo(of,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Yo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,xo.EventType.OPEN,()=>{h||(Lo(of,`RPC '${e}' stream ${r} transport opened.`),f.s_())}),p(u,xo.EventType.CLOSE,()=>{h||(h=!0,Lo(of,`RPC '${e}' stream ${r} transport closed`),f.__(),this.I_(u))}),p(u,xo.EventType.ERROR,t=>{h||(h=!0,Fo(of,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.__(new Ho(qo.UNAVAILABLE,"The operation could not be completed")))}),p(u,xo.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];$o(!!i,16349);const s=i,a=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Lo(of,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=md[e];if(void 0!==t)return yd(t)}(t),i=a.message;void 0===n&&(n=qo.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.__(new Ho(n,i)),u.close()}else Lo(of,`RPC '${e}' stream ${r} received:`,i),f.a_(i)}}),p(a,Eo.STAT_EVENT,t=>{t.stat===ko.PROXY?Lo(of,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ko.NOPROXY&&Lo(of,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function cf(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(e){return new Rd(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&Lo("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="PersistentStream";class ff{constructor(e,t,n,r,i,s,a,o){this.Fi=e,this.w_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new df(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===qo.RESOURCE_EXHAUSTED?(Mo(t.toString()),Mo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===qo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.b_===t&&this.W_(e,n)},t=>{e(()=>{const e=new Ho(qo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Lo(hf,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Lo(hf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pf extends ff{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Uo(39313,{state:r}),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?($o(void 0===t||"string"==typeof t,58123),Ql.fromBase64String(t||"")):($o(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Ql.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?qo.UNKNOWN:yd(e.code);return new Ho(t,e.message||"")}(o);n=new Td(i,s,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hd(e,r.document.name),s=Ud(r.document.updateTime),a=r.document.createTime?Ud(r.document.createTime):El.min(),o=new Ac({mapValue:{fields:r.document.fields}}),l=Oc.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new kd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Hd(e,r.document),s=r.readTime?Ud(r.readTime):El.min(),a=Oc.newNoDocument(i,s),o=r.removedTargetIds||[];n=new kd([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Hd(e,r.document),s=r.removedTargetIds||[];n=new kd([],s,i,null)}else{if(!("filter"in t))return Uo(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new pd(r,i),a=e.targetId;n=new Ed(a,s)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return El.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?El.min():t.readTime?Ud(t.readTime):El.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=Gd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=su(r)?{documents:Yd(e,r)}:{query:Xd(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Fd(e,t.resumeToken);const r=Ld(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(El.min())>0){n.readTime=Md(e,t.snapshotVersion.toTimestamp());const r=Ld(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Uo(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=Gd(this.serializer),t.removeTarget=e,this.k_(t)}}class mf extends ff{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return $o(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$o(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){$o(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?($o(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Ud(e.updateTime):Ud(t);return n.isEqual(El.min())&&(n=Ud(t)),new Qu(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ud(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=Gd(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof id)n={update:Qd(e,t.key,t.value)};else if(t instanceof cd)n={delete:qd(e,t.key)};else if(t instanceof sd)n={update:Qd(e,t.key,t.data),updateMask:ah(t.fieldMask)};else{if(!(t instanceof ud))return Uo(16599,{Rt:t.type});n={verify:qd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Uu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Hu)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw Uo(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:zd(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Uo(27497))),n;var r,i}(this.serializer,e))};this.k_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{}class yf extends gf{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Ho(qo.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Wo(e,$d(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===qo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ho(qo.UNKNOWN,e.toString())})}Jo(e,t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,$d(t,n),r,s,a,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===qo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ho(qo.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class vf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Mo(t),this._a=!1):Lo("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="RemoteStore";class bf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{If(this)&&(Lo(_f,"Restarting streams for network reachability change."),await async function(e){const t=Vo(e);t.Ia.add(4),await xf(t),t.Aa.set("Unknown"),t.Ia.delete(4),await wf(t)}(this))})}),this.Aa=new vf(n,r)}}async function wf(e){if(If(e))for(const t of e.da)await t(!0)}async function xf(e){for(const t of e.da)await t(!1)}function Sf(e,t){const n=Vo(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Nf(n)?Tf(n):Gf(n).x_()&&kf(n,t))}function Cf(e,t){const n=Vo(e),r=Gf(n);n.Ta.delete(t),r.x_()&&Ef(n,t),0===n.Ta.size&&(r.x_()?r.B_():If(n)&&n.Aa.set("Unknown"))}function kf(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(El.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Gf(e).H_(t)}function Ef(e,t){e.Ra.$e(t),Gf(e).Y_(t)}function Tf(e){e.Ra=new Id({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Gf(e).start(),e.Aa.aa()}function Nf(e){return If(e)&&!Gf(e).M_()&&e.Ta.size>0}function If(e){return 0===Vo(e).Ia.size}function jf(e){e.Ra=void 0}async function Af(e){e.Aa.set("Online")}async function Pf(e){e.Ta.forEach((t,n)=>{kf(e,t)})}async function Of(e,t){jf(e),Nf(e)?(e.Aa.la(t),Tf(e)):e.Aa.set("Unknown")}async function Df(e,t,n){if(e.Aa.set("Online"),t instanceof Td&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(r){Lo(_f,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Rf(e,r)}else if(t instanceof kd?e.Ra.Ye(t):t instanceof Ed?e.Ra.it(t):e.Ra.et(t),!n.isEqual(El.min()))try{const t=await qh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ta.get(r);i&&e.Ta.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(Ql.EMPTY_BYTE_STRING,r.snapshotVersion)),Ef(e,t);const i=new lh(r.target,t,n,r.sequenceNumber);kf(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){Lo(_f,"Failed to raise snapshot:",i),await Rf(e,i)}}async function Rf(e,t,n){if(!Ol(t))throw t;e.Ia.add(1),await xf(e),e.Aa.set("Offline"),n||(n=()=>qh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Lo(_f,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await wf(e)})}function Lf(e,t){return t().catch(n=>Rf(e,n,t))}async function Mf(e){const t=Vo(e),n=Kf(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:-1;for(;Ff(t);)try{const e=await Wh(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,zf(t,e)}catch(i){await Rf(t,i)}Uf(t)&&Bf(t)}function Ff(e){return If(e)&&e.Pa.length<10}function zf(e,t){e.Pa.push(t);const n=Kf(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function Uf(e){return If(e)&&!Kf(e).M_()&&e.Pa.length>0}function Bf(e){Kf(e).start()}async function $f(e){Kf(e).na()}async function Vf(e){const t=Kf(e);for(const n of e.Pa)t.X_(n.mutations)}async function qf(e,t,n){const r=e.Pa.shift(),i=hd.from(r,t,n);await Lf(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Mf(e)}async function Hf(e,t){t&&Kf(e).Z_&&await async function(e,t){if(function(e){switch(e){case qo.OK:return Uo(64938);case qo.CANCELLED:case qo.UNKNOWN:case qo.DEADLINE_EXCEEDED:case qo.RESOURCE_EXHAUSTED:case qo.INTERNAL:case qo.UNAVAILABLE:case qo.UNAUTHENTICATED:return!1;case qo.INVALID_ARGUMENT:case qo.NOT_FOUND:case qo.ALREADY_EXISTS:case qo.PERMISSION_DENIED:case qo.FAILED_PRECONDITION:case qo.ABORTED:case qo.OUT_OF_RANGE:case qo.UNIMPLEMENTED:case qo.DATA_LOSS:return!0;default:return Uo(15467,{code:e})}}(n=t.code)&&n!==qo.ABORTED){const n=e.Pa.shift();Kf(e).N_(),await Lf(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Mf(e)}var n}(e,t),Uf(e)&&Bf(e)}async function Wf(e,t){const n=Vo(e);n.asyncQueue.verifyOperationInProgress(),Lo(_f,"RemoteStore received new credentials");const r=If(n);n.Ia.add(3),await xf(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await wf(n)}function Gf(e){return e.Va||(e.Va=function(e,t,n){const r=Vo(e);return r.ia(),new pf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Af.bind(null,e),e_:Pf.bind(null,e),n_:Of.bind(null,e),J_:Df.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),Nf(e)?Tf(e):e.Aa.set("Unknown")):(await e.Va.stop(),jf(e))})),e.Va}function Kf(e){return e.ma||(e.ma=function(e,t,n){const r=Vo(e);return r.ia(),new mf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:$f.bind(null,e),n_:Hf.bind(null,e),ea:Vf.bind(null,e),ta:qf.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await Mf(e)):(await e.ma.stop(),e.Pa.length>0&&(Lo(_f,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Qf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Qf(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ho(qo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yf(e,t){if(Mo("AsyncQueue",`${t}: ${e}`),Ol(e))return new Ho(qo.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{static emptySet(e){return new Xf(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||pl.comparator(t.key,n.key):(e,t)=>pl.comparator(e.key,t.key),this.keyedMap=Cu(),this.sortedSet=new $l(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Xf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this.fa=new $l(pl.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Uo(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Zf{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Zf(e,t,Xf.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class tp{constructor(){this.queries=np(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=Vo(e),r=n.queries;n.queries=np(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new Ho(qo.ABORTED,"Firestore shutting down"))}}function np(){return new bu(e=>mu(e),pu)}async function rp(e,t){const n=Vo(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new ep,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const e=Yf(a,`Initialization of query '${gu(t.query)}' failed`);return void t.onError(e)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&op(n)}async function ip(e,t){const n=Vo(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.wa.indexOf(t);e>=0&&(s.wa.splice(e,1),0===s.wa.length?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sp(e,t){const n=Vo(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.wa)e.Ca(i)&&(r=!0);t.ya=i}}r&&op(n)}function ap(e,t,n){const r=Vo(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function op(e){e.Da.forEach(e=>{e.next()})}var lp,cp;(cp=lp||(lp={})).Fa="default",cp.Cache="cache";class up{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Zf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Zf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==lp.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this.key=e}}class hp{constructor(e){this.key=e}}class fp{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Au(),this.mutatedKeys=Au(),this.Xa=vu(e),this.eu=new Xf(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new Jf,r=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=yu(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.iu(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Xa(u,o)>0||l&&this.Xa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{eu:s,ru:n,Ds:a,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Uo(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const a=t&&!r?this.ou():[],o=0===this.Za.size&&this.current&&!r?1:0,l=o!==this.Ya;return this.Ya=o,0!==s.length||l?{snapshot:new Zf(this.query,e.eu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Jf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Au(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new hp(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new dp(n))}),t}uu(e){this.Ha=e.qs,this.Za=Au();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Zf.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const pp="SyncEngine";class mp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class gp{constructor(e){this.key=e,this.lu=!1}}class yp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new bu(e=>mu(e),pu),this.Tu=new Map,this.Iu=new Set,this.du=new $l(pl.comparator),this.Eu=new Map,this.Au=new Nh,this.Ru={},this.Vu=new Map,this.mu=gh.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function vp(e,t,n=!0){const r=zp(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await bp(r,t,n,!0),i}async function _p(e,t){const n=zp(e);await bp(n,t,!0,!1)}async function bp(e,t,n,r){const i=await function(e,t){const n=Vo(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(i=>i?(r=i,Pl.resolve(r)):n.hi.allocateTargetId(e).next(i=>(r=new lh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}(e.localStore,du(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await async function(e,t,n,r,i){e.gu=(t,n,r)=>async function(e,t,n,r){let i=t.view.nu(n);i.Ds&&(i=await Kh(e.localStore,t.query,!1).then(({documents:e})=>t.view.nu(e,i)));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Op(e,t.targetId,o._u),o.snapshot}(e,t,n,r);const s=await Kh(e.localStore,t,!0),a=new fp(t,s.qs),o=a.nu(s.documents),l=Cd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);Op(e,n,c._u);const u=new mp(t,n,a);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),c.snapshot}(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Sf(e.remoteStore,i),o}async function wp(e,t,n){const r=Vo(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(e=>!pu(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cf(r.remoteStore,i.targetId),Ap(r,i.targetId)}).catch(Al)):(Ap(r,i.targetId),await Gh(r.localStore,i.targetId,!0))}async function xp(e,t){const n=Vo(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cf(n.remoteStore,r.targetId))}async function Sp(e,t,n){const r=function(e){const t=Vo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Np.bind(null,t),t}(e);try{const e=await function(e,t){const n=Vo(e),r=kl.now(),i=t.reduce((e,t)=>e.add(t.key),Au());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=xu(),l=Au();return n.Os.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=nd(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new sd(e.key,t,Pc(t.value.mapValue),Yu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:ku(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new $l(il)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await Lp(r,e.changes),await Mf(r.remoteStore)}catch(i){const e=Yf(i,"Failed to persist write");n.reject(e)}}async function Cp(e,t){const n=Vo(e);try{const e=await Hh(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&($o(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?$o(r.lu,14607):e.removedDocuments.size>0&&($o(r.lu,42227),r.lu=!1))}),await Lp(n,e,t)}catch(r){await Al(r)}}function kp(e,t,n){const r=Vo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Vo(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.wa)i.va(t)&&(r=!0)}),r&&op(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ep(e,t,n){const r=Vo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let e=new $l(pl.comparator);e=e.insert(s,Oc.newNoDocument(s,El.min()));const n=Au().add(s),i=new Sd(El.min(),new Map,new $l(il),e,n);await Cp(r,i),r.du=r.du.remove(s),r.Eu.delete(t),Rp(r)}else await Gh(r.localStore,t,!1).then(()=>Ap(r,t,n)).catch(Al)}async function Tp(e,t){const n=Vo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Vo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Pl.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);$o(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Au();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);jp(n,r,null),Ip(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lp(n,e)}catch(i){await Al(i)}}async function Np(e,t,n){const r=Vo(e);try{const e=await function(e,t){const n=Vo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>($o(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);jp(r,t,n),Ip(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Lp(r,e)}catch(i){await Al(i)}}function Ip(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function jp(e,t,n){const r=Vo(e);let i=r.Ru[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function Ap(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||Pp(e,t)})}function Pp(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Cf(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Rp(e))}function Op(e,t,n){for(const r of n)r instanceof dp?(e.Au.addReference(r.key,t),Dp(e,r)):r instanceof hp?(Lo(pp,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||Pp(e,r.key)):Uo(19791,{yu:r})}function Dp(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(Lo(pp,"New document in limbo: "+n),e.Iu.add(r),Rp(e))}function Rp(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new pl(dl.fromString(t)),r=e.mu.next();e.Eu.set(r,new gp(n)),e.du=e.du.insert(n,r),Sf(e.remoteStore,new lh(du(ou(n.path)),r,"TargetPurposeLimboResolution",Dl.ue))}}async function Lp(e,t,n){const r=Vo(e),i=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((e,o)=>{a.push(r.gu(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Fh.Es(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.hu.J_(i),await async function(e,t){const n=Vo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Pl.forEach(t,t=>Pl.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Pl.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!Ol(r))throw r;Lo(Bh,"Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,i)}}}(r.localStore,s))}async function Mp(e,t){const n=Vo(e);if(!n.currentUser.isEqual(t)){Lo(pp,"User change. New user:",t.toKey());const e=await Vh(n.localStore,t);n.currentUser=t,i="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).Vu.forEach(e=>{e.forEach(e=>{e.reject(new Ho(qo.CANCELLED,i))})}),r.Vu.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Lp(n,e.Bs)}var r,i}function Fp(e,t){const n=Vo(e),r=n.Eu.get(t);if(r&&r.lu)return Au().add(r.key);{let e=Au();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function zp(e){const t=Vo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ep.bind(null,t),t.hu.J_=sp.bind(null,t.eventManager),t.hu.pu=ap.bind(null,t.eventManager),t}class Up{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return function(e,t,n,r){return new $h(e,t,n,r)}(this.persistence,new Uh,e.initialUser,this.serializer)}Du(e){return new Dh(Lh.Vi,this.serializer)}bu(e){return new Yh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Up.provider={build:()=>new Up};class Bp extends Up{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){$o(this.persistence.referenceDelegate instanceof Mh,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new bh(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?mh.withCacheSize(this.cacheSizeBytes):mh.DEFAULT;return new Dh(e=>Mh.Vi(e,t),this.serializer)}}class $p{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>kp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mp.bind(null,this.syncEngine),await async function(e,t){const n=Vo(e);t?(n.Ia.delete(2),await wf(n)):t||(n.Ia.add(2),await xf(n),n.Aa.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new tp}createDatastore(e){const t=uf(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new lf(r));var r;return function(e,t,n,r){return new yf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>kp(this.syncEngine,e,0),s=Zh.C()?new Zh:new Xh,new bf(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new yp(e,t,n,r,i,s);return a&&(o.fu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Vo(e);Lo(_f,"RemoteStore shutting down."),t.Ia.add(5),await xf(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}$p.provider={build:()=>new $p};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Mo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="FirestoreClient";class Hp{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Po.UNAUTHENTICATED,this.clientId=rl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Lo(qp,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Lo(qp,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Yf(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Wp(e,t){e.asyncQueue.verifyOperationInProgress(),Lo(qp,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Vh(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{Fo("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{Lo("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{Fo("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function Gp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Lo(qp,"Using user provided OfflineComponentProvider");try{await Wp(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===qo.FAILED_PRECONDITION||n.code===qo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;Fo("Error using user provided cache. Falling back to memory cache: "+i),await Wp(e,new Up)}}else Lo(qp,"Using default OfflineComponentProvider"),await Wp(e,new Bp(void 0));var n;return e._offlineComponents}(e);Lo(qp,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Wf(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Wf(t.remoteStore,n)),e._onlineComponents=t}async function Kp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Lo(qp,"Using user provided OnlineComponentProvider"),await Gp(e,e._uninitializedComponentsProvider._online)):(Lo(qp,"Using default OnlineComponentProvider"),await Gp(e,new $p))),e._onlineComponents}async function Qp(e){const t=await Kp(e),n=t.eventManager;return n.onListen=vp.bind(null,t.syncEngine),n.onUnlisten=wp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_p.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xp.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Xp=new Map,Jp="firestore.googleapis.com",Zp=!0;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ho(qo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jp,this.ssl=Zp}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Zp;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ph;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ho(qo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ho(qo.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ho(qo.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ho(qo.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ho(qo.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class tm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new em({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ho(qo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ho(qo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new em(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ko;switch(e.type){case"firstParty":return new Jo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ho(qo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xp.get(e);t&&(Lo("ComponentProvider","Removing Datastore"),Xp.delete(e),t.terminate())}(this),Promise.resolve()}}function nm(e,t,n,r={}){var i;e=bl(e,tm);const s=ks(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;s&&(Es(`https://${l}`),Is("Firestore",!0)),a.host!==Jp&&a.host!==l&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!Rs(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Po.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ys(JSON.stringify({alg:"none",type:"JWT"})),ys(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ho(qo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Po(s)}e._authCredentials=new Qo(new Go(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new rm(this.firestore,e,this._query)}}class im{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new im(this.firestore,e,this._key)}toJSON(){return{type:im._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(xl(t,im._jsonSchema))return new im(e,n||null,new pl(dl.fromString(t.referencePath)))}}im._jsonSchemaVersion="firestore/documentReference/1.0",im._jsonSchema={type:wl("string",im._jsonSchemaVersion),referencePath:wl("string")};class sm extends rm{constructor(e,t,n){super(e,t,ou(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new im(this.firestore,null,new pl(e))}withConverter(e){return new sm(this.firestore,e,this._path)}}function am(e,t,...n){if(e=$s(e),ml("collection","path",t),e instanceof tm){const r=dl.fromString(t,...n);return yl(r),new sm(e,null,r)}{if(!(e instanceof im||e instanceof sm))throw new Ho(qo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(dl.fromString(t,...n));return yl(r),new sm(e.firestore,null,r)}}function om(e,t,...n){if(e=$s(e),1===arguments.length&&(t=rl.newId()),ml("doc","path",t),e instanceof tm){const r=dl.fromString(t,...n);return gl(r),new im(e,null,new pl(r))}{if(!(e instanceof im||e instanceof sm))throw new Ho(qo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(dl.fromString(t,...n));return gl(r),new im(e.firestore,e instanceof sm?e.converter:null,new pl(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="AsyncQueue";class cm{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new df(this,"async_queue_retry"),this.oc=()=>{const e=cf();e&&Lo(lm,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=cf();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=cf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Wo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(XD){if(!Ol(XD))throw XD;Lo(lm,"Operation failed with retryable error: "+XD)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,Mo("INTERNAL UNHANDLED ERROR: ",um(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Qf.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&Uo(47125,{hc:um(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function um(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function dm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class hm extends tm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new cm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cm(e),this._firestoreClient=void 0,await e}}}function fm(e){if(e._terminated)throw new Ho(qo.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const i=e._freezeSettings(),s=(a=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,c=i,new oc(a,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Yp(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator));var a,o,l,c;e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Hp(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class pm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pm(Ql.fromBase64String(e))}catch(t){throw new Ho(qo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pm(Ql.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pm._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xl(e,pm._jsonSchema))return pm.fromBase64String(e.bytes)}}pm._jsonSchemaVersion="firestore/bytes/1.0",pm._jsonSchema={type:wl("string",pm._jsonSchemaVersion),bytes:wl("string")};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class mm{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ho(qo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fl(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ho(qo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ho(qo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return il(this._lat,e._lat)||il(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ym._jsonSchemaVersion}}static fromJSON(e){if(xl(e,ym._jsonSchema))return new ym(e.latitude,e.longitude)}}ym._jsonSchemaVersion="firestore/geoPoint/1.0",ym._jsonSchema={type:wl("string",ym._jsonSchemaVersion),latitude:wl("number"),longitude:wl("number")};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vm._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xl(e,vm._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new vm(e.vectorValues);throw new Ho(qo.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vm._jsonSchemaVersion="firestore/vectorValue/1.0",vm._jsonSchema={type:wl("string",vm._jsonSchemaVersion),vectorValues:wl("object")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _m=/^__.*__$/;class bm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new sd(e,this.data,this.fieldMask,t,this.fieldTransforms):new id(e,this.data,t,this.fieldTransforms)}}class wm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new sd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Uo(40011,{Ec:e})}}class Sm{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Sm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Lm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(xm(this.Ec)&&_m.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Cm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||uf(e)}Dc(e,t,n,r=!1){return new Sm({Ec:e,methodName:t,bc:n,path:fl.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function km(e){const t=e._freezeSettings(),n=uf(e._databaseId);return new Cm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Em(e,t,n,r,i,s={}){const a=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);Pm("Data must be an object, but it was:",a,r);const o=jm(r,a);let l,c;if(s.merge)l=new Gl(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Om(t,r,n);if(!a.contains(i))throw new Ho(qo.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Mm(e,i)||e.push(i)}l=new Gl(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new bm(new Ac(o),l,c)}class Tm extends gm{_toFieldTransform(e){if(2!==e.Ec)throw 1===e.Ec?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tm}}class Nm extends gm{_toFieldTransform(e){return new Ku(e.path,new Uu)}isEqual(e){return e instanceof Nm}}function Im(e,t){if(Am(e=$s(e)))return Pm("Unsupported field value:",t,e),jm(e,t);if(e instanceof gm)return function(e,t){if(!xm(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Im(i,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=$s(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ru(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=kl.fromDate(e);return{timestampValue:Md(t.serializer,n)}}if(e instanceof kl){const n=new kl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Md(t.serializer,n)}}if(e instanceof ym)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof pm)return{bytesValue:Fd(t.serializer,e._byteString)};if(e instanceof im){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Bd(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof vm)return n=e,r=t,{mapValue:{fields:{[uc]:{stringValue:fc},[pc]:{arrayValue:{values:n.toArray().map(e=>{if("number"!=typeof e)throw r.wc("VectorValues must only contain numeric values.");return Ou(r.serializer,e)})}}}}};var n,r;throw t.wc(`Unsupported field value: ${_l(e)}`)}(e,t)}function jm(e,t){const n={};return Bl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ul(e,(e,r)=>{const i=Im(r,t.Vc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Am(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof kl||e instanceof ym||e instanceof pm||e instanceof im||e instanceof gm||e instanceof vm)}function Pm(e,t,n){if(!Am(n)||!vl(n)){const r=_l(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Om(e,t,n){if((t=$s(t))instanceof mm)return t._internalPath;if("string"==typeof t)return Rm(e,t);throw Lm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Dm=new RegExp("[~\\*/\\[\\]]");function Rm(e,t,n){if(t.search(Dm)>=0)throw Lm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new mm(...t.split("."))._internalPath}catch(r){throw Lm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Lm(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Ho(qo.INVALID_ARGUMENT,o+e+l)}function Mm(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new im(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Um("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zm extends Fm{data(){return super.data()}}function Um(e,t){return"string"==typeof t?Rm(e,t):t instanceof mm?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ho(qo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $m{}class Vm extends $m{}function qm(e,t,...n){let r=[];t instanceof $m&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof Gm).length,n=e.filter(e=>e instanceof Hm).length;if(t>1||t>0&&n>0)throw new Ho(qo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Hm extends Vm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Hm(e,t,n)}_apply(e){const t=this._parse(e);return eg(e._query,t),new rm(e.firestore,e.converter,hu(e._query,t))}_parse(e){const t=km(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ho(qo.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Zm(a,s);const t=[];for(const n of a)t.push(Jm(r,e,n));o={arrayValue:{values:t}}}else o=Jm(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Zm(a,s),o=function(e,t,n,r=!1){return Im(n,e.Dc(r?4:3,t))}(n,t,a,"in"===s||"not-in"===s);return Uc.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Wm(e,t,n){const r=t,i=Um("where",e);return Hm._create(i,r,n)}class Gm extends $m{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gm(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Bc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)eg(n,i),n=hu(n,i)}(e._query,t),new rm(e.firestore,e.converter,hu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Km extends Vm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Km(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ho(qo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ho(qo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mc(t,n)}(e._query,this._field,this._direction);return new rm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new au(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Qm(e,t="asc"){const n=t,r=Um("orderBy",e);return Km._create(r,n)}class Ym extends Vm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Ym(e,t,n)}_apply(e){return new rm(e.firestore,e.converter,fu(e._query,this._limit,this._limitType))}}function Xm(e){return function(e,t){if(t<=0)throw new Ho(qo.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}("limit",e),Ym._create("limit",e,"F")}function Jm(e,t,n){if("string"==typeof(n=$s(n))){if(""===n)throw new Ho(qo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cu(t)&&-1!==n.indexOf("/"))throw new Ho(qo.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(dl.fromString(n));if(!pl.isDocumentKey(r))throw new Ho(qo.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cc(e,new pl(r))}if(n instanceof im)return Cc(e,n._key);throw new Ho(qo.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_l(n)}.`)}function Zm(e,t){if(!Array.isArray(e)||0===e.length)throw new Ho(qo.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function eg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ho(qo.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ho(qo.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class tg{convertValue(e,t="none"){switch(mc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Uo(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ul(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[pc].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Jl(e.doubleValue));return new vm(i)}convertGeoPoint(e){return new ym(Jl(e.latitude),Jl(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=sc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ac(e));default:return null}}convertTimestamp(e){const t=Xl(e);return new kl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=dl.fromString(e);$o(oh(n),9688,{name:e});const r=new cc(n.get(1),n.get(3)),i=new pl(n.popFirst(5));return r.isEqual(t)||Mo(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class rg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ig extends Fm{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Um("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ho(qo.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ig._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}ig._jsonSchemaVersion="firestore/documentSnapshot/1.0",ig._jsonSchema={type:wl("string",ig._jsonSchemaVersion),bundleSource:wl("string","DocumentSnapshot"),bundleName:wl("string"),bundle:wl("string")};class sg extends ig{data(e={}){return super.data(e)}}class ag{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new rg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new sg(this._firestore,this._userDataWriter,n.key,n,new rg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ho(qo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new sg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new rg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new sg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:og(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ho(qo.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ag._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function og(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Uo(61501,{type:e})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(e){e=bl(e,im);const t=bl(e.firestore,hm);return function(e,t,n={}){const r=new Wo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Vp({next:o=>{s.Ou(),t.enqueueAndForget(()=>ip(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Ho(qo.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Ho(qo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new up(ou(n.path),s,{includeMetadataChanges:!0,ka:!0});return rp(e,a)}(await Qp(e),e.asyncQueue,t,n,r)),r.promise}(fm(t),e._key).then(n=>mg(t,e,n))}ag._jsonSchemaVersion="firestore/querySnapshot/1.0",ag._jsonSchema={type:wl("string",ag._jsonSchemaVersion),bundleSource:wl("string","QuerySnapshot"),bundleName:wl("string"),bundle:wl("string")};class cg extends tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new pm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new im(this.firestore,null,t)}}function ug(e){e=bl(e,rm);const t=bl(e.firestore,hm),n=fm(t),r=new cg(t);return Bm(e._query),function(e,t,n={}){const r=new Wo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Vp({next:n=>{s.Ou(),t.enqueueAndForget(()=>ip(e,a)),n.fromCache&&"server"===r.source?i.reject(new Ho(qo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new up(n,s,{includeMetadataChanges:!0,ka:!0});return rp(e,a)}(await Qp(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new ag(t,r,e,n))}function dg(e,t,n,...r){e=bl(e,im);const i=bl(e.firestore,hm),s=km(i);let a;return a="string"==typeof(t=$s(t))||t instanceof mm?function(e,t,n,r,i,s){const a=e.Dc(1,t,n),o=[Om(t,r,n)],l=[i];if(s.length%2!=0)throw new Ho(qo.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(Om(t,s[h])),l.push(s[h+1]);const c=[],u=Ac.empty();for(let h=o.length-1;h>=0;--h)if(!Mm(c,o[h])){const e=o[h];let t=l[h];t=$s(t);const n=a.gc(e);if(t instanceof Tm)c.push(e);else{const r=Im(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Gl(c);return new wm(u,d,a.fieldTransforms)}(s,"updateDoc",e._key,t,n,r):function(e,t,n,r){const i=e.Dc(1,t,n);Pm("Data must be an object, but it was:",i,r);const s=[],a=Ac.empty();Ul(r,(e,r)=>{const o=Rm(t,e,n);r=$s(r);const l=i.gc(o);if(r instanceof Tm)s.push(o);else{const e=Im(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new Gl(s);return new wm(a,o,i.fieldTransforms)}(s,"updateDoc",e._key,t),pg(i,[a.toMutation(e._key,Yu.exists(!0))])}function hg(e){return pg(bl(e.firestore,hm),[new cd(e._key,Yu.none())])}function fg(e,t){const n=bl(e.firestore,hm),r=om(e),i=ng(e.converter,t);return pg(n,[Em(km(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Yu.exists(!1))]).then(()=>r)}function pg(e,t){return function(e,t){const n=new Wo;return e.asyncQueue.enqueueAndForget(async()=>Sp(await function(e){return Kp(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(fm(e),t)}function mg(e,t,n){const r=n.docs.get(t._key),i=new cg(e);return new ig(e,i,t._key,r,new rg(n.hasPendingWrites,n.fromCache),t.converter)}function gg(){return new Nm("serverTimestamp")}function yg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function vg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}!function(e,t=!0){Oo=ro,Ja(new Vs("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new hm(new Yo(e.getProvider("auth-internal")),new el(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ho(qo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),ao(jo,Ao,e),ao(jo,Ao,"esm2017")}(),"function"==typeof SuppressedError&&SuppressedError;const _g=vg,bg=new Os("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),wg=new Zs("@firebase/auth");function xg(e,...t){wg.logLevel<=Gs.ERROR&&wg.error(`Auth (${ro}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(e,...t){throw Tg(e,...t)}function Cg(e,...t){return Tg(e,...t)}function kg(e,t,n){const r=Object.assign(Object.assign({},_g()),{[t]:n});return new Os("auth","Firebase",r).create(t,{appName:e.name})}function Eg(e){return kg(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tg(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return bg.create(e,...t)}function Ng(e,t,...n){if(!e)throw Tg(t,...n)}function Ig(e){const t="INTERNAL ASSERTION FAILED: "+e;throw xg(t),new Error(t)}function jg(e,t){e||Ig(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Pg(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Pg()&&"https:"!==Pg()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dg{constructor(e,t){this.shortDelay=e,this.longDelay=t,jg(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(js())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Og()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(e,t){jg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Ig("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Ig("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Ig("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fg=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zg=new Dg(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Bg(e,t,n,r,i={}){return $g(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=Ms(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&ks(e.emulatorConfig.host)&&(l.credentials="include"),Lg.fetch()(await qg(e,e.config.apiHost,n,a),l)})}async function $g(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Mg),t);try{const t=new Wg(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Gg(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Gg(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Gg(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Gg(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw kg(e,o,a);Sg(e,o)}}catch(XD){if(XD instanceof Ps)throw XD;Sg(e,"network-request-failed",{message:String(XD)})}}async function Vg(e,t,n,r,i={}){const s=await Bg(e,t,n,r,i);return"mfaPendingCredential"in s&&Sg(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function qg(e,t,n,r){const i=`${t}${n}?${r}`,s=e,a=s.config.emulator?Rg(e.config,i):`${e.config.apiScheme}://${i}`;if(Fg.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function Hg(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wg{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Cg(this.auth,"network-request-failed")),zg.get())})}}function Gg(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Cg(e,t,r);return i.customData._tokenResponse=n,i}function Kg(e){return void 0!==e&&void 0!==e.enterprise}class Qg{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Hg(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Yg(e,t){return Bg(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(XD){}}function Jg(e){return 1e3*Number(e)}function Zg(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return xg("JWT malformed, contained fewer than 3 sections"),null;try{const e=vs(n);return e?JSON.parse(e):(xg("Failed to decode base64 JWT payload"),null)}catch(XD){return xg("Caught error parsing JWT payload as JSON",null==XD?void 0:XD.toString()),null}}function ey(e){const t=Zg(e);return Ng(t,"internal-error"),Ng(void 0!==t.exp,"internal-error"),Ng(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(e,t,n=!1){if(n)return t;try{return await t}catch(XD){throw XD instanceof Ps&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(XD)&&e.auth.currentUser===e&&await e.auth.signOut(),XD}}class ny{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(XD){return void("auth/network-request-failed"===(null==XD?void 0:XD.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xg(this.lastLoginAt),this.creationTime=Xg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iy(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ty(e,Yg(n,{idToken:r}));Ng(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?sy(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==o?void 0:o.length)),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ry(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function sy(e){return e.map(e=>{var{providerId:t}=e,n=yg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ay{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ng(e.idToken,"internal-error"),Ng(void 0!==e.idToken,"internal-error"),Ng(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):ey(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ng(0!==e.length,"internal-error");const t=ey(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Ng(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await $g(e,{},async()=>{const n=Ms({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await qg(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&ks(e.emulatorConfig.host)&&(o.credentials="include"),Lg.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ay;return n&&(Ng("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ng("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ng("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ay,this.toJSON())}_performRefresh(){return Ig("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(e,t){Ng("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ly{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=yg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ny(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ry(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ty(this,this.stsTokenManager.getToken(this.auth,e));return Ng(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=$s(e),r=await n.getIdToken(t),i=Zg(r);Ng(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xg(Jg(i.auth_time)),issuedAtTime:Xg(Jg(i.iat)),expirationTime:Xg(Jg(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=$s(e);await iy(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ng(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ly(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ng(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await iy(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(eo(this.auth.app))return Promise.reject(Eg(this.auth));const e=await this.getIdToken();return await ty(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return Bg(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:x}=t;Ng(v&&x,e,"internal-error");const S=ay.fromJSON(this.name,x);Ng("string"==typeof v,e,"internal-error"),oy(u,e.name),oy(d,e.name),Ng("boolean"==typeof _,e,"internal-error"),Ng("boolean"==typeof b,e,"internal-error"),oy(h,e.name),oy(f,e.name),oy(p,e.name),oy(m,e.name),oy(g,e.name),oy(y,e.name);const C=new ly({uid:v,auth:e,email:d,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(C.providerData=w.map(e=>Object.assign({},e))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t,n=!1){const r=new ay;r.updateFromServerResponse(t);const i=new ly({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await iy(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ng(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?sy(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),a=new ay;a.updateFromIdToken(n);const o=new ly({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ry(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(o,l),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;function uy(e){jg(e instanceof Function,"Expected a class definition");let t=cy.get(e);return t?(jg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cy.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dy.type="NONE";const hy=dy;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(e,t,n){return`firebase:${e}:${t}:${n}`}class py{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fy(this.userKey,r.apiKey,i),this.fullPersistenceKey=fy("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await Yg(this.auth,{idToken:e}).catch(()=>{});return t?ly._fromGetAccountInfoResponse(this.auth,t,e):null}return ly._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new py(uy(hy),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||uy(hy);const s=fy(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"==typeof t){const r=await Yg(e,{idToken:t}).catch(()=>{});if(!r)break;n=await ly._fromGetAccountInfoResponse(e,r,t)}else n=ly._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new py(i,e,n)):new py(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_y(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gy(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wy(t))return"Blackberry";if(xy(t))return"Webos";if(yy(t))return"Safari";if((t.includes("chrome/")||vy(t))&&!t.includes("edge/"))return"Chrome";if(by(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function gy(e=js()){return/firefox\//i.test(e)}function yy(e=js()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function vy(e=js()){return/crios\//i.test(e)}function _y(e=js()){return/iemobile/i.test(e)}function by(e=js()){return/android/i.test(e)}function wy(e=js()){return/blackberry/i.test(e)}function xy(e=js()){return/webos/i.test(e)}function Sy(e=js()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Cy(){return function(){const e=js();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ky(e=js()){return Sy(e)||by(e)||xy(e)||wy(e)||/windows phone/i.test(e)||_y(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(e,t=[]){let n;switch(e){case"Browser":n=my(js());break;case"Worker":n=`${my(js())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ro}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(XD){r(XD)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(XD){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==XD?void 0:XD.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ay(this),this.idTokenSubscription=new Ay(this),this.beforeStateQueue=new Ty(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=uy(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await py.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(XD){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Yg(this,{idToken:e}),n=await ly._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(eo(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(XD){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(XD))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ng(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(XD){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await iy(e)}catch(XD){if("auth/network-request-failed"!==(null==XD?void 0:XD.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(eo(this.app))return Promise.reject(Eg(this));const t=e?$s(e):null;return t&&Ng(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ng(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return eo(this.app)?Promise.reject(Eg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return eo(this.app)?Promise.reject(Eg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(uy(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Bg(e,"GET","/v2/passwordPolicy",Ug(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new Ny(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Os("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Bg(e,"POST","/v2/accounts:revokeToken",Ug(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&uy(e)||this._popupRedirectResolver;Ng(t,this,"argument-error"),this.redirectPersistenceManager=await py.create(this,[uy(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ng(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ng(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ey(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(eo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){wg.logLevel<=Gs.WARN&&wg.warn(`Auth (${ro}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function jy(e){return $s(e)}class Ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Us(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Ng(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Py={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Oy(e){return Py.loadJS(e)}class Dy{constructor(){this.enterprise=new Ry}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ry{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ly="NO_RECAPTCHA";class My{constructor(e){this.type="recaptcha-enterprise",this.auth=jy(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{(async function(e,t){return Bg(e,"GET","/v2/recaptchaConfig",Ug(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Qg(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})}function r(t,n,r){const i=window.grecaptcha;Kg(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ly)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Dy).execute("siteKey",{action:"verify"})}return new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&Kg(window.grecaptcha))r(n,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=Py.recaptchaEnterpriseScript;0!==t.length&&(t+=n),Oy(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function Fy(e,t,n,r=!1,i=!1){const s=new My(e);let a;if(i)a=Ly;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function zy(e,t,n,r,i){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Fy(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Fy(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(e,t,n){const r=jy(e);Ng(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=By(t),{host:s,port:a}=function(e){const t=By(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:$y(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:$y(t)}}}(t),o=null===a?"":`:${a}`,l={url:`${i}//${s}${o}/`},c=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!r._canInitEmulator)return Ng(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Ng(Rs(l,r.config.emulator)&&Rs(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,ks(s)?(Es(`${i}//${s}${o}`),Is("Auth",!0)):function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function By(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $y(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Vy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ig("not implemented")}_getIdTokenResponse(e){return Ig("not implemented")}_linkToIdToken(e,t){return Ig("not implemented")}_getReauthenticationResolver(e){return Ig("not implemented")}}async function qy(e,t){return Bg(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hy(e,t){return Vg(e,"POST","/v1/accounts:signInWithPassword",Ug(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Wy extends Vy{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Wy(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Wy(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return zy(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Hy);case"emailLink":return async function(e,t){return Vg(e,"POST","/v1/accounts:signInWithEmailLink",Ug(e,t))}(e,{email:this._email,oobCode:this._password});default:Sg(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return zy(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qy);case"emailLink":return async function(e,t){return Vg(e,"POST","/v1/accounts:signInWithEmailLink",Ug(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Sg(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gy(e,t){return Vg(e,"POST","/v1/accounts:signInWithIdp",Ug(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky extends Vy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ky(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sg("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=yg(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ky(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Gy(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Gy(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gy(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ms(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){var t,n,r,i,s,a;const o=Fs(zs(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Ng(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Fs(zs(e)).link,n=t?Fs(zs(t)).deep_link_id:null,r=Fs(zs(e)).deep_link_id;return(r?Fs(zs(r)).link:null)||r||n||t||e}(e);try{return new Qy(t)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.providerId=Yy.PROVIDER_ID}static credential(e,t){return Wy._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Qy.parseLink(t);return Ng(n,"argument-error"),Wy._fromEmailAndCode(e,n.code,n.tenantId)}}Yy.PROVIDER_ID="password",Yy.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Yy.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy extends Xy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Jy{constructor(){super("facebook.com")}static credential(e){return Ky._fromParams({providerId:Zy.PROVIDER_ID,signInMethod:Zy.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zy.credentialFromTaggedObject(e)}static credentialFromError(e){return Zy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Zy.credential(e.oauthAccessToken)}catch(t){return null}}}Zy.FACEBOOK_SIGN_IN_METHOD="facebook.com",Zy.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ev extends Jy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ky._fromParams({providerId:ev.PROVIDER_ID,signInMethod:ev.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ev.credentialFromTaggedObject(e)}static credentialFromError(e){return ev.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return ev.credential(t,n)}catch(r){return null}}}ev.GOOGLE_SIGN_IN_METHOD="google.com",ev.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class tv extends Jy{constructor(){super("github.com")}static credential(e){return Ky._fromParams({providerId:tv.PROVIDER_ID,signInMethod:tv.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tv.credentialFromTaggedObject(e)}static credentialFromError(e){return tv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return tv.credential(e.oauthAccessToken)}catch(t){return null}}}tv.GITHUB_SIGN_IN_METHOD="github.com",tv.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nv extends Jy{constructor(){super("twitter.com")}static credential(e,t){return Ky._fromParams({providerId:nv.PROVIDER_ID,signInMethod:nv.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nv.credentialFromTaggedObject(e)}static credentialFromError(e){return nv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return nv.credential(t,n)}catch(r){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function rv(e,t){return Vg(e,"POST","/v1/accounts:signUp",Ug(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nv.TWITTER_SIGN_IN_METHOD="twitter.com",nv.PROVIDER_ID="twitter.com";class iv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await ly._fromIdTokenResponse(e,n,r),s=sv(n);return new iv({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=sv(n);return new iv({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function sv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av extends Ps{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,av.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new av(e,t,n,r)}}function ov(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw av._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function lv(e,t,n=!1){if(eo(e.app))return Promise.reject(Eg(e));const r="signIn",i=await ov(e,r,t),s=await iv._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function cv(e){const t=jy(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function uv(e,t,n){return eo(e.app)?Promise.reject(Eg(e)):async function(e,t){return lv(jy(e),t)}($s(e),Yy.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&cv(e),t})}const dv="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dv,"1"),this.storage.removeItem(dv),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ky(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Cy()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fv.type="LOCAL";const pv=fv;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mv.type="SESSION";const gv=mv;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new yv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vv(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yv.receivers=[];class _v{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=vv("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wv(){return void 0!==bv().WorkerGlobalScope&&"function"==typeof bv().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xv="firebaseLocalStorageDb",Sv="firebaseLocalStorage",Cv="fbase_key";class kv{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ev(e,t){return e.transaction([Sv],t?"readwrite":"readonly").objectStore(Sv)}function Tv(){const e=indexedDB.open(xv,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Sv,{keyPath:Cv})}catch(XD){n(XD)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Sv)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(xv);return new kv(e).toPromise()}(),t(await Tv()))})})}async function Nv(e,t,n){const r=Ev(e,!0).put({[Cv]:t,value:n});return new kv(r).toPromise()}function Iv(e,t){const n=Ev(e,!0).delete(t);return new kv(n).toPromise()}class jv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Tv()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(XD){if(t++>3)throw XD;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yv._getInstance(wv()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new _v(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tv();return await Nv(e,dv,"1"),await Iv(e,dv),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nv(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ev(e,!1).get(t),r=await new kv(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Iv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ev(e,!1).getAll();return new kv(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}jv.type="LOCAL";const Av=jv;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pv(e,t){return t?uy(t):(Ng(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Dg(3e4,6e4);class Ov extends Vy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gy(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Dv(e){return lv(e.auth,new Ov(e),e.bypassAuthState)}function Rv(e){const{auth:t,user:n}=e;return Ng(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:r}=e;if(eo(r.app))return Promise.reject(Eg(r));const i="reauthenticate";try{const s=await ty(e,ov(r,i,t,e),n);Ng(s.idToken,r,"internal-error");const a=Zg(s.idToken);Ng(a,r,"internal-error");const{sub:o}=a;return Ng(e.uid===o,r,"user-mismatch"),iv._forOperation(e,i,s)}catch(XD){throw"auth/user-not-found"===(null==XD?void 0:XD.code)&&Sg(r,"user-mismatch"),XD}}(n,new Ov(e),e.bypassAuthState)}async function Lv(e){const{auth:t,user:n}=e;return Ng(n,t,"internal-error"),async function(e,t,n=!1){const r=await ty(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return iv._forOperation(e,"link",r)}(n,new Ov(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(XD){this.reject(XD)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(XD){this.reject(XD)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dv;case"linkViaPopup":case"linkViaRedirect":return Lv;case"reauthViaPopup":case"reauthViaRedirect":return Rv;default:Sg(this.auth,"internal-error")}}resolve(e){jg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Dg(2e3,1e4);async function zv(e,t,n){if(eo(e.app))return Promise.reject(Cg(e,"operation-not-supported-in-this-environment"));const r=jy(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Sg(e,"argument-error"),kg(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,Xy);const i=Pv(r,n);return new Uv(r,"signInViaPopup",t,i).executeNotNull()}class Uv extends Mv{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Uv.currentPopupAction&&Uv.currentPopupAction.cancel(),Uv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ng(e,this.auth,"internal-error"),e}async onExecution(){jg(1===this.filter.length,"Popup operations only handle one event");const e=vv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Cg(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Cg(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uv.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cg(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Fv.get())};e()}}Uv.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Bv="pendingRedirect",$v=new Map;class Vv extends Mv{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=$v.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return fy(Bv,e.config.apiKey,e.name)}(t),r=function(e){return uy(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(XD){e=()=>Promise.reject(XD)}$v.set(this.auth._key(),e)}return this.bypassAuthState||$v.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function qv(e,t){$v.set(e._key(),t)}async function Hv(e,t,n=!1){if(eo(e.app))return Promise.reject(Eg(e));const r=jy(e),i=Pv(r,t),s=new Vv(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kv(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Kv(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Cg(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gv(e))}saveEventToCache(e){this.cachedEventUids.add(Gv(e)),this.lastProcessedEventTime=Date.now()}}function Gv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Kv({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Qv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yv=/^https?/;async function Xv(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Bg(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(Jv(r))return}catch(n){}Sg(e,"unauthorized-domain")}function Jv(e){const t=Ag(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Yv.test(n))return!1;if(Qv.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=new Dg(3e4,6e4);function e_(){const e=bv().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function t_(e){return new Promise((t,n)=>{var r,i,s;function a(){e_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{e_(),n(Cg(e,"network-request-failed"))},timeout:Zv.get()})}if(null===(i=null===(r=bv().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=bv().gapi)||void 0===s?void 0:s.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return bv()[t]=()=>{gapi.load?a():n(Cg(e,"network-request-failed"))},Oy(`${Py.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw n_=null,e})}let n_=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r_=new Dg(5e3,15e3),i_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a_(e){const t=e.config;Ng(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Rg(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:ro},i=s_.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ms(r).slice(1)}`}async function o_(e){const t=await function(e){return n_=n_||t_(e),n_}(e),n=bv().gapi;return Ng(n,e,"internal-error"),t.open({where:document.body,url:a_(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:i_,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Cg(e,"network-request-failed"),s=bv().setTimeout(()=>{r(i)},r_.get());function a(){bv().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class c_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(XD){}}}function u_(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},l_),{width:r.toString(),height:i.toString(),top:s,left:a}),c=js().toLowerCase();n&&(o=vy(c)?"_blank":n),gy(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=js()){var t;return Sy(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new c_(null);const d=window.open(t||"",o,u);Ng(d,e,"popup-blocked");try{d.focus()}catch(XD){}return new c_(d)}const d_="__/auth/handler",h_="emulator/auth/handler",f_=encodeURIComponent("fac");async function p_(e,t,n,r,i,s){Ng(e.config.authDomain,e,"auth-domain-config-required"),Ng(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ro,eventId:i};if(t instanceof Xy){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))a[e]=t}if(t instanceof Jy){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${f_}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${d_}`;return Rg(e,h_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${Ms(o).slice(1)}${c}`}const m_="webStorageSupport";const g_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gv,this._completeRedirectFn=Hv,this._overrideRedirectResult=qv}async _openPopup(e,t,n,r){var i;jg(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return u_(e,await p_(e,t,n,Ag(),r),vv())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){bv().location.href=e}(await p_(e,t,n,Ag(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(jg(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await o_(e),n=new Wv(e);return t.register("authEvent",t=>{Ng(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(m_,{type:m_},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[m_];void 0!==i&&t(!!i),Sg(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Xv(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ky()||yy()||Sy()}};var y_="@firebase/auth",v_="1.10.8";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class __{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ng(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const b_=Ss("authIdTokenMaxAge")||300;let w_=null;var x_;Py={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Cg("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},x_="Browser",Ja(new Vs("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;Ng(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:s,authDomain:a,clientPlatform:x_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ey(x_)},l=new Iy(n,r,i,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(uy);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ja(new Vs("auth-internal",e=>{const t=jy(e.getProvider("auth").getImmediate());return new __(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(y_,v_,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(x_)),ao(y_,v_,"esm2017");const S_=io({apiKey:"AIzaSyBPwtNs87fufXOjTBFIchkA-897GnFh2j4",authDomain:"originbythesea.firebaseapp.com",projectId:"originbythesea",storageBucket:"originbythesea.firebasestorage.app",messagingSenderId:"156608754022",appId:"1:156608754022:web:4e0bf895e39ae909b758a7"}),C_=function(e){const t="object"==typeof e?e:so(),n="string"==typeof e?e:lc,r=Za(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=ws(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&nm(r,...e)}return r}(S_),k_=function(e=so()){const t=Za(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Za(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Rs(n.getOptions(),null!=t?t:{}))return e;Sg(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:g_,persistence:[Av,pv,gv]}),r=Ss("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>b_)return;const r=null==t?void 0:t.token;w_!==r&&(w_=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){$s(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){$s(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=ws("auth");return s&&Uy(n,`http://${s}`),n}(S_),E_=is("home/fetchHomePageData",async(e,{rejectWithValue:t})=>{try{console.log(" Starting centralized home page data fetch");const e={hero:null,collections:[],featuredProducts:[]};console.log(" Fetching hero section data");const t=await lg(om(C_,"settings","hero_section"));if(t.exists()){const n=t.data();e.hero={title:n.title||"Designed by Hands, Loved by Hearts.",buttonText:n.buttonText||"SHOP NOW",subtitle:n.subtitle||"Designed by Hands, Loved by Hearts.",description:n.description||"SHOP NOW",backgroundVideo:n.backgroundVideo||"",backgroundImage:n.backgroundImage||"/images/hero-banner.jpg"}}console.log(" Hero data fetched successfully"),console.log(" Fetching collections data");const n=am(C_,"collections"),r=await ug(n);e.collections=r.docs.map(e=>({id:e.id,...e.data()})),console.log(` Fetched ${e.collections.length} collections`),console.log(" Fetching featured products");const i=qm(am(C_,"products"),Qm("created_at","desc"),Xm(8)),s=await ug(i);return e.featuredProducts=s.docs.map(e=>{const t=e.data();return{id:e.id,...t,image:t.images&&t.images.length>0?t.images[0]:"/images/placeholder.jpg",hoverImage:t.images&&t.images.length>1?t.images[1]:t.images&&t.images.length>0?t.images[0]:"/images/placeholder.jpg",price:t.price?`AED ${t.price}`:"Price not available",rawPrice:t.price||0,name:t.name||"Product Name"}}),console.log(` Fetched ${e.featuredProducts.length} featured products`),console.log(" All home page data fetched successfully!"),e}catch(n){return console.error(" Error fetching home page data:",n),t(n.message)}}),T_=us({name:"home",initialState:{hero:null,collections:[],featuredProducts:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(E_.pending,e=>{e.status="loading",console.log(" Home page data loading...")}).addCase(E_.fulfilled,(e,t)=>{e.status="succeeded",e.hero=t.payload.hero,e.collections=t.payload.collections,e.featuredProducts=t.payload.featuredProducts,console.log(" Home page data loaded into Redux store")}).addCase(E_.rejected,(e,t)=>{e.status="failed",e.error=t.payload,console.error(" Failed to load home page data:",t.payload)})}}).reducer,N_="_hero_rmz8i_1",I_="_heroVideo_rmz8i_15",j_="_heroImage_rmz8i_47",A_="_heroOverlay_rmz8i_75",P_="_heroContent_rmz8i_99",O_="_shopNowButton_rmz8i_143",D_="_loading_rmz8i_241",R_="_shimmerWrapper_rmz8i_257",L_="_shimmerBg_rmz8i_285",M_="_shimmerTitle_rmz8i_317",F_="_shimmerButton_rmz8i_337",z_=is("hero/fetchHeroData",async()=>{const e=await lg(om(C_,"settings","hero_section"));if(e.exists()){const t=e.data();return{title:t.title||"Designed by Hands, Loved by Hearts.",buttonText:t.buttonText||"SHOP NOW",subtitle:t.subtitle||"Designed by Hands, Loved by Hearts.",description:t.description||"SHOP NOW",backgroundVideo:t.backgroundVideo||"",backgroundImage:t.backgroundImage||"/images/hero-banner.jpg"}}throw new Error("Hero section data not found")}),U_=us({name:"hero",initialState:{data:null,isLoading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(z_.pending,e=>{e.isLoading=!0}).addCase(z_.fulfilled,(e,t)=>{e.data=t.payload,e.isLoading=!1}).addCase(z_.rejected,(e,t)=>{e.error=t.error.message,e.isLoading=!1})}}).reducer,B_="_luxurySection_1ykbt_1",$_="_container_1ykbt_11",V_="_heading_1ykbt_29",q_="_description_1ykbt_55",H_=({subtitle:e,description:t})=>(console.log(`this is subtitle ${e} and descrition ${t}`),m.jsxs("section",{className:B_,children:[m.jsx("h2",{className:V_,children:e}),m.jsx("div",{className:$_,children:m.jsx("p",{className:q_,children:t})})]})),W_=()=>{const e=g.useRef(null),t=g.useRef(null),[n,r]=g.useState(!1),i=zr(),{data:s,isLoading:a}=$r(e=>e.hero);return g.useEffect(()=>{s?setTimeout(()=>{r(!0)},500):i(z_())},[s,i]),g.useEffect(()=>{const n=e.current,r=t.current,i=()=>{r&&(r.style.display="block")};return n&&(n.addEventListener("error",i),n.addEventListener("stalled",i)),()=>{n&&(n.removeEventListener("error",i),n.removeEventListener("stalled",i))}},[]),a||!s?m.jsxs("div",{className:D_,children:[m.jsx("div",{className:L_}),m.jsxs("div",{className:R_,children:[m.jsx("div",{className:M_}),m.jsx("div",{className:F_})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:N_,children:[m.jsx("div",{className:A_}),s.backgroundVideo&&m.jsx("video",{ref:e,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:I_,style:{opacity:n?void 0:0},onLoadedData:()=>r(!0),children:m.jsx("source",{src:s.backgroundVideo,type:"video/mp4"})}),m.jsx("img",{ref:t,src:s.backgroundImage,alt:"Hero banner",className:j_,style:{opacity:n?void 0:0},onLoad:()=>r(!0)}),m.jsxs("div",{className:P_,style:{opacity:n?void 0:0},children:[m.jsx("h1",{children:s.title}),m.jsx(lt,{to:"/shop",className:O_,children:s.buttonText})]})]}),m.jsx(H_,{subtitle:s.subtitle,description:s.description})]})},G_="_collectionsSection_672o7_1",K_="_title_672o7_19",Q_="_sliderContainer_672o7_43",Y_="_collectionsGrid_672o7_57",X_="_collectionCard_672o7_75",J_="_collectionLink_672o7_103",Z_="_collectionImage_672o7_115",eb="_overlay_672o7_127",tb="_collectionTitle_672o7_145",nb="_sliderButton_672o7_173",rb="_prevButton_672o7_219",ib="_nextButton_672o7_227",sb="_shimmer_672o7_289";var ab={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ob=y.createContext&&y.createContext(ab),lb=["attr","size","title"];function cb(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ub.apply(this,arguments)}function db(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?db(Object(n),!0).forEach(function(t){fb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):db(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fb(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pb(e){return e&&e.map((e,t)=>y.createElement(e.tag,hb({key:t},e.attr),pb(e.child)))}function mb(e){return t=>y.createElement(gb,ub({attr:hb({},e.attr)},t),pb(e.child))}function gb(e){var t=t=>{var n,{attr:r,size:i,title:s}=e,a=cb(e,lb),o=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),y.createElement("svg",ub({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:hb(hb({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&y.createElement("title",null,s),e.children)};return void 0!==ob?y.createElement(ob.Consumer,null,e=>t(e)):t(ab)}function yb(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"},child:[]}]})(e)}function vb(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(e)}function _b(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(e)}const bb=()=>{const e=we(),[t,n]=g.useState(0),[r,i]=g.useState(window.innerWidth<=900),{collections:s,status:a}=$r(e=>e.home),o="loading"===a||"idle"===a;g.useEffect(()=>{const e=()=>{i(window.innerWidth<=900),n(0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);return o?m.jsxs("section",{className:G_,children:[m.jsxs("h2",{className:K_,children:["OUR ",m.jsx("span",{style:{color:"#E6994B"},children:"COLLECTIONS"})]}),m.jsx("div",{className:Y_,children:[1,2,3].map((e,t)=>m.jsx("div",{className:`${X_} ${sb}`},t))})]}):m.jsxs("section",{className:G_,children:[m.jsxs("h2",{className:K_,children:["OUR ",m.jsx("span",{style:{color:"#E6994B"},children:"COLLECTIONS"})]}),m.jsxs("div",{className:Q_,children:[!r&&t>0&&m.jsx("button",{className:`${nb} ${rb}`,onClick:()=>{t>0&&n(e=>e-1)},"aria-label":"Previous collections",children:m.jsx(yb,{})}),m.jsx("div",{className:Y_,style:r?void 0:{transform:`translateX(-${t*(100/s.length)}%)`},children:s.map(t=>m.jsx("div",{className:X_,onClick:()=>{return n=t.id,e(`/shop?id=${n}`),void window.scrollTo(0,0);var n},children:m.jsxs("div",{className:J_,children:[m.jsx("img",{src:t.image,alt:t.name,className:Z_}),m.jsx("div",{className:eb}),m.jsx("h3",{className:tb,children:t.name})]})},t.id))}),!r&&t<s.length-3&&m.jsx("button",{className:`${nb} ${ib}`,onClick:()=>{t<s.length-3&&n(e=>e+1)},"aria-label":"Next collections",children:m.jsx(vb,{})})]})]})},wb="_productSection_1ycky_1",xb="_title_1ycky_7",Sb="_gridContainer_1ycky_14",Cb="_viewMore_1ycky_20",kb="_viewMoreWrapper_1ycky_34",Eb="_shimmerCard_1ycky_39",Tb="_shimmerImage_1ycky_49",Nb="_shimmerTitle_1ycky_58",Ib="_shimmerPrice_1ycky_67",jb="_container_h093e_1",Ab="_navbarContainer_h093e_9",Pb="_logo_h093e_33",Ob="_navList_h093e_43",Db="_navItem_h093e_53",Rb="_navLink_h093e_65";function Lb(e){return mb({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l1.25 5h8.22l1.25-5zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"},child:[]}]})(e)}function Mb(e){return mb({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"},child:[]}]})(e)}function Fb(e){return mb({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"},child:[]}]})(e)}function zb(e){return mb({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(e)}const Ub=({size:e=20,color:t="currentColor",filled:n=!1})=>m.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:n?t:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Bb=()=>{const e=we(),t=(t,n)=>{t.ctrlKey||t.metaKey||(t.preventDefault(),e(n),window.scrollTo(0,0))};return m.jsx("nav",{className:jb,children:m.jsxs("div",{className:Ab,children:[m.jsx(lt,{to:"/",onClick:e=>t(e,"/"),children:m.jsx("img",{className:Pb,src:"/images/logo.png",alt:"logo"})}),m.jsxs("ul",{className:Ob,children:[m.jsx("li",{className:Db,children:m.jsxs(lt,{to:"/account",className:Rb,onClick:e=>t(e,"/account"),children:[m.jsx(zb,{size:20}),m.jsx("span",{children:"Account"})]})}),m.jsx("li",{className:Db,children:m.jsxs(lt,{to:"/favorites",className:Rb,onClick:e=>t(e,"/favorites"),children:[m.jsx(Ub,{size:20}),m.jsx("span",{children:"Favorites"})]})}),m.jsx("li",{className:Db,children:m.jsxs(lt,{to:"/cart",className:Rb,onClick:e=>t(e,"/cart"),children:[m.jsx(Lb,{size:20}),m.jsx("span",{children:"Cart"})]})})]})]})})};function $b(e){return mb({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 6h16v2H4zm4 5h12v2H8zm5 5h7v2h-7z"},child:[]}]})(e)}function Vb(e){return mb({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(e)}const qb="_overlay_1e15d_3",Hb="_menu_1e15d_41",Wb="_menuHeader_1e15d_93",Gb="_menuDivider_1e15d_109",Kb="_closeButton_1e15d_127",Qb="_menuLogo_1e15d_151",Yb="_menuList_1e15d_165",Xb="_menuLink_1e15d_185",Jb=[{name:"Dresses",path:"/shop?id=3",category:""},{name:"Swimwear",path:"/shop?id=1",category:""},{name:"Crop Top",path:"/shop?id=2",category:""},{name:"Shop",path:"/shop",category:""},{name:"About",path:"/about",category:""},{name:"Favorites",path:"/favorites",category:""}],Zb=({isOpen:e,toggleMenu:t})=>{const n=we();if(!e)return null;return m.jsx("div",{className:qb,onClick:t,children:m.jsxs("div",{className:Hb,onClick:e=>e.stopPropagation(),children:[m.jsxs("div",{className:Wb,children:[m.jsx(lt,{to:"/",onClick:()=>{t(),window.scrollTo(0,0)},children:m.jsx("img",{className:Qb,src:"/images/logo.png",alt:"Origins by the Sea"})}),m.jsx("div",{className:Kb,onClick:t,children:m.jsx(Vb,{size:24})})]}),m.jsx("hr",{className:Gb}),m.jsx("nav",{children:m.jsx("ul",{className:Yb,children:Jb.map((e,r)=>m.jsx("li",{children:m.jsxs("div",{className:Xb,onClick:()=>((e,r)=>{const i=r?`${e}?category=${r}`:e;t(),n(i),window.scrollTo(0,0)})(e.path,e.category),children:[e.name," ",m.jsx("span",{children:""})]})},r))})})]})})},ew="_container_ju8bs_1",tw="_navbarContainer_ju8bs_9",nw="_logoContainer_ju8bs_18",rw="_logo_ju8bs_18",iw="_searchContainer_ju8bs_29",sw="_loginIcon_ju8bs_109",aw="_cartIcon_ju8bs_116",ow="_menuButton_ju8bs_123",lw="_navList_ju8bs_128",cw="_navItem_ju8bs_138",uw="_navLink_ju8bs_142",dw="_favoriteIcon_ju8bs_187",hw=[{name:"Home",path:"/"},{name:"Shop",path:"/shop"},{name:"About",path:"/about"},{name:"Dresses",path:"/shop?id=3"},{name:"Swimwear",path:"/shop?id=1"},{name:"Crop Top",path:"/shop?id=2"}],fw=()=>{const[e,t]=g.useState(!1),n=we(),r=$r(e=>e.favorites.favorites).length,i=$r(e=>e.cart.cartItems).length,s=()=>t(!e),a=(e,t)=>{e.ctrlKey||e.metaKey||(e.preventDefault(),n(t),window.scrollTo(0,0))},o={position:"absolute",top:"-8px",right:"-8px",backgroundColor:"#e6994b",color:"white",borderRadius:"50%",width:"16px",height:"16px",fontSize:"10px",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold"};return m.jsxs(m.Fragment,{children:[m.jsx("header",{className:ew,children:m.jsxs("div",{className:tw,children:[m.jsxs("div",{className:iw,children:[m.jsx(lt,{to:"/favorites",className:dw,onClick:e=>a(e,"/favorites"),"aria-label":"Favorites",children:m.jsxs("div",{style:{position:"relative"},children:[m.jsx(Ub,{size:22,color:"currentColor"}),r>0&&m.jsx("span",{style:o,children:r>99?"99+":r})]})}),m.jsx(lt,{to:"/account",className:sw,onClick:e=>a(e,"/account"),"aria-label":"Account",children:m.jsx(zb,{size:22})}),m.jsx(lt,{to:"/cart",className:aw,onClick:e=>a(e,"/cart"),"aria-label":"Cart",children:m.jsxs("div",{style:{position:"relative"},children:[m.jsx(Lb,{size:22}),i>0&&m.jsx("span",{style:o,children:i>99?"99+":i})]})})]}),m.jsx(lt,{to:"/",className:nw,onClick:e=>a(e,"/"),children:m.jsx("img",{className:rw,src:"/images/logo.png",alt:"Website Logo"})}),m.jsx("div",{className:ow,onClick:s,children:m.jsx($b,{size:28})}),m.jsx("ul",{className:lw,children:hw.map((e,t)=>m.jsx("li",{className:cw,children:m.jsx(ct,{to:e.path,end:"/"===e.path,className:uw,onClick:t=>a(t,e.path),children:e.name})},t))})]})}),m.jsx(Zb,{isOpen:e,toggleMenu:s})]})},pw={footerContainer:"_footerContainer_1ywtd_1",footer:"_footer_1ywtd_1",footerTitle:"_footerTitle_1ywtd_35",quickLinks:"_quickLinks_1ywtd_69",contactInfo:"_contactInfo_1ywtd_71",quickLink:"_quickLink_1ywtd_69",getInTouch:"_getInTouch_1ywtd_117",inputContainer:"_inputContainer_1ywtd_131",subscribeButton:"_subscribeButton_1ywtd_167",socialIcons:"_socialIcons_1ywtd_215",icon:"_icon_1ywtd_231",footerDivider:"_footerDivider_1ywtd_259",bottomText:"_bottomText_1ywtd_275",company:"_company_1ywtd_289"};function mw(e){return mb({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(e)}function gw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function yw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"},child:[]}]})(e)}function vw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(e)}function _w(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(e)}function bw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function ww(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function xw(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function Sw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function Cw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function kw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function Ew(e){return mb({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function Tw(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function Nw(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(e)}function Iw(e){return mb({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function jw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Aw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"},child:[]}]})(e)}function Pw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(e)}function Ow(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Dw(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function Rw(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function Lw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(e)}function Mw(e){return mb({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(e)}function Fw(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(e)}function zw(e){return mb({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(e)}const Uw=()=>{const e=we(),[t,n]=g.useState({}),[r,i]=g.useState({});g.useEffect(()=>{(async()=>{try{const e=om(C_,"settings","footer_section"),t=await lg(e);if(t.exists()){const e=t.data();n(e.contact||{}),i(e.social||{})}else console.warn("No footer content found!")}catch(e){console.error("Error fetching footer content:",e)}})()},[]);const s=(t,n)=>{t.ctrlKey||t.metaKey||(t.preventDefault(),e(n),window.scrollTo(0,0))};return m.jsxs("footer",{className:pw.footerContainer,children:[m.jsxs("div",{className:pw.footer,children:[m.jsxs("div",{className:`${pw.getInTouch} ${pw.footerContent}`,children:[m.jsx("h4",{className:pw.footerTitle,children:"STAY UPDATE"}),m.jsxs("div",{className:pw.inputContainer,children:[m.jsx("input",{type:"email",placeholder:"Email"}),m.jsx("button",{className:pw.subscribeButton,children:"SUBSCRIBE"})]})]}),m.jsxs("div",{className:`${pw.quickLinks} ${pw.footerContent}`,children:[m.jsx("h4",{className:pw.footerTitle,children:"QUICK LINKS"}),m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx(lt,{to:"/privacy-policy",className:pw.quickLink,onClick:e=>s(e,"/privacy-policy"),children:"Privacy Policy"})}),m.jsx("li",{children:m.jsx(lt,{to:"/terms-and-conditions",className:pw.quickLink,onClick:e=>s(e,"/terms-and-conditions"),children:"Terms & Conditions"})}),m.jsx("li",{children:m.jsx(lt,{to:"/faq",className:pw.quickLink,onClick:e=>s(e,"/faq"),children:"FAQ"})})]})]}),m.jsxs("div",{className:`${pw.contactInfo} ${pw.footerContent}`,children:[m.jsx("h4",{className:pw.footerTitle,children:"CONTACT US"}),m.jsx("ul",{children:m.jsx("li",{children:t.email1||"Loading..."})})]}),m.jsxs("div",{className:pw.footerContent,children:[m.jsx("h4",{className:pw.footerTitle,children:"SOCIAL MEDIA LINKS"}),m.jsxs("div",{className:pw.socialIcons,children:[r.facebook&&m.jsx("a",{href:r.facebook,target:"_blank",rel:"noopener noreferrer",children:m.jsx(mw,{size:40,className:pw.icon})}),r.instagram&&m.jsx("a",{href:r.instagram,target:"_blank",rel:"noopener noreferrer",children:m.jsx(gw,{size:40,className:pw.icon})}),r.linkedin&&m.jsx("a",{href:r.linkedin,target:"_blank",rel:"noopener noreferrer",children:m.jsx(yw,{size:40,className:pw.icon})})]})]})]}),m.jsx("hr",{className:pw.footerDivider}),m.jsxs("div",{className:`${pw.bottomText} ${pw.footerContent}`,children:[" ",(new Date).getFullYear()," Origins by the Sea. All rights reserved."]}),m.jsx("div",{className:`${pw.company} ${pw.footerContent}`,children:"Businesses by Infinite Market Solutions"})]})},Bw="_productCard_10blt_1",$w="_productLink_10blt_21",Vw="_imageContainer_10blt_31",qw="_productImage_10blt_43",Hw="_productName_10blt_57",Ww="_productPrice_10blt_69",Gw={imageWrapper:"_imageWrapper_1g6bu_1",optimizedImage:"_optimizedImage_1g6bu_17",blurredImage:"_blurredImage_1g6bu_49",loadedImage:"_loadedImage_1g6bu_61",shimmer:"_shimmer_1g6bu_103",hiddenAlt:"_hiddenAlt_1g6bu_189"},Kw=({src:e,alt:t,className:n,placeholderSrc:r,width:i,height:s,onLoad:a,onError:o,lazy:l=!0,blur:c=!0,objectFit:u="cover",priority:d=!1,quality:h="medium",...f})=>{const[p,y]=g.useState(!1),[v,_]=g.useState(r||""),[b,w]=g.useState(!1),[x,S]=g.useState(""),C=g.useRef(null),k="/images/placeholder.jpg",{isCached:E,addToCache:T}=vr(),N=async e=>{if(!e)return k;if(e.startsWith("data:")||e.startsWith("blob:")||e.includes("firebasestorage.googleapis.com"))return e;try{return await(async(e,t={})=>{const{quality:n="medium",maxWidth:r=1200,maxHeight:i=1200}=t,s={low:.3,medium:.6,high:.85}[n]||.6;try{return await fr(e,{maxWidth:r,maxHeight:i,quality:s,format:"jpeg"})}catch(a){return console.error("Error optimizing image:",a),e}})(e,{quality:h,maxWidth:i||1200,maxHeight:s||1200})}catch(t){return console.error("Error optimizing image:",t),e}},I=async e=>{if(E(e))return!0;try{return await mr(e)}catch(t){return console.error("Error checking image cache:",t),!1}};g.useEffect(()=>{e&&I(e).then(t=>{t?N(e).then(e=>{_(e),y(!0),a&&a()}):!r&&c&&pr(e,20).then(e=>{e&&_(e)})})},[e,r,c]),g.useEffect(()=>{if(!p&&!d&&l&&"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(j(),e.disconnect())})},{rootMargin:"200px"});return C.current&&e.observe(C.current),()=>{C.current&&e.disconnect()}}!d&&l||p||j()},[e,d,l,p]);const j=async()=>{if(e&&!b)try{if(e.includes("firebasestorage.googleapis.com")){const t=new Image;return t.crossOrigin="anonymous",t.src=e,t.onload=()=>{_(e),y(!0),T(e),a&&a()},void(t.onerror=t=>{console.error(`Failed to load Firebase image: ${e}`,t),w(!0),_(k),o&&o(t)})}const t=await I(e),n=await N(e);if(S(n),t)return _(n),y(!0),void(a&&a());const r=new Image;r.crossOrigin="anonymous",r.src=n,r.onload=()=>{_(n),y(!0),T(e),a&&a()},r.onerror=e=>{console.error(`Failed to load image: ${n}`,e),w(!0),_(k),o&&o(e)}}catch(t){console.error(`Error in loadImage for ${e}:`,t),w(!0),_(k),o&&o()}},A=[Gw.optimizedImage,n||"",!p&&c?Gw.blurredImage:"",p?Gw.loadedImage:""].filter(Boolean).join(" ");return m.jsxs("div",{className:Gw.imageWrapper,style:{width:i||"100%",height:s||"auto",aspectRatio:!s&&i?"auto":void 0},ref:C,children:[!p&&m.jsx("div",{className:Gw.shimmer}),m.jsx("img",{src:v||k,alt:t||"",className:`${A} ${p?"":Gw.hiddenAlt}`,loading:d?"eager":"lazy",onError:t=>{console.error(`Error displaying image: ${e}`),w(!0),_(k),o&&o(t)},style:{objectFit:u,opacity:p?1:0},...f})]})},Qw=({product:e})=>{const[t,n]=g.useState(!1),[r,i]=g.useState(!1),{addToCache:s,isCached:a}=vr();g.useEffect(()=>{e&&(e.image&&s(e.image),e.hoverImage&&s(e.hoverImage))},[e,s]);const o=t&&!r&&e.hoverImage?e.hoverImage:e.image,l=a(o);return m.jsx("div",{className:Bw,children:m.jsxs(lt,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},to:`/product?id=${e.id}`,className:$w,children:[m.jsx("div",{className:Vw,onMouseEnter:()=>n(!0),onMouseLeave:()=>{n(!1),i(!1)},children:m.jsx(Kw,{src:o,placeholderSrc:"/images/placeholder.jpg",alt:e.name,className:qw,onError:()=>{i(!0)},lazy:!0,blur:!l,quality:"medium",objectFit:"cover"})}),m.jsx("h3",{className:Hw,children:null==e?void 0:e.name}),m.jsx("p",{className:Ww,children:null==e?void 0:e.price})]})})},Yw=()=>{const e=we(),{featuredProducts:t,status:n}=$r(e=>e.home);return"loading"===n||"idle"===n?m.jsxs("div",{className:wb,children:[m.jsx("h2",{className:xb,children:"Top Picks"}),m.jsx("div",{className:Sb,children:[...Array(8)].map((e,t)=>m.jsxs("div",{className:Eb,children:[m.jsx("div",{className:Tb}),m.jsx("div",{className:Nb}),m.jsx("div",{className:Ib})]},t))})]}):m.jsxs("div",{className:wb,children:[m.jsx("h2",{className:xb,children:"Top Picks"}),m.jsx("div",{className:Sb,children:t.map(e=>m.jsx(Qw,{product:e},e.id))}),m.jsx("div",{className:kb,children:m.jsx("button",{onClick:()=>{e("/shop"),window.scrollTo(0,0)},className:Cb,children:"View All"})})]})},Xw={showcase:"_showcase_qmsj0_1",heading:"_heading_qmsj0_21",gallery:"_gallery_qmsj0_39",card:"_card_qmsj0_55",image:"_image_qmsj0_67"},Jw=()=>{const e=we(),[t,n]=g.useState([]),[r,i]=g.useState(!0);return g.useEffect(()=>{(async()=>{try{const e=qm(am(C_,"products"),Qm("created_at","desc"),Xm(8)),t=(await ug(e)).docs.map(e=>({id:e.id,...e.data(),image:e.data().images&&e.data().images.length>0?e.data().images[0]:"/images/placeholder.jpg",hoverImage:e.data().images&&e.data().images.length>1?e.data().images[1]:e.data().images&&e.data().images.length>0?e.data().images[0]:"/images/placeholder.jpg",price:e.data().price?`AED ${e.data().price}`:"Price not available",name:e.data().name||"Product Name"}));n(t),i(!1)}catch(e){console.error("Error fetching products:",e),i(!1)}})()},[]),r?m.jsxs("div",{className:Xw.productSection,children:[m.jsx("h2",{className:Xw.title,children:"Top Picks"}),m.jsx("div",{className:Xw.gridContainer,children:[...Array(8)].map((e,t)=>m.jsxs("div",{className:Xw.shimmerCard,children:[m.jsx("div",{className:Xw.shimmerImage}),m.jsx("div",{className:Xw.shimmerTitle}),m.jsx("div",{className:Xw.shimmerPrice})]},t))})]}):m.jsxs("section",{className:Xw.showcase,children:[m.jsx("h2",{className:Xw.heading,children:"Timeless Craftsmanship in Motion"}),"      ",m.jsx("div",{className:Xw.gallery,children:t.slice(0,5).map(t=>m.jsx("div",{onClick:()=>{e(`/product?id=${t.id}`)},className:Xw.card,children:m.jsx("img",{src:t.images[0],alt:"Craftsmanship",className:Xw.image})},t.id))})]})},Zw=({title:e="Origins By The Sea | Handcrafted Sustainable Fashion",description:t="Discover elegantly handcrafted swimwear, dresses, and accessories inspired by the sea. Sustainable, ethical fashion designed with passion and purpose.",canonicalUrl:n="https://originsbythesea.com",schema:r=null,ogImage:i="https://originsbythesea.com/images/hero-banner.jpg",keywords:s="origins by the sea, swimwear, handmade dresses, sustainable fashion, ethical clothing, beach wear, crop tops, waterproof jewelry",type:a="website",publishedAt:o,modifiedAt:l,author:c="Origins By The Sea",section:u="",pageType:d="website"})=>{const h={"@context":"https://schema.org","@type":d,name:e,description:t,url:n,image:i};return"Article"===d&&(h.author={"@type":"Organization",name:c},h.publisher={"@type":"Organization",name:"Origins By The Sea",logo:{"@type":"ImageObject",url:"https://originsbythesea.com/images/logo.png"}},o&&(h.datePublished=o),l&&(h.dateModified=l)),m.jsxs(hr,{children:[m.jsx("title",{children:e}),m.jsx("meta",{name:"description",content:t}),m.jsx("meta",{name:"keywords",content:s}),m.jsx("link",{rel:"canonical",href:n}),m.jsx("meta",{property:"og:title",content:e}),m.jsx("meta",{property:"og:description",content:t}),m.jsx("meta",{property:"og:image",content:i}),m.jsx("meta",{property:"og:url",content:n}),m.jsx("meta",{property:"og:type",content:a}),m.jsx("meta",{property:"og:site_name",content:"Origins By The Sea"}),m.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),m.jsx("meta",{name:"twitter:title",content:e}),m.jsx("meta",{name:"twitter:description",content:t}),m.jsx("meta",{name:"twitter:image",content:i}),o&&m.jsx("meta",{property:"article:published_time",content:o}),l&&m.jsx("meta",{property:"article:modified_time",content:l}),u&&m.jsx("meta",{property:"article:section",content:u}),c&&m.jsx("meta",{property:"article:author",content:c}),m.jsx("script",{type:"application/ld+json",children:JSON.stringify(r||h)}),m.jsx("meta",{name:"robots",content:"index, follow"}),m.jsx("meta",{name:"googlebot",content:"index, follow"}),m.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),m.jsx("meta",{name:"theme-color",content:"#e6994b"}),m.jsx("meta",{name:"author",content:"Origins By The Sea"})]})},ex=()=>{const e=zr(),{error:t,status:n}=$r(e=>e.home),r={"@context":"https://schema.org","@type":"WebSite",url:"https://originsbythesea.com",name:"Origins By The Sea",description:"Handcrafted sustainable fashion inspired by the ocean",potentialAction:{"@type":"SearchAction",target:"https://originsbythesea.com/shop?search={search_term_string}","query-input":"required name=search_term_string"}};return g.useEffect(()=>{"idle"===n&&e(E_())},[e,n]),t&&console.error("Error loading homepage data:",t),m.jsxs("div",{children:[m.jsx(Zw,{title:"Origins By The Sea | Handcrafted Sustainable Fashion",description:"Discover elegantly handcrafted swimwear, dresses, and accessories inspired by the sea. Sustainable, ethical fashion designed with passion and purpose.",canonicalUrl:"https://originsbythesea.com",schema:r}),m.jsx(W_,{}),m.jsx(bb,{}),m.jsx(Yw,{}),m.jsx(Jw,{})]})},tx=async(e,t={})=>{if(!e)return;const n=om(C_,"users",e.uid);if((await lg(n)).exists())console.log("User document already exists");else{const{email:i,displayName:s,photoURL:a,phoneNumber:o}=e,l=gg();try{await function(e,t,n){e=bl(e,im);const r=bl(e.firestore,hm),i=ng(e.converter,t);return pg(r,[Em(km(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Yu.none())])}(n,{uid:e.uid,email:i,displayName:s||t.displayName||"",photoURL:a||"",phoneNumber:o||t.phoneNumber||"",createdAt:l,...t}),console.log("User document created successfully")}catch(r){console.error("Error creating user document",r)}}return n},nx=async(e,t,n)=>{try{const r=await async function(e,t,n){if(eo(e.app))return Promise.reject(Eg(e));const r=jy(e),i=zy(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rv),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&cv(e),t}),a=await iv._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(k_,e,t),i=r.user;return await tx(i,n),{user:i}}catch(r){return{error:r}}},rx=async(e,t)=>{try{return{user:(await uv(k_,e,t)).user}}catch(n){return{error:n}}},ix=async()=>{try{const e=new ev,t=(await zv(k_,e)).user;return await tx(t),{user:t}}catch(e){return{error:e}}},sx=async()=>{try{return await(e=k_,$s(e).signOut()),{success:!0}}catch(t){return{error:t}}var e},ax="_loadingContainer_198vm_1",ox="_loading_198vm_1",lx="_authContainer_198vm_25",cx="_authForm_198vm_41",ux="_authTitle_198vm_59",dx="_nameFields_198vm_79",hx="_authFormInputContainer_198vm_89",fx="_authFormInput_198vm_89",px="_loginBtn_198vm_127",mx="_googleBtn_198vm_169",gx="_registerBtn_198vm_233",yx="_errorMessage_198vm_281";function vx(e){return mb({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r\n\tc0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r\n\tc0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r\n\tC34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r\n\tc-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"},child:[]},{tag:"path",attr:{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r\n\tc0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"},child:[]}]})(e)}const _x=is("products/fetchProducts",async(e,{rejectWithValue:t})=>{try{const e=am(C_,"products"),t=await ug(e);console.log("Fetched products from Firebase:",t.docs.length);const n=t.docs.map(e=>{const t=e.data();let n=t.collection_id||null;return null!==n&&"string"!=typeof n&&(n=String(n)),{id:e.id,...t,image:t.images&&t.images.length>0?t.images[0]:"/images/placeholder.jpg",hoverImage:t.images&&t.images.length>1?t.images[1]:t.images&&t.images.length>0?t.images[0]:"/images/placeholder.jpg",price:t.price?`AED ${t.price}`:"Price not available",rawPrice:t.price||0,name:t.name||"Product Name",sizes:t.sizes||["S","M","L"],colors:t.colors||[],collection_id:n,categories:t.categories||[],created_at:t.created_at?t.created_at.toDate?t.created_at.toDate().toISOString():t.created_at instanceof Date?t.created_at.toISOString():t.created_at:(new Date).toISOString()}});return console.log("Processed products data:",n.length),n}catch(n){return console.error("Error fetching products:",n),t(n.message)}}),bx=us({name:"product",initialState:{products:[],currentPage:1,productsPerPage:8,status:"idle",error:null},reducers:{setPage:(e,t)=>{e.currentPage=t.payload}},extraReducers:e=>{e.addCase(_x.pending,e=>{e.status="loading"}).addCase(_x.fulfilled,(e,t)=>{e.status="succeeded",e.products=t.payload}).addCase(_x.rejected,(e,t)=>{e.status="failed",e.error=t.payload})}}),{setPage:wx}=bx.actions,xx=bx.reducer,Sx=async e=>{try{const t=am(C_,"users",e,"cart"),n=await ug(t);return{cartItems:n.docs.map(e=>({id:e.id,...e.data()}))}}catch(t){throw console.error("Error getting cart items:",t),Vt.error("Failed to load your cart. Please try again."),t}},Cx=async(e,t)=>{try{const n=qm(am(C_,"users",e,"cart"),Wm("productId","==",t.id),Wm("size","==",t.size),Wm("color","==",t.color)),r=await ug(n);if(!r.empty){const n=r.docs[0],i=(n.data().quantity||0)+(t.quantity||1);return await dg(om(C_,"users",e,"cart",n.id),{quantity:i,updatedAt:new Date}),{cartItemId:n.id,updated:!0}}const i={productId:t.id,name:t.name,price:t.price,image:t.image,size:t.size,color:t.color,displayColor:t.displayColor,quantity:t.quantity||1,createdAt:new Date,updatedAt:new Date};return{cartItemId:(await fg(am(C_,"users",e,"cart"),i)).id}}catch(n){throw console.error("Error adding item to cart:",n),Vt.error("Failed to add item to cart. Please try again."),n}},kx=async(e,t,n,r,i)=>{try{const s=qm(am(C_,"users",e,"cart"),Wm("productId","==",t),Wm("size","==",n),Wm("color","==",r)),a=await ug(s);if(a.empty)return{error:"Cart item not found"};const o=a.docs[0];return await dg(om(C_,"users",e,"cart",o.id),{quantity:i,updatedAt:new Date}),{success:!0}}catch(s){throw console.error("Error updating cart item quantity:",s),Vt.error("Failed to update item quantity. Please try again."),s}},Ex=e=>{localStorage.setItem("cartItems",JSON.stringify(e))},Tx=is("cart/fetchUserCart",async(e,{rejectWithValue:t})=>{try{const n=await Sx(e);if(n.error)return t(n.error);return n.cartItems.map(e=>({id:e.productId,name:e.name,price:e.price,image:e.image,size:e.size,color:e.color,displayColor:e.displayColor,quantity:e.quantity,firebaseId:e.id}))}catch(n){return t(n.message)}}),Nx=is("cart/addToFirebaseCart",async({userId:e,item:t},{rejectWithValue:n})=>{try{const r=await Cx(e,t);return r.error?n(r.error):t}catch(r){return n(r.message)}}),Ix=is("cart/updateFirebaseQuantity",async({userId:e,id:t,size:n,color:r,quantity:i},{rejectWithValue:s})=>{try{const a=await kx(e,t,n,r,i);return a.error?s(a.error):{id:t,size:n,color:r,quantity:i}}catch(a){return s(a.message)}}),jx=is("cart/removeFromFirebaseCart",async({userId:e,id:t,size:n,color:r},{rejectWithValue:i})=>{try{const s=await(async(e,t,n,r)=>{try{const i=qm(am(C_,"users",e,"cart"),Wm("productId","==",t),Wm("size","==",n),Wm("color","==",r)),s=await ug(i);return s.empty?{error:"Cart item not found"}:(await hg(om(C_,"users",e,"cart",s.docs[0].id)),{success:!0})}catch(i){throw console.error("Error removing cart item:",i),Vt.error("Failed to remove item from cart. Please try again."),i}})(e,t,n,r);return s.error?i(s.error):{id:t,size:n,color:r}}catch(s){return i(s.message)}}),Ax=is("cart/clearFirebaseCart",async(e,{rejectWithValue:t})=>{try{const n=await(async e=>{try{const t=am(C_,"users",e,"cart"),n=(await ug(t)).docs.map(e=>hg(e.ref));return await Promise.all(n),{success:!0}}catch(t){throw console.error("Error clearing cart:",t),Vt.error("Failed to clear your cart. Please try again."),t}})(e);return!n.error||t(n.error)}catch(n){return t(n.message)}}),Px=is("cart/syncCart",async({userId:e,localCartItems:t},{rejectWithValue:n})=>{try{const r=await(async(e,t)=>{try{const{cartItems:n,error:r}=await Sx(e);if(r)throw new Error(r);for(const i of t){const t=n.find(e=>e.productId===i.id&&e.size===i.size&&e.color===i.color);t?await kx(e,i.id,i.size,i.color,t.quantity+i.quantity):await Cx(e,i)}return{success:!0}}catch(n){throw console.error("Error syncing cart with Firebase:",n),Vt.error("Failed to sync your cart. Please try again."),n}})(e,t);if(r.error)return n(r.error);const i=await Sx(e);if(i.error)return n(i.error);return i.cartItems.map(e=>({id:e.productId,name:e.name,price:e.price,image:e.image,size:e.size,color:e.color,displayColor:e.displayColor,quantity:e.quantity,firebaseId:e.id}))}catch(r){return n(r.message)}}),Ox=us({name:"cart",initialState:{cartItems:(()=>{try{const e=localStorage.getItem("cartItems");return e?JSON.parse(e):[]}catch(e){return console.error("Error loading cart from localStorage:",e),[]}})(),loading:!1,error:null,isFirebaseCart:!1,selectedCartItems:[]},reducers:{addToCart:(e,t)=>{const{id:n,size:r,color:i}=t.payload,s=e.cartItems.find(e=>e.id===n&&e.size===r&&e.color===i);s?s.quantity+=t.payload.quantity:e.cartItems.push(t.payload),e.isFirebaseCart||Ex(e.cartItems)},removeFromCart:(e,t)=>{const{id:n,size:r,color:i}=t.payload;e.cartItems=e.cartItems.filter(e=>!(e.id===n&&e.size===r&&e.color===i)),e.isFirebaseCart||Ex(e.cartItems)},updateQuantity:(e,t)=>{const{id:n,size:r,color:i,quantity:s}=t.payload,a=e.cartItems.find(e=>e.id===n&&e.size===r&&e.color===i);a&&(a.quantity=s),e.isFirebaseCart||Ex(e.cartItems)},clearCart:e=>{e.cartItems=[],e.isFirebaseCart||localStorage.removeItem("cartItems")},setFirebaseCartStatus:(e,t)=>{e.isFirebaseCart=t.payload},addToSelectedCart:(e,t)=>{e.selectedCartItems.push(t.payload)},removeFromSelectedCart:(e,t)=>{const{id:n,size:r,color:i}=t.payload;e.selectedCartItems=e.selectedCartItems.filter(e=>!(e.id===n&&e.size===r&&e.color===i))},updateSelectedQuantity:(e,t)=>{const{id:n,size:r,color:i,quantity:s}=t.payload,a=e.selectedCartItems.find(e=>e.id===n&&e.size===r&&e.color===i);a&&(a.quantity=s);const o=e.cartItems.find(e=>e.id===n&&e.size===r&&e.color===i);o&&(o.quantity=s,e.isFirebaseCart||Ex(e.cartItems))},clearSelectedCart:e=>{e.selectedCartItems=[]}},extraReducers:e=>{e.addCase(Tx.pending,e=>{e.loading=!0,e.error=null}).addCase(Tx.fulfilled,(e,t)=>{e.loading=!1,e.cartItems=t.payload,e.isFirebaseCart=!0,localStorage.removeItem("cartItems")}).addCase(Tx.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Nx.pending,e=>{e.loading=!0,e.error=null}).addCase(Nx.fulfilled,e=>{e.loading=!1}).addCase(Nx.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Ix.pending,e=>{e.loading=!0,e.error=null}).addCase(Ix.fulfilled,e=>{e.loading=!1}).addCase(Ix.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(jx.pending,e=>{e.loading=!0,e.error=null}).addCase(jx.fulfilled,e=>{e.loading=!1}).addCase(jx.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Ax.pending,e=>{e.loading=!0,e.error=null}).addCase(Ax.fulfilled,e=>{e.loading=!1,e.cartItems=[]}).addCase(Ax.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Px.pending,e=>{e.loading=!0,e.error=null}).addCase(Px.fulfilled,(e,t)=>{e.loading=!1,e.cartItems=t.payload,e.isFirebaseCart=!0,localStorage.removeItem("cartItems")}).addCase(Px.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{addToCart:Dx,removeFromCart:Rx,updateQuantity:Lx,clearCart:Mx,setFirebaseCartStatus:Fx,addToSelectedCart:zx,removeFromSelectedCart:Ux,updateSelectedQuantity:Bx,clearSelectedCart:$x}=Ox.actions,Vx=Ox.reducer,qx=async(e,t)=>{try{const n=qm(am(C_,"users",e,"favorites"),Wm("productId","==",t.id)),r=await ug(n);if(!r.empty)return{favoriteId:r.docs[0].id,exists:!0};const i={productId:t.id,name:t.name,price:t.price,image:t.image||t.images&&t.images[0]||"",createdAt:new Date};return{favoriteId:(await fg(am(C_,"users",e,"favorites"),i)).id}}catch(n){return console.error("Error adding to favorites:",n),{error:n.message||"Failed to add to favorites"}}},Hx=async e=>{try{const t=am(C_,"users",e,"favorites"),n=await ug(t);return{favorites:n.docs.map(e=>({id:e.id,...e.data()}))}}catch(t){return console.error("Error getting favorites:",t),{error:t.message||"Failed to get favorites"}}},Wx=e=>{localStorage.setItem("favorites",JSON.stringify(e))},Gx=is("favorites/fetchUserFavorites",async(e,{rejectWithValue:t})=>{try{const n=await Hx(e);return n.error?t(n.error):n.favorites}catch(n){return t(n.message)}}),Kx=is("favorites/addProductToFavorites",async({userId:e,product:t},{rejectWithValue:n})=>{try{const r=await qx(e,t);return r.error?n(r.error):{...t,favoriteId:r.favoriteId}}catch(r){return n(r.message)}}),Qx=is("favorites/removeProductFromFavorites",async({userId:e,productId:t},{rejectWithValue:n})=>{try{const r=await(async(e,t)=>{try{const n=qm(am(C_,"users",e,"favorites"),Wm("productId","==",t)),r=await ug(n);return r.empty?{error:"Favorite not found"}:(await hg(om(C_,"users",e,"favorites",r.docs[0].id)),{success:!0})}catch(n){return console.error("Error removing from favorites:",n),{error:n.message||"Failed to remove from favorites"}}})(e,t);return r.error?n(r.error):t}catch(r){return n(r.message)}}),Yx=is("favorites/syncFavorites",async({userId:e,localFavorites:t},{rejectWithValue:n})=>{try{const r=await(async(e,t)=>{try{const{favorites:n,error:r}=await Hx(e);if(r)throw new Error(r);for(const i of t)n.find(e=>e.productId===i.id)||await qx(e,i);return{success:!0}}catch(n){throw console.error("Error syncing favorites with Firebase:",n),Vt.error("Failed to sync your favorites. Please try again."),n}})(e,t);if(r.error)return n(r.error);const i=await Hx(e);return i.error?n(i.error):i.favorites}catch(r){return n(r.message)}}),Xx=us({name:"favorites",initialState:{favorites:(()=>{try{const e=localStorage.getItem("favorites");return e?JSON.parse(e):[]}catch(e){return console.error("Error loading favorites from localStorage:",e),[]}})(),loading:!1,error:null,isFirebaseFavorites:!1},reducers:{addFavorite:(e,t)=>{-1===e.favorites.findIndex(e=>e.id===t.payload.id)&&(e.favorites.push(t.payload),e.isFirebaseFavorites||Wx(e.favorites))},removeFavorite:(e,t)=>{e.favorites=e.favorites.filter(e=>e.id!==t.payload),e.isFirebaseFavorites||Wx(e.favorites)},clearFavorites:e=>{e.favorites=[],e.isFirebaseFavorites||localStorage.removeItem("favorites")},setFirebaseFavoritesStatus:(e,t)=>{e.isFirebaseFavorites=t.payload}},extraReducers:e=>{e.addCase(Gx.pending,e=>{e.loading=!0,e.error=null}).addCase(Gx.fulfilled,(e,t)=>{e.loading=!1,e.favorites=t.payload,e.isFirebaseFavorites=!0,localStorage.removeItem("favorites")}).addCase(Gx.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Kx.pending,e=>{e.loading=!0,e.error=null}).addCase(Kx.fulfilled,(e,t)=>{e.loading=!1;-1===e.favorites.findIndex(e=>e.id===t.payload.id)&&e.favorites.push(t.payload)}).addCase(Kx.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Qx.pending,e=>{e.loading=!0,e.error=null}).addCase(Qx.fulfilled,(e,t)=>{e.loading=!1,e.favorites=e.favorites.filter(e=>e.productId!==t.payload)}).addCase(Qx.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(Yx.pending,e=>{e.loading=!0,e.error=null}).addCase(Yx.fulfilled,(e,t)=>{e.loading=!1,e.favorites=t.payload,e.isFirebaseFavorites=!0,localStorage.removeItem("favorites")}).addCase(Yx.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{addFavorite:Jx,removeFavorite:Zx,clearFavorites:eS,setFirebaseFavoritesStatus:tS}=Xx.actions,nS=Xx.reducer,rS=us({name:"guest",initialState:{isGuestCheckout:!1},reducers:{setGuestCheckout:(e,t)=>{e.isGuestCheckout=t.payload},resetGuestCheckout:e=>{e.isGuestCheckout=!1}}}),{setGuestCheckout:iS,resetGuestCheckout:sS}=rS.actions,aS=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{};let s=new Wi;return t&&("boolean"==typeof t?s.push($i):s.push(Vi(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:a}=e||{};let o,l;if("function"==typeof n)o=n;else{if(!Gr(n))throw new Error(hs(1));o=Qr(n)}l="function"==typeof r?r(t):t();let c=Yr;i&&(c=qi({trace:!1,..."object"==typeof i&&i}));const u=function(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Vr(15))};const a={getState:i.getState,dispatch:(e,...t)=>s(e,...t)},o=e.map(e=>e(a));return s=Yr(...o)(i.dispatch),{...i,dispatch:s}}}(...l),d=Yi(u);return Kr(o,s,c(..."function"==typeof a?a(d):d()))}({reducer:{product:xx,cart:Vx,favorites:nS,hero:U_,home:T_,guest:rS.reducer}}),oS=()=>{try{aS.dispatch(Fx(!1)),aS.dispatch(tS(!1))}catch(e){console.error("Error handling user data on logout:",e)}},lS=g.createContext(),cS=()=>g.useContext(lS);function uS({children:e}){const[t,n]=g.useState(null),[r,i]=g.useState(null),[s,a]=g.useState(!0),[o,l]=g.useState(null);g.useEffect(()=>{const e=(r=async e=>{const r=t;if(n(e),!r&&e&&(async e=>{try{if(!e)return;const t=aS.getState(),{cartItems:n}=t.cart,{favorites:r}=t.favorites;n.length>0?await aS.dispatch(Px({userId:e,localCartItems:n})):await aS.dispatch(Tx(e)),r.length>0?await aS.dispatch(Yx({userId:e,localFavorites:r})):await aS.dispatch(Gx(e))}catch(s){console.error("Error syncing user data on login:",s)}})(e.uid),r&&!e&&oS(),a(!1),e)try{const t=function(e,...t){var n,r,i;e=$s(e);let s={includeMetadataChanges:!1,source:"default"},a=0;"object"!=typeof t[a]||dm(t[a])||(s=t[a++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(dm(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,c,u;if(e instanceof im)c=bl(e.firestore,hm),u=ou(e._key.path),l={next:n=>{t[a]&&t[a](mg(c,e,n))},error:t[a+1],complete:t[a+2]};else{const n=bl(e,rm);c=bl(n.firestore,hm),u=n._query;const r=new cg(c);l={next:e=>{t[a]&&t[a](new ag(c,r,n,e))},error:t[a+1],complete:t[a+2]},Bm(e._query)}return function(e,t,n,r){const i=new Vp(r),s=new up(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>rp(await Qp(e),s)),()=>{i.Ou(),e.asyncQueue.enqueueAndForget(async()=>ip(await Qp(e),s))}}(fm(c),u,o,l)}(om(C_,"users",e.uid),e=>{e.exists()?i(e.data()):i(null)},e=>{console.error("Error fetching user data:",e),l(e)});return()=>t()}catch(s){console.error("Error setting up user data listener:",s),l(s)}else i(null)},$s(k_).onAuthStateChanged(r,s,o));var r,s,o;return()=>e()},[t]);const c={currentUser:t,userData:r,loading:s,authError:o,isAuthenticated:!!t,logout:async()=>{try{oS(),await sx()}catch(e){throw console.error("Error during logout:",e),e}}};return m.jsx(lS.Provider,{value:c,children:e})}const dS=()=>{const e=we(),[t,n]=g.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phoneNumber:""}),[r,i]=g.useState(""),[s,a]=g.useState(!1),o=e=>{const{name:t,value:r}=e.target;n(e=>({...e,[t]:r}))};return m.jsxs("section",{className:lx,children:[m.jsx("div",{children:m.jsxs("form",{className:cx,onSubmit:async n=>{if(n.preventDefault(),t.password===t.confirmPassword)if(t.password.length<6)i("Password must be at least 6 characters");else try{a(!0),i("");const{user:n,error:r}=await nx(t.email,t.password,{displayName:`${t.firstName} ${t.lastName}`,firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber,createdMethod:"email"});r?i(r.message||"Failed to create account"):n&&e("/")}catch(r){i("An error occurred during signup"),console.error(r)}finally{a(!1)}else i("Passwords do not match")},children:[m.jsx("h1",{className:ux,children:"Create Account"}),r&&m.jsx("div",{className:yx,children:r}),m.jsxs("div",{className:dx,children:[m.jsxs("div",{className:hx,children:[m.jsx("label",{htmlFor:"firstName",children:"First Name"}),m.jsx("input",{type:"text",id:"firstName",name:"firstName",placeholder:"First Name",className:fx,value:t.firstName,onChange:o,required:!0})]}),m.jsxs("div",{className:hx,children:[m.jsx("label",{htmlFor:"lastName",children:"Last Name"}),m.jsx("input",{type:"text",id:"lastName",name:"lastName",placeholder:"Last Name",className:fx,value:t.lastName,onChange:o,required:!0})]})]}),m.jsxs("div",{className:hx,children:[m.jsx("label",{htmlFor:"email",children:"Email"}),m.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Email",className:fx,value:t.email,onChange:o,required:!0})]}),m.jsxs("div",{className:hx,children:[m.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number (Optional)"}),m.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",placeholder:"Phone Number",className:fx,value:t.phoneNumber,onChange:o})]}),m.jsxs("div",{className:hx,children:[m.jsx("label",{htmlFor:"password",children:"Password"}),m.jsx("input",{type:"password",id:"password",name:"password",placeholder:"Password",className:fx,value:t.password,onChange:o,required:!0,minLength:6})]}),m.jsxs("div",{className:hx,children:[m.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),m.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password",className:fx,value:t.confirmPassword,onChange:o,required:!0})]}),m.jsx("button",{type:"submit",className:px,disabled:s,children:s?"Creating Account...":"Create Account"}),m.jsxs("button",{type:"button",onClick:async()=>{try{a(!0),i("");const{user:t,error:n}=await ix();n?i(n.message||"Failed to sign in with Google"):t&&e("/")}catch(t){i("An error occurred during Google sign in"),console.error(t)}finally{a(!1)}},className:mx,disabled:s,children:[m.jsx(vx,{size:20}),m.jsx("span",{children:"Sign up with Google"})]})]})}),m.jsx("button",{onClick:()=>e("/login"),className:gx,disabled:s,children:"already have an account?"})]})},hS=()=>{const e=we(),t=cS()||{},{isAuthenticated:n=!1,loading:r=!1}=t;return g.useEffect(()=>{!r&&n&&e("/")},[n,r,e]),r?m.jsx("div",{className:ax,children:m.jsx("div",{className:ox,children:"Loading..."})}):m.jsxs("div",{children:[m.jsx(Bb,{}),m.jsx(dS,{})]})},fS="_authForm_1l1ad_1",pS="_authTiltle_1l1ad_19",mS="_authFormInputContainer_1l1ad_39",gS="_authFormInput_1l1ad_39",yS="_forgotPassword_1l1ad_75",vS="_loginBtn_1l1ad_97",_S="_googleBtn_1l1ad_139",bS="_guestBtn_1l1ad_187",wS="_registerBtn_1l1ad_245",xS="_errorMessage_1l1ad_293",SS="_authContainer_1l1ad_311",CS="_divider_1l1ad_327",kS=()=>{const e=we(),t=zr(),[n,r]=g.useState({email:"",password:""}),[i,s]=g.useState(""),[a,o]=g.useState(!1),l=e=>{const{name:t,value:i}=e.target;r({...n,[t]:i})};return m.jsxs("section",{className:SS,children:[m.jsx("div",{children:m.jsxs("form",{className:fS,onSubmit:async t=>{t.preventDefault(),o(!0),s("");try{const{user:t,error:r}=await rx(n.email,n.password);r?s(r.message):t&&e("/")}catch(r){s("Failed to sign in. Please check your credentials and try again."),console.error(r)}finally{o(!1)}},children:[m.jsx("h1",{className:pS,children:"Login"}),i&&m.jsx("div",{className:xS,children:i}),m.jsxs("div",{className:mS,children:[m.jsx("label",{htmlFor:"email",children:"Email"}),m.jsx("input",{type:"email",name:"email",placeholder:"Email",className:gS,value:n.email,onChange:l,required:!0})]}),m.jsxs("div",{className:mS,children:[m.jsx("label",{htmlFor:"password",children:"Password"}),m.jsx("input",{type:"password",name:"password",placeholder:"Password",className:gS,value:n.password,onChange:l,required:!0}),m.jsx(lt,{to:"/forgot-password",className:yS,children:"forgot password?"})]}),m.jsx("button",{type:"submit",className:vS,disabled:a,children:a?"Signing in...":"Sign in"}),m.jsxs("button",{type:"button",onClick:async t=>{t.preventDefault(),o(!0),s("");try{const{user:t,error:n}=await ix();n?s(n.message):t&&e("/")}catch(n){s("Failed to sign in with Google. Please try again."),console.error(n)}finally{o(!1)}},className:_S,disabled:a,children:[m.jsx(vx,{size:20}),m.jsx("span",{children:"Sign in with Google"})]}),m.jsx("div",{className:CS,children:m.jsx("span",{children:"OR"})}),m.jsx("button",{type:"button",onClick:()=>{localStorage.setItem("isGuestUser","true"),t(iS(!0)),e("/")},className:bS,disabled:a,children:"Continue as Guest"})]})}),m.jsx("button",{onClick:()=>e("/signup"),className:wS,disabled:a,children:"create account"})]})},ES="_loadingContainer_18kzu_1",TS="_loading_18kzu_1",NS=()=>{const e=we(),t=cS()||{},{isAuthenticated:n=!1,loading:r=!1}=t;return g.useEffect(()=>{!r&&n&&e("/")},[n,r,e]),r?m.jsx("div",{className:ES,children:m.jsx("div",{className:TS,children:"Loading..."})}):m.jsxs("div",{children:[m.jsx(Bb,{}),m.jsx(kS,{})]})},IS="_aboutContainer_1l98c_1",jS="_errorContainer_1l98c_11",AS="_heroSection_1l98c_87",PS="_overlay_1l98c_109",OS="_heroContent_1l98c_129",DS="_tagline_1l98c_189",RS="_storySection_1l98c_203",LS="_storyContainer_1l98c_213",MS="_sectionTitle_1l98c_223",FS="_storyContent_1l98c_259",zS="_storyText_1l98c_271",US="_storyImage_1l98c_303",BS="_valuesSection_1l98c_347",$S="_valuesContainer_1l98c_357",VS="_valuesGrid_1l98c_367",qS="_valueCard_1l98c_381",HS="_iconContainer_1l98c_415",WS="_craftSection_1l98c_465",GS="_craftContainer_1l98c_475",KS="_craftText_1l98c_491",QS="_shopButton_1l98c_513",YS="_craftImageContainer_1l98c_545",XS="_craftGallery_1l98c_567",JS="_teamSection_1l98c_589",ZS="_teamContainer_1l98c_599",eC="_teamIntro_1l98c_609",tC="_commitment_1l98c_627",nC="_signature_1l98c_673";function rC(e){return mb({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function iC(e){return mb({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(e)}function sC(e){return mb({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3c-4.8 0-9 3.86-9 9 0 2.12.74 4.07 1.97 5.61L3 19.59 4.41 21l1.97-1.97A9.012 9.012 0 0 0 12 21c2.3 0 4.61-.88 6.36-2.64A8.95 8.95 0 0 0 21 12V3h-9zm7 9c0 1.87-.73 3.63-2.05 4.95A6.96 6.96 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-1.9.74-3.68 2.1-4.99A6.94 6.94 0 0 1 12 5h7v7z"},child:[]},{tag:"path",attr:{d:"m8.46 12.63 4.05.4-2.44 3.33c-.11.16-.1.38.04.52.15.15.4.16.56.01l5.16-4.63c.33-.3.15-.85-.3-.89l-4.05-.4 2.44-3.33c.11-.16.1-.38-.04-.52a.405.405 0 0 0-.56-.01l-5.16 4.63c-.32.3-.14.85.3.89z"},child:[]}]})(e)}function aC(e){return mb({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.22 19.85c-.18.18-.5.21-.71 0a.504.504 0 0 1 0-.71l3.39-3.39-1.41-1.41-3.39 3.39c-.19.2-.51.19-.71 0a.504.504 0 0 1 0-.71l3.39-3.39-1.41-1.41-3.39 3.39c-.18.18-.5.21-.71 0a.513.513 0 0 1 0-.71l3.39-3.39-1.42-1.41-3.39 3.39c-.18.18-.5.21-.71 0a.513.513 0 0 1 0-.71L9.52 8.4l1.87 1.86c.95.95 2.59.94 3.54 0 .98-.98.98-2.56 0-3.54l-1.86-1.86.28-.28c.78-.78 2.05-.78 2.83 0l4.24 4.24c.78.78.78 2.05 0 2.83l-8.2 8.2zm9.61-6.78a4.008 4.008 0 0 0 0-5.66l-4.24-4.24a4.008 4.008 0 0 0-5.66 0l-.28.28-.28-.28a4.008 4.008 0 0 0-5.66 0L2.17 6.71a3.992 3.992 0 0 0-.4 5.19l1.45-1.45a2 2 0 0 1 .37-2.33l3.54-3.54c.78-.78 2.05-.78 2.83 0l3.56 3.56c.18.18.21.5 0 .71-.21.21-.53.18-.71 0L9.52 5.57l-5.8 5.79c-.98.97-.98 2.56 0 3.54.39.39.89.63 1.42.7a2.458 2.458 0 0 0 2.12 2.12 2.458 2.458 0 0 0 2.12 2.12c.07.54.31 1.03.7 1.42.47.47 1.1.73 1.77.73.67 0 1.3-.26 1.77-.73l8.21-8.19z"},child:[]}]})(e)}function oC(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M56.813 18.438c-.47-.005-.938.014-1.407.03-.625.023-1.252.066-1.875.126-7.468.72-14.682 4.148-22.31 11.125-9.985 9.128-12.863 17.66-11.407 27.718 1.455 10.056 8.353 22.236 21.125 34.906 2.895 2.872 6.126 5.737 9.593 8.625 1.27 1.055 2.565 2.13 3.907 3.186 1.122.882 2.266 1.775 3.438 2.656.232.175.454.358.688.532C74.71 119.38 95.558 131.28 120.25 142.22c159.723 161.31 288.815 297.553 374.594 352.124-51.11-85.624-187.432-214.62-350-375.531-10.23-23.802-21.115-43.71-32.094-59.282 35.46-10.19 82.517-2.294 125.75 40.94 40.243 40.242 52.642 90.776 41.375 128.343 4.89 4.914 9.883 9.913 14.688 14.75 19.07-46.1 4.573-108.895-42.844-156.313-35.694-35.693-75.48-50.324-111.032-50.22-1.147.005-2.3.03-3.438.064-21.844.65-41.957 6.898-58.344 17.187-2.884 1.812-5.663 3.757-8.312 5.814 1.33 3.094 2.758 5.884 4.406 8.218 1.92 2.72 4.004 4.936 6.906 6.688 2.202-1.717 4.498-3.375 6.938-4.906 1.063-.668 2.145-1.34 3.25-1.97 8.196 10.088 15.465 24.624 25.47 47.25-23.907-10.568-38.822-18.04-49.033-27 .024-.03.04-.063.064-.093-.433-.33-.867-.655-1.28-1-.013-.008-.022-.02-.033-.03-11.215-10.375-16.532-22.934-22.31-44.5 5.988 1.605 11.256 3.19 16 4.844 8.53-6.46 17.51-11.71 26.81-15.875-9.5-7.738-18.552-11.93-26.686-12.97-1.443-.185-2.87-.3-4.282-.313zM493.28 64.374c-77.985 0-125.587 28.886-146.124 69.406-20.536 40.52-13.994 90.39 9.688 131.407 11.385 19.72 17.807 40.687 19.187 61.22 6.27 6.475 12.425 12.867 18.47 19.187 2.31-29.955-5.072-61.35-21.47-89.75-21.13-36.602-26.155-80.112-9.186-113.594 16.97-33.481 55.94-59.188 129.437-59.188V64.376zM37.907 114.938c-2.894 23.925 6.18 50.21 29.532 73.562l13.218-13.188c-15.97-15.97-23.188-31.833-24.437-46.593-6.646-4.51-12.754-9.102-18.314-13.782zM124.062 277c-24.466-.028-45.04 4.92-61.343 13.656-24.842 13.31-39.363 35.865-40.75 60.47-2.78 49.207 44.38 102.65 140.405 118.28 101.63 16.544 170.303-9.184 205.406-54.062 1.01-1.29 1.988-2.59 2.94-3.906-4.552-4.232-9.148-8.52-13.783-12.875-1.233 1.79-2.52 3.55-3.875 5.28-29.97 38.315-90.355 62.97-187.687 47.126-90.394-14.715-126.796-62.527-124.75-98.783 1.023-18.127 10.982-34.37 30.938-45.062 19.955-10.692 50.267-15.364 90.5-7.47 34.077 6.69 62.938 3.47 85.437-6.936-4.72-4.65-9.49-9.33-14.28-14.064-17.545 6.452-39.89 8.088-67.564 2.656-14.895-2.923-28.778-4.297-41.594-4.312z"},child:[]}]})(e)}const lC=({lines:e=1,width:t="100%"})=>m.jsx(m.Fragment,{children:[...Array(e)].map((e,n)=>m.jsx("div",{className:"shimmer-text",style:{width:"object"==typeof t?t[n]||"100%":t,marginBottom:"8px"}},n))}),cC=({height:e="300px",width:t="100%",className:n=""})=>m.jsx("div",{className:`shimmer-image ${n}`,style:{height:e,width:t}}),uC=({height:e="250px",width:t="100%"})=>m.jsxs("div",{className:"shimmer-card",style:{height:e,width:t},children:[m.jsx("div",{className:"shimmer-card-icon"}),m.jsx("div",{className:"shimmer-card-title"}),m.jsx(lC,{lines:3})]}),dC=({type:e="default"})=>{switch(e){case"hero":return m.jsxs("div",{className:"shimmer-hero-section",children:[m.jsx(lC,{width:"60%",height:"40px"}),m.jsx(lC,{width:"80%",height:"24px"})]});case"story":return m.jsxs("div",{className:"shimmer-story-section",children:[m.jsx(lC,{width:"40%",height:"32px"}),m.jsxs("div",{className:"shimmer-story-content",children:[m.jsx("div",{className:"shimmer-story-text",children:m.jsx(lC,{lines:4})}),m.jsx(cC,{height:"400px",width:"100%"})]})]});case"values":return m.jsxs("div",{className:"shimmer-values-section",children:[m.jsx(lC,{width:"30%",height:"32px"}),m.jsxs("div",{className:"shimmer-values-grid",children:[m.jsx(uC,{}),m.jsx(uC,{}),m.jsx(uC,{})]})]});case"craftsmanship":return m.jsxs("div",{className:"shimmer-craftsmanship-section",children:[m.jsxs("div",{className:"shimmer-craft-content",children:[m.jsx(lC,{width:"40%",height:"32px"}),m.jsx(lC,{lines:3}),m.jsx(lC,{width:"25%",height:"40px"})]}),m.jsxs("div",{className:"shimmer-craft-gallery",children:[m.jsxs("div",{className:"shimmer-gallery-row",children:[m.jsx(cC,{height:"200px",width:"48%"}),m.jsx(cC,{height:"200px",width:"48%"})]}),m.jsxs("div",{className:"shimmer-gallery-row",children:[m.jsx(cC,{height:"200px",width:"48%"}),m.jsx(cC,{height:"200px",width:"48%"})]})]})]});case"team":return m.jsxs("div",{className:"shimmer-team-section",children:[m.jsx(lC,{width:"50%",height:"32px"}),m.jsx(lC,{lines:2,width:"90%"}),m.jsxs("div",{className:"shimmer-commitment",children:[m.jsx(lC,{width:"40%",height:"24px"}),m.jsx(lC,{lines:3}),m.jsx("div",{className:"shimmer-signature",children:m.jsx(lC,{width:"20%",height:"20px"})})]})]});default:return m.jsxs("div",{className:"shimmer-default-section",children:[m.jsx(lC,{width:"40%",height:"32px"}),m.jsx(lC,{lines:3})]})}},hC=()=>{var e;const[t,n]=g.useState(null),[r,i]=g.useState(!0),[s,a]=g.useState(null);if(g.useEffect(()=>{window.scrollTo(0,0);(async()=>{try{const e=await(async()=>{try{const e=om(C_,"AboutUs","content"),t=await lg(e);if(t.exists()){const e=t.data();return console.log("Fetched about content data:",e),e}return console.log("No about content found"),null}catch(s){throw console.error("Error fetching about content:",s),new Error(`Failed to fetch about content: ${s.message}`)}})();if(console.log("Fetched about content:",e),!e)throw new Error("No content received from Firebase");n(e)}catch(e){console.error("Failed to fetch about content:",e),a("Failed to load content. Please try again later.")}finally{i(!1)}})()},[]),s)return m.jsxs("div",{className:jS,children:[m.jsx("h2",{children:"Oops!"}),m.jsx("p",{children:s}),m.jsx("button",{onClick:()=>window.location.reload(),children:"Try Again"})]});const o={title:(null==t?void 0:t.heroTitle)?`${t.heroTitle} | Origins By The Sea`:"About Us | Origins By The Sea",description:(null==t?void 0:t.heroSubtitle)||"Learn about our passion for sustainable fashion, our commitment to craftsmanship, and our journey to create beautiful, ethical clothing.",ogImage:(null==t?void 0:t.heroBackgroundImage)||"https://originsbythesea.com/images/hero-banner.jpg",canonicalUrl:"https://originsbythesea.com/about",keywords:"sustainable fashion, ethical clothing, handcrafted fashion, about origins by the sea, fashion craftsmanship, eco-friendly fashion",type:"website",pageType:"AboutPage",schema:{"@context":"https://schema.org","@type":"AboutPage",name:(null==t?void 0:t.heroTitle)||"About Origins By The Sea",description:(null==t?void 0:t.heroSubtitle)||"Learn about our sustainable fashion journey",publisher:{"@type":"Organization",name:"Origins By The Sea",logo:{"@type":"ImageObject",url:"https://originsbythesea.com/images/logo.png"}},image:(null==t?void 0:t.heroBackgroundImage)||"https://originsbythesea.com/images/hero-banner.jpg",url:"https://originsbythesea.com/about",mainEntityOfPage:{"@type":"WebPage","@id":"https://originsbythesea.com/about"}}};return m.jsxs("div",{className:IS,children:[m.jsx(Zw,{...o}),m.jsx("section",{className:AS,style:(null==t?void 0:t.heroBackgroundImage)?{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${t.heroBackgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{},children:m.jsx("div",{className:PS,children:m.jsx("div",{className:OS,children:r?m.jsx(dC,{type:"hero"}):m.jsxs(m.Fragment,{children:[(null==t?void 0:t.heroTitle)&&m.jsx("h1",{children:t.heroTitle}),(null==t?void 0:t.heroSubtitle)&&m.jsx("p",{className:DS,children:t.heroSubtitle})]})})})}),m.jsx("section",{className:RS,children:m.jsx("div",{className:LS,children:r?m.jsx(dC,{type:"story"}):m.jsxs(m.Fragment,{children:[(null==t?void 0:t.storyTitle)&&m.jsx("h2",{className:MS,children:t.storyTitle}),m.jsxs("div",{className:FS,children:[(null==t?void 0:t.story)&&m.jsx("div",{className:zS,children:m.jsx("div",{dangerouslySetInnerHTML:{__html:t.story}})}),(null==t?void 0:t.storyImage)&&m.jsx("div",{className:US,children:m.jsx("img",{src:t.storyImage,alt:"Our Story",style:{width:"100%",height:"100%",objectFit:"cover",display:"block",maxHeight:"500px"},onError:e=>{console.error("Error loading story image:",t.storyImage),e.target.src="/images/brand-intro.png"}})})]})]})})}),m.jsx("section",{className:BS,children:m.jsx("div",{className:$S,children:r?m.jsx(dC,{type:"values"}):m.jsxs(m.Fragment,{children:[m.jsx("h2",{className:MS,children:"Our Values"}),m.jsx("div",{className:VS,children:null==(e=null==t?void 0:t.values)?void 0:e.map((e,t)=>{var n,r;let i=oC;return(null==(n=e.title)?void 0:n.toLowerCase().includes("sustainability"))?i=sC:(null==(r=e.title)?void 0:r.toLowerCase().includes("community"))&&(i=aC),m.jsxs("div",{className:qS,children:[m.jsx("div",{className:HS,children:m.jsx(i,{size:40})}),m.jsx("h3",{children:e.title}),m.jsx("p",{children:e.description})]},t)})})]})})}),m.jsx("section",{className:WS,children:m.jsx("div",{className:GS,children:r?m.jsx(dC,{type:"craftsmanship"}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:KS,children:[(null==t?void 0:t.craftsmanshipTitle)&&m.jsx("h2",{className:MS,children:t.craftsmanshipTitle}),(null==t?void 0:t.craftsmanship)&&m.jsx("div",{dangerouslySetInnerHTML:{__html:t.craftsmanship}}),m.jsx("button",{className:QS,onClick:()=>window.location.href="/shop",children:"View all Collections"})]}),(null==t?void 0:t.craftsmanshipImage)&&m.jsx("div",{className:YS,children:m.jsx("img",{className:XS,src:t.craftsmanshipImage,alt:"Craftsmanship",style:{width:"100%",height:"100%",objectFit:"cover",display:"block",maxHeight:"600px"},onError:e=>{console.error("Error loading craftsmanship image:",t.craftsmanshipImage),e.target.src="/images/crafts-man-ship-1.png"}})})]})})}),m.jsx("section",{className:JS,children:m.jsx("div",{className:ZS,children:r?m.jsx(dC,{type:"team"}):m.jsxs(m.Fragment,{children:[(null==t?void 0:t.teamTitle)&&m.jsx("h2",{className:MS,children:t.teamTitle}),m.jsx("div",{className:eC,children:m.jsx("p",{children:t.team})}),((null==t?void 0:t.commitmentTitle)||(null==t?void 0:t.commitmentDescription)||(null==t?void 0:t.companyName))&&m.jsxs("div",{className:tC,children:[(null==t?void 0:t.commitmentTitle)&&m.jsx("h3",{children:t.commitmentTitle}),(null==t?void 0:t.commitmentDescription)&&m.jsx("div",{dangerouslySetInnerHTML:{__html:t.commitmentDescription}}),(null==t?void 0:t.companyName)&&m.jsxs("p",{className:nC,children:["With gratitude,",m.jsx("br",{}),m.jsx("span",{children:t.companyName})]})]})]})})})]})};function fC(e){return mb({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}const pC="_shopContainer_14837_2",mC="_shopContent_14837_11",gC="_mobileFilterHeader_14837_19",yC="_filterToggle_14837_28",vC="_filtersPanel_14837_41",_C="_filterHeader_14837_52",bC="_filterActions_14837_66",wC="_resetButton_14837_72",xC="_closeFilters_14837_82",SC="_filterBody_14837_90",CC="_filterSection_14837_95",kC="_filterHeading_14837_106",EC="_expanded_14837_124",TC="_filterOptions_14837_129",NC="_filterOption_14837_129",IC="_sizeOptions_14837_154",jC="_sizeOption_14837_154",AC="_active_14837_177",PC="_colorOptions_14837_184",OC="_colorOption_14837_184",DC="_activeColor_14837_204",RC="_colorCheck_14837_208",LC="_customColorSection_14837_218",MC="_customColorOption_14837_222",FC="_customColorIcon_14837_229",zC="_colorPickerContainer_14837_236",UC="_colorPickerInput_14837_249",BC="_colorPickerControls_14837_257",$C="_colorPreview_14837_263",VC="_addCustomColorBtn_14837_270",qC="_sortOptions_14837_286",HC="_sortOption_14837_286",WC="_productsArea_14837_309",GC="_productsHeader_14837_313",KC="_title_14837_320",QC="_resultsInfo_14837_328",YC="_productsGrid_14837_334",XC="_searchInputContainer_14837_341",JC="_searchInput_14837_341",ZC="_searchIcon_14837_354",ek="_clearSearch_14837_362",tk="_sortSelectContainer_14837_372",nk="_sortSelect_14837_372",rk="_desktopSearch_14837_399",ik="_applyFilters_14837_404",sk="_applyButton_14837_409",ak="_clearAllFiltersButton_14837_422",ok="_paginationContainer_14837_445",lk="_paginationButtons_14837_451",ck="_pageNumbers_14837_457",uk="_pageButton_14837_462",dk="_activePage_14837_463",hk="_nextButton_14837_464",fk="_noResults_14837_496",pk="_filterOverlay_14837_522",mk="_visible_14837_535",gk="_filterOpen_14837_566",yk="_mobileSearch_14837_584",vk="_desktopSort_14837_593",_k="_activeFilterTags_14837_640",bk="_filterTag_14837_650",wk="_removeTag_14837_672",xk="_categoryOptions_14837_684",Sk="_categoryLink_14837_715",Ck="_loadingContainer_14837_734",kk="_shimmerProductGrid_14837_739",Ek="_shimmerProduct_14837_739",Tk="_shimmerImage_14837_753",Nk="_shimmerTitle_14837_762",Ik="_shimmerPrice_14837_771",jk=e=>{if(null==e)return console.error("Received null or undefined color code"),"#000000";const t=String(e).trim();if(t.startsWith("#"))return t;try{const n=parseInt(t);if(isNaN(n))return console.error("Invalid color code:",t),"#000000";const r=n>>8&255,i=255&n,s=`#${(n>>16&255).toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`;return console.log(`Converted color code ${e} to hex: ${s}`),s}catch(XD){return console.error("Error parsing color code",XD),"#000000"}},Ak=e=>{if(null==e)return"Unknown";return{"#ff0000":"Red","#00ff00":"Green","#0000ff":"Blue","#ffff00":"Yellow","#00ffff":"Cyan","#ff00ff":"Magenta","#000000":"Black","#ffffff":"White","#ffa500":"Orange","#800080":"Purple","#a52a2a":"Brown","#ffc0cb":"Pink","#808080":"Gray","#00aaff":"Sky Blue","#ffd700":"Gold","#f08080":"Light Coral","#e6994b":"Amber"}[jk(e).toLowerCase()]||String(e)},Pk=e=>{const{r:t,g:n,b:r}=(e=>{const t=e.startsWith("#")?e:`#${e}`;return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16)}})(e);if(Math.abs(t-n)<=30&&Math.abs(n-r)<=30&&Math.abs(t-r)<=30)return t+n+r<150?"black":t+n+r>600?"white":"gray";if(t>n&&t>r){if(n>150&&r<100)return"orange";if(n<100&&r<100)return"red";if(n>150&&r>150)return"pink"}if(n>t&&n>r){if(t>150&&r<100)return"lime";if(t<100&&r<100)return"green";if(t<100&&r>150)return"teal"}if(r>t&&r>n){if(t>150&&n<100)return"purple";if(t<100&&n<100)return"blue";if(t<100&&n>150)return"cyan"}return t>180&&n>180&&r<100?"yellow":"unknown"},Ok=e=>{if(!e)return"AE";return{"united arab emirates":"AE",uae:"AE","saudi arabia":"SA",qatar:"QA",kuwait:"KW",bahrain:"BH",oman:"OM",jordan:"JO",lebanon:"LB",egypt:"EG",india:"IN",pakistan:"PK","united states":"US",usa:"US","united kingdom":"GB",uk:"GB"}[e.toLowerCase().trim()]||"AE"},Dk=[{id:1,label:"Under AED 1,000",min:0,max:1e3},{id:2,label:"AED 1,000 - AED 2,000",min:1e3,max:2e3},{id:3,label:"AED 2,000 - AED 3,000",min:2e3,max:3e3},{id:4,label:"AED 3,000 - AED 5,000",min:3e3,max:5e3},{id:5,label:"Over AED 5,000",min:5e3,max:1/0}],Rk=["XS","S","M","L","XL","XXL"],Lk=[{name:"Red",value:"#ff0000"},{name:"Blue",value:"#00aaff"},{name:"Green",value:"#32cd32"},{name:"Black",value:"#000000"},{name:"White",value:"#ffffff"},{name:"Navy",value:"#000080"},{name:"Purple",value:"#800080"},{name:"Pink",value:"#ff69b4"},{name:"Brown",value:"#8b4513"},{name:"Gray",value:"#808080"}],Mk=[{id:"newest",label:"Newest"},{id:"popularity",label:"Most Popular"},{id:"priceAsc",label:"Price: Low to High"},{id:"priceDesc",label:"Price: High to Low"}],Fk=()=>{const e=zr(),t=we(),[n]=dt(),{categoryId:r,collectionId:i}=function(){let{matches:e}=g.useContext(me),t=e[e.length-1];return t?t.params:{}}(),s=(i||n.get("id")||"").toString(),a=(r||n.get("category")||"").toString(),[o,l]=g.useState([]),[c,u]=g.useState([]),[d,h]=g.useState([]),[f,p]=g.useState([]),[y,v]=g.useState("#ffffff"),[_,b]=g.useState(!1),w=g.useRef(null),[x,S]=g.useState(s?[s]:[]),[C,k]=g.useState(""),[E,T]=g.useState("newest"),[N,I]=g.useState(!1),[j,A]=g.useState(""),[P,O]=g.useState([]),[D,R]=g.useState(!0),{products:L,currentPage:M,productsPerPage:F,status:z}=$r(e=>e.product),[U,B]=g.useState({category:!0,price:!0,size:!0,color:!0,sort:!0});g.useEffect(()=>{(async()=>{try{const e=am(C_,"collections"),t=(await ug(e)).docs.map(e=>{String(e.id).trim();return{id:e.data().id,label:e.data().name||"Unknown Collection"}});console.log("All categories:",t.map(e=>`${e.label} (${e.id})`)),O(t)}catch(e){console.error("Error fetching categories:",e)}})()},[]);g.useEffect(()=>{"idle"===z&&e(_x())},[z,e]),g.useEffect(()=>{console.log("URL parameters changed, updating filters:",{collectionId:s,categoryParam:a});const e=[];if(s&&s.length>0){const t=String(s).trim();e.includes(t)||e.push(t);(async()=>{try{const e=om(C_,"collections",t),n=await lg(e);if(n.exists()){const e=n.data();A(e.name||"Collection"),console.log("Found collection name:",e.name)}else{console.warn("Collection not found for ID:",t);const e=am(C_,"collections"),n=await ug(e);for(const r of n.docs)if(String(r.id).trim()===t){const e=r.data();A(e.name||"Collection"),console.log("Found collection by string matching:",e.name);break}}}catch(e){console.error("Error fetching collection name:",e)}})()}else A("");if(a&&a.length>0){const t=String(a).trim();e.includes(t)||e.push(t)}console.log("Setting category filters to:",e),S(e)},[s,a]);const $=e=>{B({...U,[e]:!U[e]})};g.useEffect(()=>{const e=e=>{w.current&&!w.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const V=e=>{T(e)},q=e=>{k(e.target.value)},H=()=>{u([]),h([]),p([]),S([]),k(""),T("newest"),t("/shop")},W=()=>{I(!N)};g.useEffect(()=>{if("succeeded"!==z||!L.length)return;R(!0);let t=[...L];if(console.log("Filtering from total products:",L.length),console.log("Category filters:",x),x.length>0){console.log("Before category filtering, products count:",t.length),console.log("Applying category filters:",x.map(e=>`"${e}"`).join(", "));const e=x.map(e=>String(e).trim()),n=[];if(L.forEach(e=>{if(e.collection_id){const t=String(e.collection_id).trim();n.includes(t)||n.push(t)}}),console.log("Available collection IDs in products:",n),t=t.filter(t=>{if(!t)return!1;if(t.collection_id){const n=String(t.collection_id).trim();if(e.includes(n))return console.log(` Product "${t.name}" (${t.id}) matches collection "${n}"`),!0}if(t.categories&&Array.isArray(t.categories)&&t.categories.length>0)for(const n of t.categories){const r="object"==typeof n?String(n.id).trim():String(n).trim();if(e.includes(r))return console.log(` Product "${t.name}" (${t.id}) matches via categories array with "${r}"`),!0}return console.log(` Product "${t.name}" (${t.id}) doesn't match any selected categories`),!1}),console.log("After filtering by collection/category, products count:",t.length),0===t.length){console.warn("No products match the selected categories. Debug info:"),console.warn("- Selected category filters:",e),console.warn("- Available collection IDs in products:",n);const t=L.slice(0,3);console.warn("Sample product data:",t.map(e=>({id:e.id,name:e.name,collection_id:e.collection_id?String(e.collection_id):"null",categories:e.categories||[]})))}}switch(C&&(t=t.filter(e=>e.name.toLowerCase().includes(C.toLowerCase()))),c.length>0&&(t=t.filter(e=>{const t=void 0!==e.rawPrice?e.rawPrice:"string"==typeof e.price?Number(e.price.replace(/[^0-9.-]+/g,"")):Number(e.price||0);return c.some(e=>{const n=Dk.find(t=>t.id===e);return t>=n.min&&t<=n.max})})),d.length>0&&(t=t.filter(e=>e.sizes&&d.some(t=>e.sizes.map(e=>e.toUpperCase()).includes(t)))),f.length>0&&(t=t.filter(e=>!(!e.colors||!Array.isArray(e.colors))&&f.some(t=>e.colors.some(e=>{const n=jk(e),r=jk(t);return n.toLowerCase()===r.toLowerCase()||((e,t)=>{const n=jk(e),r=jk(t),i=Pk(n),s=Pk(r);return i===s&&"unknown"!==i&&console.log(`Color match: ${n} and ${r} are both in the ${i} family`),i===s&&"unknown"!==i})(n,r)})))),E){case"priceAsc":t.sort((e,t)=>(void 0!==e.rawPrice?e.rawPrice:"string"==typeof e.price?Number(e.price.replace(/[^0-9.-]+/g,"")):Number(e.price||0))-(void 0!==t.rawPrice?t.rawPrice:"string"==typeof t.price?Number(t.price.replace(/[^0-9.-]+/g,"")):Number(t.price||0)));break;case"priceDesc":t.sort((e,t)=>{const n=void 0!==e.rawPrice?e.rawPrice:"string"==typeof e.price?Number(e.price.replace(/[^0-9.-]+/g,"")):Number(e.price||0);return(void 0!==t.rawPrice?t.rawPrice:"string"==typeof t.price?Number(t.price.replace(/[^0-9.-]+/g,"")):Number(t.price||0))-n});break;case"popularity":t.sort((e,t)=>(t.stock||0)-(e.stock||0));break;default:t.sort((e,t)=>{const n=e.created_at?new Date(e.created_at):new Date(0);return(t.created_at?new Date(t.created_at):new Date(0))-n})}l(t),R(!1),e(wx(1))},[L,C,c,d,f,E,e,x,z]);const G=Math.ceil(o.length/F),K=o.slice((M-1)*F,M*F),Q=t=>{e(wx(t)),document.querySelector(`.${YC}`).scrollIntoView({behavior:"smooth"})},Y=c.length+d.length+f.length+(x.length-(s&&s.length>0?1:0));return"loading"===z||"idle"===z&&!L.length?m.jsx("div",{className:pC,children:m.jsx("div",{className:Ck,children:m.jsx("div",{className:kk,children:[...Array(8)].map((e,t)=>m.jsxs("div",{className:Ek,children:[m.jsx("div",{className:Tk}),m.jsx("div",{className:Nk}),m.jsx("div",{className:Ik})]},t))})})}):m.jsxs("div",{className:pC,children:[m.jsxs("div",{className:gC,children:[m.jsxs("div",{className:yC,onClick:W,children:[m.jsx(Mb,{size:24}),m.jsxs("span",{children:["Filters ",Y>0&&`(${Y})`]})]}),m.jsx("div",{className:yk,children:m.jsxs("div",{className:XC,children:[m.jsx(Fb,{className:ZC}),m.jsx("input",{type:"text",placeholder:"Search products...",value:C,onChange:q,className:JC}),C&&m.jsx(_b,{className:ek,onClick:()=>k("")})]})}),m.jsx("div",{className:tk,children:m.jsxs("select",{value:E,onChange:e=>V(e.target.value),className:nk,children:[m.jsx("option",{value:"",disabled:!0,children:"Sort by"}),Mk.map(e=>m.jsx("option",{value:e.id,children:e.label},e.id))]})})]}),m.jsxs("div",{className:mC,children:[m.jsxs("aside",{className:`${vC} ${N?gk:""}`,children:[m.jsxs("div",{className:_C,children:[m.jsx("h3",{children:"Filters"}),m.jsxs("div",{className:bC,children:[Y>0&&m.jsx("button",{className:wC,onClick:H,children:"Clear All"}),m.jsx("button",{className:xC,onClick:W,children:m.jsx(_b,{size:24})})]})]}),m.jsxs("div",{className:SC,children:[m.jsx("button",{className:ak,onClick:H,children:"Clear All Filters"}),m.jsx("div",{className:rk,children:m.jsxs("div",{className:XC,children:[m.jsx(Fb,{className:ZC}),m.jsx("input",{type:"text",placeholder:"Search products...",value:C,onChange:q,className:JC}),C&&m.jsx(_b,{className:ek,onClick:()=>k("")})]})}),Y>0&&m.jsxs("div",{className:_k,children:[x.filter(e=>e!==s).map(e=>{const t=P.find(t=>String(t.id).trim()===String(e).trim());if(!t)return null;const n=t.label.replace(/\s*\(\d+\)$/,"");return m.jsxs("div",{className:bk,children:[m.jsx("span",{children:n}),m.jsx(_b,{className:wk,size:14,onClick:()=>S(x.filter(t=>String(t).trim()!==String(e).trim()))})]},`cat-${e}`)}),c.map(e=>{const t=Dk.find(t=>t.id===e);return m.jsxs("div",{className:bk,children:[m.jsx("span",{children:null==t?void 0:t.label}),m.jsx(_b,{className:wk,size:14,onClick:()=>u(c.filter(t=>t!==e))})]},`price-${e}`)}),d.map(e=>m.jsxs("div",{className:bk,children:[m.jsxs("span",{children:["Size: ",e]}),m.jsx(_b,{className:wk,size:14,onClick:()=>h(d.filter(t=>t!==e))})]},`size-${e}`)),f.map(e=>{const t=Lk.find(t=>t.value===e)||{name:Ak(e)};return Pk(jk(e)),m.jsxs("div",{className:bk,children:[m.jsxs("span",{children:["Color: ",t.name]}),m.jsx(_b,{className:wk,size:14,onClick:()=>p(f.filter(t=>t!==e))})]},`color-${e}`)})]}),m.jsx("div",{className:vk,children:m.jsxs("div",{className:CC,children:[m.jsxs("div",{className:kC,onClick:()=>$("sort"),children:[m.jsx("h4",{children:"Sort By"}),m.jsx(fC,{className:U.sort?EC:""})]}),U.sort&&m.jsx("div",{className:qC,children:Mk.map(e=>m.jsx("div",{className:`${HC} ${E===e.id?AC:""}`,onClick:()=>V(e.id),children:e.label},e.id))})]})}),m.jsxs("div",{className:CC,children:[m.jsxs("div",{className:kC,onClick:()=>$("category"),children:[m.jsx("h4",{children:"Category"}),m.jsx(fC,{className:U.category?EC:""})]}),U.category&&m.jsx("div",{className:xk,children:P.map(e=>m.jsx("div",{className:`${Sk} ${x.includes(String(e.id).trim())?AC:""}`,onClick:()=>(e=>{t(`/shop?id=${e.id}`),window.scrollTo(0,0)})(e),style:{cursor:"pointer"},children:e.label},e.id))})]}),m.jsxs("div",{className:CC,children:[m.jsxs("div",{className:kC,onClick:()=>$("price"),children:[m.jsx("h4",{children:"Price"}),m.jsx(fC,{className:U.price?EC:""})]}),U.price&&m.jsx("div",{className:TC,children:Dk.map(e=>m.jsxs("label",{className:NC,children:[m.jsx("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>(e=>{c.includes(e.id)?u(c.filter(t=>t!==e.id)):u([...c,e.id])})(e)}),m.jsx("span",{children:e.label})]},e.id))})]}),m.jsxs("div",{className:CC,children:[m.jsxs("div",{className:kC,onClick:()=>$("size"),children:[m.jsx("h4",{children:"Size"}),m.jsx(fC,{className:U.size?EC:""})]}),U.size&&m.jsx("div",{className:IC,children:Rk.map(e=>m.jsx("div",{className:`${jC} ${d.includes(e)?AC:""}`,onClick:()=>(e=>{d.includes(e)?h(d.filter(t=>t!==e)):h([...d,e])})(e),children:e},e))})]}),m.jsxs("div",{className:CC,children:[m.jsxs("div",{className:kC,onClick:()=>$("color"),children:[m.jsx("h4",{children:"Color"}),m.jsx(fC,{className:U.color?EC:""})]}),U.color&&m.jsxs("div",{className:PC,children:[Lk.map(e=>m.jsx("div",{className:`${OC} ${f.includes(e.value)?DC:""}`,onClick:()=>(e=>{f.includes(e.value)?p(f.filter(t=>t!==e.value)):p([...f,e.value])})(e),style:{backgroundColor:e.value},title:`${e.name} (includes similar shades)`,children:f.includes(e.value)&&m.jsx("span",{className:RC,children:""})},e.value)),m.jsxs("div",{className:LC,ref:w,children:[m.jsx("div",{className:`${OC} ${MC}`,onClick:()=>b(!_),style:{background:"linear-gradient(135deg, red, orange, yellow, green, blue, indigo, violet)",position:"relative"},title:"Choose custom color",children:m.jsx("span",{className:FC,children:"+"})}),_&&m.jsxs("div",{className:zC,children:[m.jsx("input",{type:"color",value:y,onChange:e=>v(e.target.value),className:UC}),m.jsxs("div",{className:BC,children:[m.jsx("div",{className:$C,style:{backgroundColor:y}}),m.jsx("button",{className:VC,onClick:()=>{f.includes(y)||p([...f,y]),b(!1)},children:"Add Color"})]})]})]}),f.filter(e=>!Lk.some(t=>t.value===e)).map(e=>m.jsx("div",{className:`${OC} ${DC}`,onClick:()=>p(f.filter(t=>t!==e)),style:{backgroundColor:e},title:`Custom color (${e})`,children:m.jsx("span",{className:RC,children:""})},e))]})]}),m.jsx("div",{className:ik,children:m.jsx("button",{className:sk,onClick:W,children:"Apply Filters"})})]})]}),m.jsxs("div",{className:WC,children:[m.jsxs("div",{className:GC,children:[m.jsx("h2",{className:KC,children:C?`Search results for "${C}"`:j||"All Products"}),m.jsxs("div",{className:QC,children:["Showing ",K.length," of ",o.length," ","products"]})]}),D?m.jsx("div",{className:kk,children:[...Array(8)].map((e,t)=>m.jsxs("div",{className:Ek,children:[m.jsx("div",{className:Tk}),m.jsx("div",{className:Nk}),m.jsx("div",{className:Ik})]},t))}):m.jsx("div",{className:YC,children:K.length>0?K.map(e=>m.jsx(Qw,{product:e},e.id)):m.jsxs("div",{className:fk,children:[m.jsx("h3",{children:"No products found"}),m.jsx("p",{children:"Try adjusting your filters or search terms"}),m.jsx("button",{className:wC,onClick:H,children:"Clear All Filters"})]})}),o.length>0&&!D&&m.jsx("div",{className:ok,children:m.jsxs("div",{className:lk,children:[m.jsx("span",{className:ck,children:[...Array(G)].map((e,t)=>m.jsx("button",{onClick:()=>Q(t+1),className:M===t+1?dk:uk,children:t+1},t+1))}),m.jsx("button",{onClick:()=>Q(M+1),disabled:M===G,className:hk,"aria-label":"Next page",children:""})]})})]})]}),m.jsx("div",{className:`${pk} ${N?mk:""}`,onClick:W})]})},zk=()=>{const e=ve(),[t]=dt();return g.useEffect(()=>{console.log("Shop component detected URL change:",e.pathname,e.search),(t.has("id")||e.pathname.includes("/collection/"))&&window.scrollTo(0,0)},[e,t]),m.jsxs(Me,{children:[m.jsx(Re,{index:!0,element:m.jsx(Fk,{})}),m.jsx(Re,{path:"category/:categoryId",element:m.jsx(Fk,{})}),m.jsx(Re,{path:"collection/:collectionId",element:m.jsx(Fk,{})}),m.jsx(Re,{path:"/",element:m.jsx(Fk,{})}),m.jsx(Re,{path:"*",element:m.jsx(Oe,{to:"/shop",replace:!0})})]})},Uk={container:"_container_p69qi_1",imageSection:"_imageSection_p69qi_11",detailsSection:"_detailsSection_p69qi_19",mainImageContainer:"_mainImageContainer_p69qi_28",mainImage:"_mainImage_p69qi_28",slideControlButton:"_slideControlButton_p69qi_42",thumbnailContainer:"_thumbnailContainer_p69qi_64",thumbnail:"_thumbnail_p69qi_64",active:"_active_p69qi_88",title:"_title_p69qi_94",price:"_price_p69qi_103",optionGroup:"_optionGroup_p69qi_110",sizes:"_sizes_p69qi_117",colorButton:"_colorButton_p69qi_124",colors:"_colors_p69qi_162",sizeButton:"_sizeButton_p69qi_168",selected:"_selected_p69qi_168",quantitySelector:"_quantitySelector_p69qi_174",actionButtons:"_actionButtons_p69qi_193",addToCart:"_addToCart_p69qi_203",carouselOverlay:"_carouselOverlay_p69qi_233",carouselImage:"_carouselImage_p69qi_246",carouselImageContainer:"_carouselImageContainer_p69qi_259",closeButton:"_closeButton_p69qi_272",navButton:"_navButton_p69qi_289",prevButton:"_prevButton_p69qi_305",nextButton:"_nextButton_p69qi_309",imageZoom:"_imageZoom_p69qi_399",enlargedImage:"_enlargedImage_p69qi_406",shimmer:"_shimmer_p69qi_433",errorContainer:"_errorContainer_p69qi_451",backButton:"_backButton_p69qi_472",favoriteButton:"_favoriteButton_p69qi_487"};function Bk(e){return mb({attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",strokeWidth:"2",points:"7 2 17 12 7 22"},child:[]}]})(e)}function $k(e){return mb({attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",strokeWidth:"2",points:"7 2 17 12 7 22",transform:"matrix(-1 0 0 1 24 0)"},child:[]}]})(e)}function Vk(e){return mb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}var qk,Hk={},Wk={};var Gk,Kk={};var Qk,Yk={};var Xk,Jk,Zk={};const eE=i(function(){if(Jk)return Hk;Jk=1,Object.defineProperty(Hk,"__esModule",{value:!0});var e=i(function(){if(qk)return Wk;qk=1,Object.defineProperty(Wk,"__esModule",{value:!0});var e={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(e.hover=window.matchMedia("(hover: hover)").matches,e.none=window.matchMedia("(hover: none)").matches||window.matchMedia("(hover: on-demand)").matches,e.anyHover=window.matchMedia("(any-hover: hover)").matches,e.anyNone=window.matchMedia("(any-hover: none)").matches||window.matchMedia("(any-hover: on-demand)").matches)}};return e.update(),Wk.default=e,Wk}()),t=i(function(){if(Gk)return Kk;Gk=1,Object.defineProperty(Kk,"__esModule",{value:!0});var e={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(e.fine=window.matchMedia("(pointer: fine)").matches,e.coarse=window.matchMedia("(pointer: coarse)").matches,e.none=window.matchMedia("(pointer: none)").matches,e.anyFine=window.matchMedia("(any-pointer: fine)").matches,e.anyCoarse=window.matchMedia("(any-pointer: coarse)").matches,e.anyNone=window.matchMedia("(any-pointer: none)").matches)}};return e.update(),Kk.default=e,Kk}()),n=i(function(){if(Qk)return Yk;Qk=1,Object.defineProperty(Yk,"__esModule",{value:!0});var e={update:function(){"undefined"!=typeof window&&(e.hasSupport="ontouchstart"in window,e.browserSupportsApi=Boolean(window.TouchEvent))}};return e.update(),Yk.default=e,Yk}()),r=i(function(){if(Xk)return Zk;Xk=1,Object.defineProperty(Zk,"__esModule",{value:!0});var e={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var t=!1,n=Object.defineProperty({},"passive",{get:function(){t=!0}}),r=function(){};window.addEventListener("testPassiveEventSupport",r,n),window.removeEventListener("testPassiveEventSupport",r,n),e.hasSupport=t}}};return e.update(),Zk.default=e,Zk}());function i(e){return e&&e.__esModule?e:{default:e}}var s={state:{detectHover:e.default,detectPointer:t.default,detectTouchEvents:n.default,detectPassiveEvents:r.default},update:function(){s.state.detectHover.update(),s.state.detectPointer.update(),s.state.detectTouchEvents.update(),s.state.detectPassiveEvents.update(),s.updateOnlyOwnProperties()},updateOnlyOwnProperties:function(){var e,t,n,r;"undefined"!=typeof window&&(s.passiveEvents=s.state.detectPassiveEvents.hasSupport||!1,s.hasTouch=s.state.detectTouchEvents.hasSupport||!1,s.deviceType=(e=s.hasTouch,t=s.state.detectHover.anyHover,n=s.state.detectPointer.anyFine,r=s.state,e&&(t||n)?"hybrid":e&&Object.keys(r.detectHover).filter(function(e){return"update"!==e}).every(function(e){return!1===r.detectHover[e]})&&Object.keys(r.detectPointer).filter(function(e){return"update"!==e}).every(function(e){return!1===r.detectPointer[e]})?window.navigator&&/android/.test(window.navigator.userAgent.toLowerCase())?"touchOnly":"hybrid":e?"touchOnly":"mouseOnly"),s.hasMouse="touchOnly"!==s.deviceType,s.primaryInput=("mouseOnly"===s.deviceType?"mouse":"touchOnly"===s.deviceType&&"touch")||s.state.detectHover.hover&&"mouse"||s.state.detectHover.none&&"touch"||"mouse",/windows/.test(window.navigator.userAgent.toLowerCase())&&/chrome/.test(window.navigator.userAgent.toLowerCase())&&parseInt(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1],10)>=59&&s.hasTouch&&(s.deviceType="hybrid",s.hasMouse=!0,s.primaryInput="mouse"))}};return s.updateOnlyOwnProperties(),Hk.default=s,Hk}());
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var tE,nE;const rE=i(function(){if(nE)return tE;nE=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;return tE=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(r,i){for(var s,a,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(r),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))t.call(s,c)&&(o[c]=s[c]);if(e){a=e(s);for(var u=0;u<a.length;u++)n.call(s,a[u])&&(o[a[u]]=s[a[u]])}}return o}}());var iE,sE,aE,oE,lE,cE,uE,dE,hE,fE={exports:{}};function pE(){if(dE)return uE;dE=1;var e=function(){if(sE)return iE;function e(e){return function(){return e}}sE=1;var t=function(){};return t.thatReturns=e,t.thatReturnsFalse=e(!1),t.thatReturnsTrue=e(!0),t.thatReturnsNull=e(null),t.thatReturnsThis=function(){return this},t.thatReturnsArgument=function(e){return e},iE=t}(),t=oE?aE:(oE=1,aE=function(e,t,n,r,i,s,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,a,o],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}),n=cE?lE:(cE=1,lE="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");return uE=function(){function r(e,r,i,s,a,o){o!==n&&t(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function i(){return r}r.isRequired=r;var s={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i};return s.checkPropTypes=e,s.PropTypes=s,s}}const mE=i((hE||(hE=1,fE.exports=pE()()),fE.exports));var gE,yE,vE,_E,bE,wE={exports:{}};function xE(){if(yE)return gE;yE=1;return gE="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function SE(){if(_E)return vE;_E=1;var e=xE();function t(){}function n(){}return n.resetWarningCache=t,vE=function(){function r(t,n,r,i,s,a){if(a!==e){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function i(){return r}r.isRequired=r;var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s}}function CE(){return bE||(bE=1,wE.exports=SE()()),wE.exports}const kE=i(CE());
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var EE,TE,NE,IE,jE,AE,PE,OE;function DE(){if(IE)return NE;IE=1;var e=TE?EE:(TE=1,EE=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)});function t(t){return!0===e(t)&&"[object Object]"===Object.prototype.toString.call(t)}return NE=function(e){var n,r;return!1!==t(e)&&("function"==typeof(n=e.constructor)&&(!1!==t(r=n.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}}
/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */const RE=i(function(){if(OE)return PE;OE=1;var e=function(){if(AE)return jE;AE=1;var e=DE();return jE=function(t){return e(t)||"function"==typeof t||Array.isArray(t)}}
/*!
 * object.omit <https://github.com/jonschlinkert/object.omit>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */();return PE=function(t,n,r){if(!e(t))return{};"function"==typeof n&&(r=n,n=[]),"string"==typeof n&&(n=[n]);for(var i="function"==typeof r,s=Object.keys(t),a={},o=0;o<s.length;o++){var l=s[o],c=t[l];n&&(-1!==n.indexOf(l)||i&&!r(c,l,t))||(a[l]=c)}return a}}());var LE=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ME=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t}return LE(e,[{key:"getDocumentRelativeElementOffset",value:function(e){var t=this.getRootOfEl(e).getBoundingClientRect(),n=t.left,r=t.top,i=e.getBoundingClientRect(),s=i.left,a=i.top;return{x:Math.abs(n)+s,y:Math.abs(r)+a}}},{key:"getRootOfEl",value:function(e){return e.parentElement?this.getRootOfEl(e.parentElement):e}},{key:"getComputedElementRelativeCursorPosition",value:function(e,t){this.lastEvent=e;var n=this.getDocumentRelativeCursorPosition(e),r=n.x,i=n.y,s=t.x,a=t.y;return{x:Math.round(r-s),y:Math.round(i-a)}}},{key:"getDocumentRelativeCursorPosition",value:function(e){return{x:e.pageX,y:e.pageY}}},{key:"getCursorPosition",value:function(e){return this.getComputedElementRelativeCursorPosition(e,this.documentRelativeElementOffset)}},{key:"documentRelativeElementOffset",get:function(){return this.elementOffset||(this.elementOffset=this.getDocumentRelativeElementOffset(this.el)),this.elementOffset}}]),e}();function FE(e,t,n,r){return e.addEventListener(t,n,r),{removeEventListener:function(){e.removeEventListener(t,n,r)}}}var zE="pressEvent",UE="setHovering",BE="unsetHovering";const $E=function(){};var VE=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var qE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return GE.call(n),n.state={detectedEnvironment:{isMouseDetected:!1,isTouchDetected:!1},elementDimensions:{width:0,height:0},isActive:!1,isPositionOutside:!0,position:{x:0,y:0}},n.shouldGuardAgainstMouseEmulationByDevices=!1,n.eventListeners=[],n.timers=[],n.elementOffset={x:0,y:0},n.onTouchStart=n.onTouchStart.bind(n),n.onTouchMove=n.onTouchMove.bind(n),n.onTouchEnd=n.onTouchEnd.bind(n),n.onTouchCancel=n.onTouchCancel.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,y.Component),VE(e,[{key:"onTouchStart",value:function(e){this.init(),this.onTouchDetected(),this.setShouldGuardAgainstMouseEmulationByDevices();var t=this.core.getCursorPosition(this.getTouchEvent(e));if(this.setPositionState(t),this.props.isActivatedOnTouch)return e.preventDefault(),void this.activate();this.initPressEventCriteria(t),this.setPressEventTimer()}},{key:"onTouchMove",value:function(e){if(this.isCoreReady){var t=this.core.getCursorPosition(this.getTouchEvent(e));this.state.isActive?(this.setPositionState(t),e.preventDefault(),this.props.shouldStopTouchMovePropagation&&e.stopPropagation()):this.setPressEventCriteria(t)}}},{key:"onTouchEnd",value:function(){this.deactivate(),this.unsetShouldGuardAgainstMouseEmulationByDevices()}},{key:"onTouchCancel",value:function(){this.deactivate(),this.unsetShouldGuardAgainstMouseEmulationByDevices()}},{key:"onMouseEnter",value:function(e){this.shouldGuardAgainstMouseEmulationByDevices||(this.init(),this.onMouseDetected(),this.setPositionState(this.core.getCursorPosition(e)),this.clearActivationTimers(),this.schedulActivation(this.props.hoverDelayInMs))}},{key:"onMouseMove",value:function(e){this.isCoreReady&&this.setPositionState(this.core.getCursorPosition(e))}},{key:"onMouseLeave",value:function(){this.clearActivationTimers(),this.scheduleDeactivation(this.props.hoverOffDelayInMs),this.setState({isPositionOutside:!0})}},{key:"onTouchDetected",value:function(){var e={isTouchDetected:!0,isMouseDetected:!1};this.setState({detectedEnvironment:e}),this.props.onDetectedEnvironmentChanged(e)}},{key:"onMouseDetected",value:function(){var e={isTouchDetected:!1,isMouseDetected:!0};this.setState({detectedEnvironment:e}),this.props.onDetectedEnvironmentChanged(e)}},{key:"componentDidMount",value:function(){this.props.isEnabled&&this.enable()}},{key:"componentWillReceiveProps",value:function(e){var t=e.isEnabled;this.props.isEnabled!==t&&(t?this.enable():this.disable())}},{key:"componentWillUnmount",value:function(){this.clearTimers(),this.disable()}},{key:"enable",value:function(){this.addEventListeners()}},{key:"disable",value:function(){this.removeEventListeners()}},{key:"init",value:function(){this.core=new ME(this.el),this.setElementDimensionsState(this.getElementDimensions(this.el))}},{key:"reset",value:function(){var e=this.core,t=(e=void 0===e?{}:e).lastEvent;this.init(),t&&this.setPositionState(this.core.getCursorPosition(t))}},{key:"activate",value:function(){this.setState({isActive:!0}),this.props.onActivationChanged({isActive:!0})}},{key:"deactivate",value:function(){var e=this;this.clearTimer(zE),this.setState({isActive:!1},function(){var t=e.state,n=t.isPositionOutside,r=t.position;e.props.onPositionChanged({isPositionOutside:n,position:r}),e.props.onActivationChanged({isActive:!1})})}},{key:"setPositionState",value:function(e){var t=this.getIsPositionOutside(e);this.setState({isPositionOutside:t,position:e},this.onPositionChanged)}},{key:"setElementDimensionsState",value:function(e){this.setState({elementDimensions:e})}},{key:"schedulActivation",value:function(e){var t=this,n=setTimeout(function(){t.activate()},e);this.timers.push({id:n,name:UE})}},{key:"scheduleDeactivation",value:function(e){var t=this,n=setTimeout(function(){t.deactivate()},e);this.timers.push({id:n,name:BE})}},{key:"clearActivationTimers",value:function(){this.clearTimer(UE),this.clearTimer(BE)}},{key:"setPressEventTimer",value:function(){var e=this,t=this.props,n=t.pressDuration,r=t.pressMoveThreshold;this.timers.push({name:zE,id:setTimeout(function(){Math.abs(e.currentElTop-e.initialElTop)<r&&e.activate()},n)})}},{key:"setPressEventCriteria",value:function(e){this.currentElTop=e.y}},{key:"initPressEventCriteria",value:function(e){var t=e.y;this.initialElTop=t,this.currentElTop=t}},{key:"setShouldGuardAgainstMouseEmulationByDevices",value:function(){this.shouldGuardAgainstMouseEmulationByDevices=!0}},{key:"unsetShouldGuardAgainstMouseEmulationByDevices",value:function(){var e=this;this.timers.push({name:"mouseEmulation",id:setTimeout(function(){e.shouldGuardAgainstMouseEmulationByDevices=!1},0)})}},{key:"clearTimers",value:function(){for(var e=this.timers;e.length;){var t=e.pop();clearTimeout(t.id)}}},{key:"clearTimer",value:function(e){this.timers.forEach(function(t){t.name===e&&clearTimeout(t.id)})}},{key:"getElementDimensions",value:function(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}}},{key:"getIsPositionOutside",value:function(e){var t=e.x,n=e.y,r=this.state.elementDimensions,i=r.width,s=r.height;return t<0||n<0||t>i||n>s}},{key:"getTouchEvent",value:function(e){return e.touches[0]}},{key:"getIsReactComponent",value:function(e){return"function"==typeof e.type}},{key:"shouldDecorateChild",value:function(e){return!!e&&this.getIsReactComponent(e)&&this.props.shouldDecorateChildren}},{key:"decorateChild",value:function(e,t){return g.cloneElement(e,t)}},{key:"decorateChildren",value:function(e,t){var n=this;return g.Children.map(e,function(e){return n.shouldDecorateChild(e)?n.decorateChild(e,t):e})}},{key:"addEventListeners",value:function(){this.eventListeners.push(FE(this.el,"touchstart",this.onTouchStart,{passive:!1}),FE(this.el,"touchmove",this.onTouchMove,{passive:!1}),FE(this.el,"touchend",this.onTouchEnd),FE(this.el,"touchcancel",this.onTouchCancel),FE(this.el,"mouseenter",this.onMouseEnter),FE(this.el,"mousemove",this.onMouseMove),FE(this.el,"mouseleave",this.onMouseLeave))}},{key:"removeEventListeners",value:function(){for(;this.eventListeners.length;)this.eventListeners.pop().removeEventListener()}},{key:"getPassThroughProps",value:function(){var e=Object.keys(this.constructor.propTypes);return RE(this.props,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,i=t.mapChildProps,s=t.style,a=rE({},i(this.state),this.getPassThroughProps());return y.createElement("div",{className:r,ref:function(t){return e.el=t},style:rE({},s,{WebkitUserSelect:"none"})},this.decorateChildren(n,a))}},{key:"isCoreReady",get:function(){return!!this.core}}]),e}();qE.displayName="ReactCursorPosition",qE.propTypes={children:kE.any,className:kE.string,hoverDelayInMs:kE.number,hoverOffDelayInMs:kE.number,isActivatedOnTouch:kE.bool,isEnabled:kE.bool,mapChildProps:kE.func,onActivationChanged:kE.func,onPositionChanged:kE.func,onDetectedEnvironmentChanged:kE.func,pressDuration:kE.number,pressMoveThreshold:kE.number,shouldDecorateChildren:kE.bool,shouldStopTouchMovePropagation:kE.bool,style:kE.object},qE.defaultProps={isActivatedOnTouch:!1,isEnabled:!0,hoverDelayInMs:0,hoverOffDelayInMs:0,mapChildProps:function(e){return e},onActivationChanged:$E,onPositionChanged:$E,onDetectedEnvironmentChanged:$E,pressDuration:500,pressMoveThreshold:5,shouldDecorateChildren:!0,shouldStopTouchMovePropagation:!1};var HE,WE,GE=function(){var e=this;this.onPositionChanged=function(){(0,e.props.onPositionChanged)(e.state)}};const KE=i(WE?HE:(WE=1,HE=function(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}));function QE(e,t){return{x:t.width/e.width,y:t.height/e.height}}function YE(e,t){return{x:-1*(t.width-e.width),y:-1*(t.height-e.height)}}function XE(e){var t=e.containerDimensions,n=e.cursorOffset,r=e.largeImage,i=e.position,s=e.smallImage,a=function(e,t){return{x:e.x-t.x,y:e.y-t.y}}(i,n),o=function(e,t){return QE(e,t)}(s,r);return ZE({x:-1*Math.round(a.x*o.x),y:-1*Math.round(a.y*o.y)},YE(t,r),{x:0,y:0})}function JE(e){var t,n,r=e.containerDimensions,i=e.largeImage,s=e.position,a=YE(r,i),o={x:0,y:0},l=QE(t=r,{width:(n=i).width-t.width,height:n.height-t.height});return ZE({x:-1*Math.round(s.x*l.x),y:-1*Math.round(s.y*l.y)},a,o)}function ZE(e,t,n){return{x:KE(e.x,t.x,n.x),y:KE(e.y,t.y,n.y)}}var eT,tT;const nT=i((tT||(tT=1,eT=function(e,t){return function(n){return(t(n)?e.isRequired:e).apply(this,arguments)}}),eT));var rT={alt:mE.string,src:mE.string.isRequired,srcSet:mE.string,sizes:mE.string,onLoad:mE.func,onError:mE.func},iT=mE.shape(rE({},rT,{width:mE.number.isRequired,height:mE.number.isRequired})),sT=mE.shape(rE({},rT,{isFluidWidth:mE.bool,width:nT(mE.number,function(e){return!e.isFluidWidth}),height:nT(mE.number,function(e){return!e.isFluidWidth})})),aT="mouse",oT="touch",lT="over",cT="beside",uT=mE.oneOf([cT,lT]),dT=mE.shape({width:mE.oneOfType([mE.number,mE.string]),height:mE.oneOfType([mE.number,mE.string])}),hT=mE.shape({width:mE.number,height:mE.number});function fT(){}const pT=mE.shape({x:mE.number.isRequired,y:mE.number.isRequired});var mT,gT;const yT=i(gT?mT:(gT=1,mT=function e(t,n){if(t===n)return!0;var r,i=Array.isArray(t),s=Array.isArray(n);if(i&&s){if(t.length!=n.length)return!1;for(r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if(i!=s)return!1;if(t&&n&&"object"==typeof t&&"object"==typeof n){var a=Object.keys(t);if(a.length!==Object.keys(n).length)return!1;var o=t instanceof Date,l=n instanceof Date;if(o&&l)return t.getTime()==n.getTime();if(o!=l)return!1;var c=t instanceof RegExp,u=n instanceof RegExp;if(c&&u)return t.toString()==n.toString();if(c!=u)return!1;for(r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=0;r<a.length;r++)if(!e(t[a[r]],n[a[r]]))return!1;return!0}return!1}));function vT(e,t){var n=e.isFluidWidth,r=e.width,i=e.height;return rE({cursor:"crosshair"},t,n?{width:"auto",height:"auto",fontSize:"0px",position:"relative"}:{width:r+"px",height:i+"px",position:"relative"})}function _T(e,t){var n=e.isFluidWidth,r=e.width,i=e.height;return rE({},t,n?{width:"100%",height:"auto",display:"block",pointerEvents:"none"}:{width:r+"px",height:i+"px",pointerEvents:"none"})}var bT={};function wT(e){var t=bT,n=t.params,r=void 0===n?{}:n,i=t.compositStyle;if(yT(r,e))return i;var s=e.containerDimensions,a=e.containerStyle,o=e.fadeDurationInMs,l=e.isTransitionActive,c=function(e,t){var n={overflow:"hidden"};return t?n:rE(n,{position:"absolute",top:"0px"},e?{left:"0px"}:{left:"100%",marginLeft:"10px",border:"1px solid #d6d6d6"})}(e.isInPlaceMode,e.isPortalRendered),u=function(e){var t=e.containerDimensions,n=e.fadeDurationInMs,r=e.isTransitionActive;return{width:t.width,height:t.height,opacity:r?1:0,transition:"opacity "+n+"ms ease-in",pointerEvents:"none"}}({containerDimensions:s,fadeDurationInMs:o,isTransitionActive:l});return t.compositStyle=rE({},c,a,u),t.params=e,t.compositStyle}var xT=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ST=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={isTransitionEntering:!1,isTransitionActive:!1,isTransitionLeaving:!1,isTransitionDone:!1},n.timers=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,y.Component),xT(e,[{key:"componentWillReceiveProps",value:function(e){this.scheduleCssTransition(e)}},{key:"componentWillUnmount",value:function(){this.timers.forEach(function(e){clearTimeout(e)})}},{key:"scheduleCssTransition",value:function(e){var t=this,n=this.props,r=n.fadeDurationInMs,i=n.isActive,s=n.isPositionOutside,a=i!==e.isActive,o=s!==e.isPositionOutside;(a||o)&&(e.isActive&&!e.isPositionOutside?(this.setState({isTrainsitionDone:!1,isTransitionEntering:!0}),this.timers.push(setTimeout(function(){t.setState({isTransitionEntering:!1,isTransitionActive:!0})},0))):(this.setState({isTransitionLeaving:!0,isTransitionActive:!1}),this.timers.push(setTimeout(function(){t.setState({isTransitionDone:!0,isTransitionLeaving:!1})},r))))}},{key:"getImageCoordinates",value:function(){var e=this.props,t=e.cursorOffset,n=e.largeImage,r=e.containerDimensions,i=e.position,s=e.smallImage;return e.isInPlaceMode?JE({containerDimensions:r,largeImage:n,position:i}):XE({containerDimensions:r,cursorOffset:t,largeImage:n,position:i,smallImage:s})}},{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.imageClassName,r=e.isLazyLoaded,i=e.largeImage,s=e.largeImage,a=s.alt,o=void 0===a?"":a,l=s.onLoad,c=void 0===l?fT:l,u=s.onError,d=void 0===u?fT:u,h=y.createElement("div",{className:t,style:this.containerStyle},y.createElement("img",{alt:o,className:n,src:i.src,srcSet:i.srcSet,sizes:i.sizes,style:this.imageStyle,onLoad:c,onError:d}));return r?this.isVisible?h:null:h}},{key:"isVisible",get:function(){var e=this.state,t=e.isTransitionEntering,n=e.isTransitionActive,r=e.isTransitionLeaving;return t||n||r}},{key:"containerStyle",get:function(){var e=this.props,t=e.containerStyle,n=e.containerDimensions,r=e.fadeDurationInMs,i=e.isPortalRendered,s=e.isInPlaceMode;return wT({containerDimensions:n,containerStyle:t,fadeDurationInMs:r,isTransitionActive:this.state.isTransitionActive,isInPlaceMode:s,isPortalRendered:i})}},{key:"imageStyle",get:function(){var e=this.props,t=e.imageStyle,n=e.largeImage;return function(e){var t=e.imageCoordinates,n=e.imageStyle,r=e.largeImage,i="translate("+t.x+"px, "+t.y+"px)",s={width:r.width,height:r.height,transform:i,WebkitTransform:i,msTransform:i,pointerEvents:"none"};return rE({},n,s)}({imageCoordinates:this.getImageCoordinates(),imageStyle:t,largeImage:n})}}]),e}();ST.displayName="EnlargedImage",ST.defaultProps={fadeDurationInMs:0,isLazyLoaded:!0},ST.propTypes={containerClassName:mE.string,containerStyle:mE.object,cursorOffset:pT,position:pT,fadeDurationInMs:mE.number,imageClassName:mE.string,imageStyle:mE.object,isActive:mE.bool,isLazyLoaded:mE.bool,largeImage:iT,containerDimensions:hT,isPortalRendered:mE.bool,isInPlaceMode:mE.bool};var CT=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function kT(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ET=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=kT(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),r.state={isMounted:!1},kT(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,g.Component),CT(e,[{key:"componentDidMount",value:function(){if(this.setState({isMounted:!0}),this.isPortalRendered){var e=this.props.portalId;this.portalElement=document.getElementById(e)}}},{key:"render",value:function(){if(!this.isMounted)return null;var e=this.compositProps;return this.isPortalRendered?pt.createPortal(y.createElement(ST,e),this.portalElement):y.createElement(ST,e)}},{key:"isPortalIdImplemented",get:function(){return!!this.props.portalId}},{key:"isPortalRendered",get:function(){var e=this.props,t=e.isPortalEnabledForTouch,n=e.isTouchDetected;return!!this.isPortalIdImplemented&&(!n||!!t)}},{key:"isMounted",get:function(){return this.state.isMounted}},{key:"compositProps",get:function(){return rE({},this.props,{isPortalRendered:this.isPortalRendered})}}]),e}();ET.propTypes={isPortalEnabledForTouch:mE.bool.isRequired,isTouchDetected:mE.bool.isRequired,portalId:mE.string};var TT=function(e){var t=e.fadeDurationInMs,n=e.isActive,r=e.isPositionOutside,i=e.style,s=rE({},{width:"auto",height:"auto",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"block"},i,{position:"absolute",opacity:n&&!r?1:0,transition:"opacity "+t+"ms ease-in"});return y.createElement("div",{style:s})};TT.propTypes={style:mE.object,fadeDurationInMs:mE.number,isActive:mE.bool,translateX:mE.number,translateY:mE.number,userStyle:mE.object},TT.defaultProps={isActive:!1,fadeDurationInMs:0,translateX:0,translateY:0};const NT={cursorOffset:pT,fadeDurationInMs:mE.number,isActive:mE.bool,isPositionOutside:mE.bool,position:pT,smallImage:sT,style:mE.object};var IT=function(e){var t=e.cursorOffset,n=e.position,r=e.fadeDurationInMs,i=e.isActive,s=e.isPositionOutside,a=e.smallImage,o=e.style,l=2*t.y,c=a.height-l,u={height:KE(n.y-t.y,0,c)+"px",width:"100%",top:"0px"};return y.createElement(TT,{fadeDurationInMs:r,isActive:i,isPositionOutside:s,style:rE({},o,u)})};IT.propTypes=NT;var jT=function(e){var t=e.cursorOffset,n=e.position,r=e.fadeDurationInMs,i=e.isActive,s=e.isPositionOutside,a=e.smallImage,o=e.style,l=2*t.y,c=2*t.x,u=a.height-l,d=a.width-c,h={height:l+"px",width:KE(n.x-t.x,0,d)+"px",top:KE(n.y-t.y,0,u)+"px",left:"0px"};return y.createElement(TT,{fadeDurationInMs:r,isActive:i,isPositionOutside:s,style:rE({},o,h)})};jT.propTypes=NT;var AT=function(e){var t=e.cursorOffset,n=e.position,r=e.fadeDurationInMs,i=e.isActive,s=e.isPositionOutside,a=e.smallImage,o=e.style,l=2*t.y,c=2*t.x,u=a.height-l,d=a.width-c,h={height:l+"px",width:KE(a.width-n.x-t.x,0,d)+"px",top:KE(n.y-t.y,0,u)+"px",right:"0px"};return y.createElement(TT,{fadeDurationInMs:r,isActive:i,isPositionOutside:s,style:rE({},o,h)})};AT.propTypes=NT;var PT=function(e){var t=e.cursorOffset,n=e.position,r=e.fadeDurationInMs,i=e.isActive,s=e.isPositionOutside,a=e.smallImage,o=e.style,l=2*t.y,c=a.height-n.y-t.y,u=a.height-l,d=KE(c,0,u),h=n.y+t.y,f={height:d+"px",width:"100%",top:Math.max(h,l)+"px"};return y.createElement(TT,{fadeDurationInMs:r,isActive:i,isPositionOutside:s,style:rE({},o,f)})};function OT(e){var t=e.style,n=rE({backgroundColor:"rgba(0,0,0,.4)"},t),r=rE({},e,{style:n});return y.createElement("div",null,y.createElement(IT,r),y.createElement(jT,r),y.createElement(AT,r),y.createElement(PT,r))}PT.propTypes=NT,OT.propTypes=NT;var DT=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var RT=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,g.Component),DT(e,[{key:"render",value:function(){return y.createElement("div",{style:this.compositStyle})}},{key:"dimensions",get:function(){var e=this.props.cursorOffset;return{width:2*e.x,height:2*e.y}}},{key:"positionOffset",get:function(){var e=this.props,t=e.cursorOffset,n=t.x,r=t.y,i=e.position,s=i.x,a=i.y,o=e.smallImage,l=o.height,c=o.width,u=this.dimensions,d=u.width,h=u.height,f=s-n,p=c-d;return{top:KE(a-r,0,l-h),left:KE(f,0,p)}}},{key:"defaultStyle",get:function(){return{transition:"opacity "+this.props.fadeDurationInMs+"ms ease-in",backgroundImage:"url(data:image/gif;base64,R0lGODlhZABkAPABAHOf4fj48yH5BAEAAAEALAAAAABkAGQAAAL+jI+py+0PowOB2oqvznz7Dn5iSI7SiabqWrbj68bwTLL2jUv0Lvf8X8sJhzmg0Yc8mojM5kmZjEKPzqp1MZVqs7Cr98rdisOXr7lJHquz57YwDV8j3XRb/C7v1vcovD8PwicY8VcISDGY2GDIKKf4mNAoKQZZeXg5aQk5yRml+dgZ2vOpKGraQpp4uhqYKsgKi+H6iln7N8sXG4u7p2s7ykvnyxos/DuMWtyGfKq8fAwd5nzGHN067VUtiv2lbV3GDfY9DhQu7p1pXoU+rr5ODk/j7sSePk9Ub33PlN+4jx8v4JJ/RQQa3EDwzcGFiBLi6AfN4UOGCyXegGjIoh0fisQ0rsD4y+NHjgZFqgB5y2Qfks1UPmEZ0OVLlIcKAAA7)"}}},{key:"userSpecifiedStyle",get:function(){return this.props.style}},{key:"isVisible",get:function(){var e=this.props,t=e.isActive,n=e.isPositionOutside;return t&&!n}},{key:"priorityStyle",get:function(){var e=this.dimensions,t=e.width,n=e.height,r=this.positionOffset;return{position:"absolute",top:r.top+"px",left:r.left+"px",width:t+"px",height:n+"px",opacity:this.isVisible?1:0}}},{key:"compositStyle",get:function(){return rE(this.defaultStyle,this.userSpecifiedStyle,this.priorityStyle)}}]),e}();RT.propTypes=NT,RT.defaultProps={style:{}};var LT=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var MT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasShown=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,y.Component),LT(e,[{key:"setHasShown",value:function(){this.hasShown=!0}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isActive,r=e.shouldHideAfterFirstActivation,i=this.hasShown,s=!(n||i&&r);return n&&!i&&this.setHasShown(),s?t:null}}]),e}();function FT(e){var t=e.isTouchDetected,n=e.hintTextMouse,r=e.hintTextTouch;return y.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center",position:"absolute",bottom:"25px"}},y.createElement("div",{style:{display:"flex",alignItems:"center",padding:"5px 10px",backgroundColor:"#333",borderRadius:"10px",opacity:"0.90"}},y.createElement("img",{style:{width:"25px",height:"25px"},src:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ5MC4yIDQ5MC4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0OTAuMiA0OTAuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxnPgoJPGc+CgkJPHBhdGggZD0iTTQxOC41LDQxOC41Yzk1LjYtOTUuNiw5NS42LTI1MS4yLDAtMzQ2LjhzLTI1MS4yLTk1LjYtMzQ2LjgsMHMtOTUuNiwyNTEuMiwwLDM0Ni44UzMyMi45LDUxNC4xLDQxOC41LDQxOC41eiBNODksODkgICAgYzg2LjEtODYuMSwyMjYuMS04Ni4xLDMxMi4yLDBzODYuMSwyMjYuMSwwLDMxMi4ycy0yMjYuMSw4Ni4xLTMxMi4yLDBTMywxNzUuMSw4OSw4OXoiIGZpbGw9IiNGRkZGRkYiLz4KCQk8cGF0aCBkPSJNMjQ1LjEsMzM2LjljMy40LDAsNi40LTEuNCw4LjctMy42YzIuMi0yLjIsMy42LTUuMywzLjYtOC43di02Ny4zaDY3LjNjMy40LDAsNi40LTEuNCw4LjctMy42YzIuMi0yLjIsMy42LTUuMywzLjYtOC43ICAgIGMwLTYuOC01LjUtMTIuMy0xMi4yLTEyLjJoLTY3LjN2LTY3LjNjMC02LjgtNS41LTEyLjMtMTIuMi0xMi4yYy02LjgsMC0xMi4zLDUuNS0xMi4yLDEyLjJ2NjcuM2gtNjcuM2MtNi44LDAtMTIuMyw1LjUtMTIuMiwxMi4yICAgIGMwLDYuOCw1LjUsMTIuMywxMi4yLDEyLjJoNjcuM3Y2Ny4zQzIzMi44LDMzMS40LDIzOC4zLDMzNi45LDI0NS4xLDMzNi45eiIgZmlsbD0iI0ZGRkZGRiIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=",alt:""}),y.createElement("span",{style:{padding:"2px 0 0 5px",fontFamily:"Arial, sans-serif",fontSize:"14px",color:"white"}},t?r:n)))}function zT(e,t){return Math.round(e*t/2)}function UT(e){var t,n=e.containerDimension,r=e.smallImageDimension;return e.isInPlaceMode?r:"string"==typeof(t=n)&&/^\d+%$/.test(t)?r*(parseInt(n)/100):n}MT.propTypes={children:mE.element,isActive:mE.bool,shouldHideAfterFirstActivation:mE.bool},MT.defaultProps={shouldHideAfterFirstActivation:!0},FT.displayName="DefaultHint",FT.propTypes={isTouchDetected:mE.bool,hintTextMouse:mE.string,hintTextTouch:mE.string};var BT=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var $T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=eE.primaryInput,i=aT,s=oT;return n.state={smallImageWidth:0,smallImageHeight:0,detectedInputType:{isMouseDeteced:r===i,isTouchDetected:r===s}},n.onSmallImageLoad=n.onSmallImageLoad.bind(n),n.setSmallImageDimensionState=n.setSmallImageDimensionState.bind(n),n.onDetectedInputTypeChanged=n.onDetectedInputTypeChanged.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,y.Component),BT(e,[{key:"componentDidMount",value:function(){this.props.smallImage.isFluidWidth&&(this.setSmallImageDimensionState(),window.addEventListener("resize",this.setSmallImageDimensionState))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSmallImageDimensionState)}},{key:"onSmallImageLoad",value:function(e){var t=this.props.smallImage,n=t.onLoad,r=void 0===n?fT:n,i=t.isFluidWidth;r(e),i&&this.setSmallImageDimensionState()}},{key:"onDetectedInputTypeChanged",value:function(e){this.setState({detectedInputType:e})}},{key:"setSmallImageDimensionState",value:function(){var e=this.smallImageEl,t=e.offsetWidth,n=e.offsetHeight;this.setState({smallImageWidth:t,smallImageHeight:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.style,i=t.hoverDelayInMs,s=t.hoverOffDelayInMs,a=t.isActivatedOnTouch,o=t.pressDuration,l=t.pressMoveThreshold,c=t.smallImage.onError,u=void 0===c?fT:c,d=t.imageClassName,h=t.imageStyle,f=t.lensStyle,p=t.largeImage,m=t.enlargedImageContainerClassName,g=t.enlargedImageContainerStyle,v=t.enlargedImageClassName,_=t.enlargedImageStyle,b=t.enlargedImagePortalId,w=t.isEnlargedImagePortalEnabledForTouch,x=t.fadeDurationInMs,S=t.hintComponent,C=t.isHintEnabled,k=t.hintTextMouse,E=t.hintTextTouch,T=t.shouldHideHintAfterFirstActivation,N=this.smallImage,I=this.state.detectedInputType.isTouchDetected,j=function(e,t,n){var r=function(e,t){return{x:e.width/t.width,y:e.height/t.height}}(e,t);return{x:zT(n.width,r.x),y:zT(n.height,r.y)}}(N,p,this.enlargedImageContainerDimensions),A=this.lensComponent;return y.createElement(qE,{className:n,hoverDelayInMs:i,hoverOffDelayInMs:s,isActivatedOnTouch:a,onDetectedInputTypeChanged:this.onDetectedInputTypeChanged,pressDuration:o,pressMoveThreshold:l,shouldStopTouchMovePropagation:!0,style:vT(N,r)},y.createElement("img",{src:N.src,srcSet:N.srcSet,sizes:N.sizes,alt:N.alt,className:d,style:_T(N,h),ref:function(t){return e.smallImageEl=t},onLoad:this.onSmallImageLoad,onError:u}),C&&y.createElement(MT,{shouldHideAfterFirstActivation:T},y.createElement(S,{isTouchDetected:I,hintTextMouse:k,hintTextTouch:E})),this.shouldShowLens&&y.createElement(A,{cursorOffset:j,fadeDurationInMs:x,smallImage:N,style:f}),y.createElement(ET,{containerClassName:m,containerDimensions:this.enlargedImageContainerDimensions,containerStyle:g,cursorOffset:j,fadeDurationInMs:x,imageClassName:v,imageStyle:_,largeImage:p,smallImage:N,portalId:b,isPortalEnabledForTouch:w,isTouchDetected:this.isTouchDetected,isInPlaceMode:this.isInPlaceMode}))}},{key:"smallImage",get:function(){var e=this.props,t=e.smallImage;if(!e.smallImage.isFluidWidth)return t;var n=this.state,r=n.smallImageWidth,i=n.smallImageHeight;return rE({},t,{width:r,height:i})}},{key:"enlargedImagePlacement",get:function(){var e=this.props.enlargedImagePosition,t=this.state.detectedInputType.isTouchDetected;return e||(t?lT:cT)}},{key:"isInPlaceMode",get:function(){var e=lT;return this.enlargedImagePlacement===e}},{key:"enlargedImageContainerDimensions",get:function(){var e=this.props.enlargedImageContainerDimensions,t=e.width,n=e.height,r=this.smallImage,i=r.width,s=r.height,a=this.isInPlaceMode;return{width:UT({containerDimension:t,smallImageDimension:i,isInPlaceMode:a}),height:UT({containerDimension:n,smallImageDimension:s,isInPlaceMode:a})}}},{key:"isTouchDetected",get:function(){return this.state.detectedInputType.isTouchDetected}},{key:"shouldShowLens",get:function(){return!this.isInPlaceMode&&!this.isTouchDetected}},{key:"lensComponent",get:function(){var e=this.props,t=e.shouldUsePositiveSpaceLens,n=e.lensComponent;return n||(t?RT:OT)}}]),e}();$T.propTypes={className:mE.string,style:mE.object,hoverDelayInMs:mE.number,hoverOffDelayInMs:mE.number,fadeDurationInMs:mE.number,pressDuration:mE.number,pressMoveThreshold:mE.number,isActivatedOnTouch:mE.bool,imageClassName:mE.string,imageStyle:mE.object,lensStyle:mE.object,lensComponent:mE.func,shouldUsePositiveSpaceLens:mE.bool,smallImage:sT,largeImage:iT,enlargedImageContainerClassName:mE.string,enlargedImageContainerStyle:mE.object,enlargedImageClassName:mE.string,enlargedImageStyle:mE.object,enlargedImageContainerDimensions:dT,enlargedImagePosition:uT,enlargedImagePortalId:mE.string,isEnlargedImagePortalEnabledForTouch:mE.bool,hintComponent:mE.func,hintTextMouse:mE.string,hintTextTouch:mE.string,isHintEnabled:mE.bool,shouldHideHintAfterFirstActivation:mE.bool},$T.defaultProps={enlargedImageContainerDimensions:{width:"100%",height:"100%"},isEnlargedImagePortalEnabledForTouch:!1,fadeDurationInMs:300,hintComponent:FT,shouldHideHintAfterFirstActivation:!0,isHintEnabled:!1,hintTextMouse:"Hover to Zoom",hintTextTouch:"Long-Touch to Zoom",hoverDelayInMs:250,hoverOffDelayInMs:150,shouldUsePositiveSpaceLens:!1};const VT="_productTabs_7yo0z_1",qT="_tabButtons_7yo0z_15",HT="_active_7yo0z_55",WT="_tabContent_7yo0z_65",GT="_collapsed_7yo0z_73",KT="_expanded_7yo0z_93",QT="_fadeEffect_7yo0z_143",YT="_tabTitle_7yo0z_185",XT=({descriptionText:e,featuresText:t})=>{const[n,r]=g.useState("description"),[i,s]=g.useState(!1);return m.jsxs("div",{className:VT,children:[m.jsxs("div",{className:qT,children:[m.jsx("button",{className:"description"===n?HT:"",onClick:()=>{r("description"),s(!1)},children:"Description"}),m.jsx("button",{className:"features"===n?HT:"",onClick:()=>{r("features"),s(!1)},children:"Features"})]}),m.jsxs("div",{className:WT,children:[m.jsxs("h3",{className:YT,children:["Product ","description"===n?"Description":"Features",":"]}),m.jsx("p",{className:i?KT:GT,children:"description"===n?e:t}),m.jsx("div",{className:QT,children:m.jsx("button",{onClick:()=>s(!i),children:i?"See less":"See more"})})]})]})},JT={closeButton:"_closeButton_1n59y_51",modalContent:"_modalContent_1n59y_91",googleButton:"_googleButton_1n59y_143",guestButton:"_guestButton_1n59y_149",emailButton:"_emailButton_1n59y_151",divider:"_divider_1n59y_285"},ZT=({isOpen:e,onClose:t})=>{const n=zr(),[r,i]=g.useState(!1),[s,a]=g.useState("");return e?m.jsx("div",{className:JT.modalOverlay,children:m.jsxs("div",{className:JT.modalContent,children:[m.jsx("button",{className:JT.closeButton,onClick:t,children:""}),m.jsx("h2",{children:"Sign In to Continue"}),m.jsx("p",{children:"Please sign in to complete your purchase"}),s&&m.jsx("div",{className:JT.errorMessage,children:s}),m.jsxs("button",{className:JT.googleButton,onClick:async()=>{i(!0),a("");try{const{user:e,error:n}=await ix();n?(a(n.message),Vt.error(n.message||"Failed to sign in with Google. Please try again.")):e&&t()}catch(e){const t="Failed to sign in with Google. Please try again.";a(t),Vt.error(t),console.error(e)}finally{i(!1)}},disabled:r,children:[m.jsx(vx,{size:20}),m.jsx("span",{children:"Continue with Google"})]}),m.jsx("div",{className:JT.divider,children:m.jsx("span",{children:"or"})}),m.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0),a("");const n=e.target.email.value,r=e.target.password.value;try{const{user:e,error:i}=await rx(n,r);i?(a(i.message),Vt.error(i.message||"Failed to sign in. Please check your credentials.")):e&&t()}catch(s){const e="Failed to sign in. Please check your credentials and try again.";a(e),Vt.error(e),console.error(s)}finally{i(!1)}},children:[m.jsx("input",{type:"email",name:"email",placeholder:"Email",required:!0,disabled:r}),m.jsx("input",{type:"password",name:"password",placeholder:"Password",required:!0,disabled:r}),m.jsx("button",{type:"submit",className:JT.emailButton,disabled:r,children:r?"Signing in...":"Sign In with Email"})]}),m.jsx("div",{className:JT.divider,children:m.jsx("span",{children:"or"})}),m.jsx("button",{className:JT.guestButton,onClick:()=>{localStorage.setItem("isGuestUser","true"),n(iS(!0)),t()},disabled:r,children:"Continue as Guest"})]})}):null},eN="_overlay_18fvz_1",tN="_hidden_18fvz_25",nN="_visible_18fvz_35",rN="_sidebar_18fvz_45",iN="_header_18fvz_95",sN="_title_18fvz_113",aN="_cartIcon_18fvz_131",oN="_cartCount_18fvz_141",lN="_closeButton_18fvz_163",cN="_cartItemsContainer_18fvz_211",uN="_cartItem_18fvz_211",dN="_imageContainer_18fvz_287",hN="_itemImage_18fvz_305",fN="_itemDetails_18fvz_329",pN="_itemHeader_18fvz_347",mN="_itemName_18fvz_363",gN="_itemPrice_18fvz_387",yN="_itemMeta_18fvz_405",vN="_itemColor_18fvz_461",_N="_colorLabel_18fvz_475",bN="_colorSwatch_18fvz_491",wN="_itemActions_18fvz_507",xN="_removeButton_18fvz_521",SN="_itemCheckoutButton_18fvz_561",CN="_emptyCart_18fvz_599",kN="_emptyCartIcon_18fvz_619",EN="_emptyCartMessage_18fvz_633",TN="_emptyCartDesc_18fvz_649",NN="_footer_18fvz_665",IN="_subtotal_18fvz_677",jN="_buttonGroup_18fvz_697",AN="_checkoutButton_18fvz_709",PN="_viewCartButton_18fvz_751",ON="_quantityControl_18fvz_789",DN="_quantityAdjuster_18fvz_801",RN="_quantityBtn_18fvz_821",LN="_quantityValue_18fvz_867",MN=({isOpen:e,onClose:t})=>{const n=zr(),r=we(),{cartItems:i}=$r(e=>e.cart);g.useEffect(()=>{const n=n=>{27===n.keyCode&&e&&t()};return document.addEventListener("keydown",n),document.body.style.overflow=e?"hidden":"auto",()=>{document.removeEventListener("keydown",n),document.body.style.overflow="auto"}},[e,t]);const s=i.reduce((e,t)=>e+Number(null==t?void 0:t.price.replace(/AED\s?|,/g,""))*Number(null==t?void 0:t.quantity),0),a=(e,t,r,i)=>{i>=1&&n(Lx({id:e,size:t,color:r,quantity:i}))};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:`${eN} ${e?nN:tN}`,onClick:t}),m.jsxs("div",{className:`${rN} ${e?nN:tN}`,children:[m.jsxs("div",{className:iN,children:[m.jsxs("h2",{className:sN,children:[m.jsx(Mw,{className:aN})," Cart",m.jsxs("span",{className:oN,children:[i.length," ",1===i.length?"item":"items"]})]}),m.jsx("button",{onClick:t,className:lN,"aria-label":"Close cart",children:m.jsx(_b,{})})]}),m.jsx("div",{className:cN,children:i.length>0?i.map(e=>m.jsxs("div",{className:uN,children:[m.jsx("div",{className:dN,children:m.jsx("img",{src:e.image,alt:e.name,className:hN})}),m.jsxs("div",{className:fN,children:[m.jsxs("div",{className:pN,children:[m.jsx("h3",{className:mN,children:e.name}),m.jsxs("p",{className:gN,children:["AED"," ",Number(null==e?void 0:e.price.replace(/AED\s?|,/g,"")).toLocaleString()]})]}),m.jsxs("div",{className:yN,children:[m.jsxs("p",{children:[m.jsx("span",{children:"Size:"}),"",m.jsx("span",{children:e.size})]}),m.jsxs("div",{className:ON,children:[m.jsx("span",{children:"Qty:"}),"",m.jsxs("div",{className:DN,children:[m.jsx("button",{className:RN,onClick:()=>a(e.id,e.size,e.color,e.quantity-1),disabled:e.quantity<=1,"aria-label":"Decrease quantity",children:m.jsx(jw,{size:8})}),m.jsx("span",{className:LN,children:e.quantity}),m.jsx("button",{className:RN,onClick:()=>a(e.id,e.size,e.color,e.quantity+1),"aria-label":"Increase quantity",children:m.jsx(Ow,{size:8})})]})]})]}),e.displayColor&&m.jsxs("div",{className:vN,children:[m.jsx("span",{className:_N,children:"Color:"}),e.displayColor.startsWith("linear-gradient")?m.jsx("span",{className:bN,style:{background:e.displayColor},title:e.color}):m.jsx("span",{className:bN,style:{backgroundColor:e.displayColor},title:e.color})]}),m.jsxs("div",{className:wN,children:[m.jsxs("button",{type:"button",className:xN,onClick:()=>{return t=e.id,r=e.size,i=e.color,void n(Rx({id:t,size:r,color:i}));var t,r,i},title:"Remove from cart",children:[m.jsx(zw,{size:10,style:{marginRight:"3px"}}),"Remove"]}),m.jsxs("button",{onClick:()=>(e=>{n($x()),n(zx(e)),t(),r("/buy"),window.scrollTo(0,0)})(e),className:SN,title:"Proceed to checkout with this item",children:["Checkout",m.jsx(vw,{size:10,style:{marginLeft:"3px"}})]})]})]})]},`${e.id}-${e.size}-${e.color}-sidebar`)):m.jsxs("div",{className:CN,children:[m.jsx(Mw,{className:kN}),m.jsx("p",{className:EN,children:"Your cart is empty"}),m.jsx("p",{className:TN,children:"Add items to your cart to see them here"}),m.jsx("button",{onClick:()=>{t()},className:AN,children:"Continue Shopping"})]})}),i.length>0&&m.jsxs("div",{className:NN,children:[m.jsxs("div",{className:IN,children:[m.jsx("p",{children:"Subtotal"}),m.jsxs("p",{children:["AED ",s.toLocaleString()]})]}),m.jsxs("div",{className:jN,children:[m.jsx("button",{onClick:()=>{n($x()),i.forEach(e=>{n(zx(e))}),t(),r("/buy"),window.scrollTo(0,0)},className:AN,children:"Checkout All"}),m.jsx("button",{onClick:()=>{t(),r("/cart"),window.scrollTo(0,0)},className:PN,children:"View Cart"})]})]})]})]})},FN=({onBuyNow:e})=>{const t=zr(),n=we(),{search:r}=ve(),i=new URLSearchParams(r).get("id"),s=cS()||{},{isAuthenticated:a=!1,currentUser:o=null}=s,l=$r(e=>e.favorites.favorites),{isCached:c,addToCache:u,preloadImages:d}=vr(),[h,f]=g.useState(""),[p,v]=g.useState(""),[_,b]=g.useState(""),[w,x]=g.useState(1),[S,C]=g.useState(!1),[k,E]=g.useState(0),[T,N]=g.useState(null),[I,j]=g.useState(!1),[A,P]=g.useState(!1),[O,D]=g.useState(null),[R,L]=g.useState(!0),[M,F]=g.useState(!1),z=g.useCallback(()=>{const e=window.innerWidth<=768;j(e)},[]);g.useEffect(()=>(z(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)),[z]),g.useEffect(()=>{i&&(async()=>{try{L(!0);const e=await lg(om(C_,"products",i));if(e.exists()){const t={id:e.id,...e.data(),price:e.data().price?`AED ${e.data().price}`:"Price not available",images:e.data().images||["/images/placeholder.jpg"],sizes:e.data().sizes||["S","M","L"],colors:e.data().colors||["4293673269"],description:e.data().description||"",features:e.data().features||"",image_descriptions:e.data().image_descriptions||["Product Image"],color_palettes:e.data().color_palettes?e.data().color_palettes.map(e=>e.split(",").map(e=>parseInt(e.trim()))):[]};t.images&&t.images.length>0&&d(t.images),N(t),f(t.images[0]),v(t.sizes[0]),t.colors.length>0&&b(t.colors[0]),L(!1)}else L(!1)}catch(e){console.error("Error fetching product:",e),L(!1)}})()},[i]),g.useEffect(()=>{if(A&&T&&T.images&&T.images.length>1){const e=setInterval(()=>{const e=(T.images.indexOf(h)+1)%T.images.length;f(T.images[e])},3e3);return D(e),()=>clearInterval(e)}O&&(clearInterval(O),D(null))},[A,T,h,O]),g.useEffect(()=>()=>{O&&clearInterval(O)},[O]),g.useEffect(()=>{(async()=>{if(i)if(a&&o){const{isFavorite:e}=await(async(e,t)=>{try{const n=qm(am(C_,"users",e,"favorites"),Wm("productId","==",t)),r=await ug(n);return{isFavorite:!r.empty,favoriteId:r.empty?null:r.docs[0].id}}catch(n){return console.error("Error checking favorite status:",n),{error:n.message||"Failed to check favorite status",isFavorite:!1}}})(o.uid,i);F(e)}else{const e=l.some(e=>e.id===i||e.productId===i);F(e)}})()},[i,a,o,l]),g.useEffect(()=>{const t=localStorage.getItem("pendingBuyProduct");if(t&&(a||"true"===localStorage.getItem("isGuestUser"))){const n=JSON.parse(t);e(n),localStorage.removeItem("pendingBuyProduct"),localStorage.removeItem("isGuestUser")}},[a,e]);const[U,B]=y.useState(!1),$=e=>{E(e),C(!0),P(!1)};return R?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:Uk.container,children:[m.jsxs("div",{className:Uk.imageSection,children:[m.jsx("div",{className:Uk.thumbnailContainer,children:[1,2,3,4].map((e,t)=>m.jsx("div",{className:`${Uk.thumbnail} ${Uk.shimmer}`},t))}),m.jsx("div",{className:Uk.mainImageContainer,children:m.jsx("div",{className:`${Uk.mainImage} ${Uk.shimmer}`})})]}),m.jsxs("div",{className:Uk.detailsSection,children:[m.jsx("div",{className:`${Uk.title} ${Uk.shimmer}`,style:{width:"70%",height:"32px"}}),m.jsx("div",{className:`${Uk.price} ${Uk.shimmer}`,style:{width:"30%",height:"24px",marginTop:"10px"}}),m.jsxs("div",{className:Uk.optionGroup,style:{marginTop:"20px"},children:[m.jsx("div",{className:`${Uk.shimmer}`,style:{width:"40%",height:"18px"}}),m.jsx("div",{className:Uk.sizes,style:{marginTop:"10px"},children:[1,2,3,4].map((e,t)=>m.jsx("div",{className:`${Uk.shimmer}`,style:{width:"40px",height:"40px",borderRadius:"50%",display:"inline-block",margin:"0 5px"}},t))})]}),m.jsxs("div",{className:Uk.optionGroup,style:{marginTop:"20px"},children:[m.jsx("div",{className:`${Uk.shimmer}`,style:{width:"40%",height:"18px"}}),m.jsx("div",{className:Uk.colors,style:{marginTop:"10px"},children:[1,2,3].map((e,t)=>m.jsx("div",{className:`${Uk.shimmer}`,style:{width:"30px",height:"30px",borderRadius:"50%",display:"inline-block",margin:"0 5px"}},t))})]}),m.jsxs("div",{className:Uk.optionGroup,style:{marginTop:"20px"},children:[m.jsx("div",{className:`${Uk.shimmer}`,style:{width:"40%",height:"18px"}}),m.jsx("div",{className:`${Uk.shimmer}`,style:{width:"120px",height:"25px",marginTop:"10px"}})]}),m.jsxs("div",{className:Uk.actionButtons,children:[m.jsx("div",{className:`${Uk.shimmer}`,style:{width:"100%",height:"50px",marginTop:"20px"}}),m.jsx("div",{className:`${Uk.shimmer}`,style:{width:"100%",height:"50px",marginTop:"10px"}})]})]})]}),m.jsx("div",{style:{maxWidth:"1280px",margin:"0 auto",width:"90%",padding:"20px 0"},children:m.jsx("div",{className:Uk.shimmer,style:{width:"100%",height:"200px",borderRadius:"4px"}})})]}):T?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:Uk.container,children:[m.jsxs("div",{className:Uk.imageSection,children:[m.jsx("div",{className:Uk.thumbnailContainer,children:T.images.map((e,t)=>m.jsx(Kw,{src:e,alt:T.image_descriptions[t]??T.name,className:`${Uk.thumbnail} ${h===e?Uk.active:""}`,onClick:()=>(e=>{f(e),A&&P(!1)})(e),onError:e=>{e.target.src="/images/placeholder.jpg"},lazy:!0,quality:"medium"},t))}),m.jsxs("div",{className:Uk.mainImageContainer,children:[I?m.jsx("img",{src:h,alt:T.image_descriptions[T.images.indexOf(h)]??T.name,className:Uk.mainImage,onClick:()=>$(T.images.indexOf(h)),onError:e=>{e.target.src="/images/placeholder.jpg"}}):m.jsx("div",{onClick:()=>{$(T.images.indexOf(h))},style:{width:"120%",height:"100%"},children:m.jsx($T,{smallImage:{alt:T.image_descriptions[T.images.indexOf(h)]??T.name,isFluidWidth:!0,src:h,className:"magnifyImage",onError:e=>{console.error(`Error loading small image: ${h}`),e.target.src="/images/placeholder.jpg"},onLoad:()=>{c(h)||u(h)},crossOrigin:"anonymous"},largeImage:{src:h,width:1800,height:2400,crossOrigin:"anonymous"},enlargedImageContainerDimensions:{width:"120%",height:"100%"},enlargedImageContainerStyle:{zIndex:999,boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},enlargedImagePosition:"over",hoverDelayInMs:0,hoverOffDelayInMs:0,shouldHideHintAfterFirstActivation:!0,isHintEnabled:!0,hintTextMouse:"Hover to zoom",style:{cursor:"crosshair",width:"100%",height:"100%"},className:Uk.imageZoom,enlargedImageClassName:Uk.enlargedImage,lensStyle:{border:"1px solid #E6994B",backgroundColor:"rgba(230, 153, 75, 0.15)"},pressDuration:0,enlargedImageContainerClassName:Uk.enlargedImageContainer})}),m.jsx("button",{className:Uk.slideControlButton,onClick:()=>{P(e=>!e)},title:A?"Pause slideshow":"Play slideshow",children:A?m.jsx(Aw,{}):m.jsx(Pw,{})})]})]}),m.jsxs("div",{className:Uk.detailsSection,children:[m.jsx("h1",{className:Uk.title,children:null==T?void 0:T.name}),m.jsx("p",{className:Uk.price,children:null==T?void 0:T.price}),m.jsxs("div",{className:Uk.optionGroup,children:[m.jsx("p",{children:"Size:"}),m.jsx("div",{className:Uk.sizes,children:T.sizes.map(e=>m.jsx("button",{className:`${Uk.sizeButton} ${p===e?Uk.selected:""}`,onClick:()=>v(e),children:e},e))})]}),m.jsxs("div",{className:Uk.optionGroup,children:[m.jsx("p",{children:"Colors:"}),m.jsxs("div",{className:Uk.colors,children:[T.colors.map(e=>{let t;const n=String(e);if(n.startsWith("#"))t=n;else try{const e=parseInt(n),r=e>>8&255,i=255&e;t=`#${(e>>16&255).toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}catch(XD){t="#000000",console.error("Error parsing color code:",XD)}return m.jsx("button",{className:`${Uk.colorButton} ${_===e?Uk.selected:""}`,style:{backgroundColor:t},onClick:()=>b(e)},e)}),T.color_palettes&&T.color_palettes.length>0&&T.color_palettes.map((e,t)=>{const n=`linear-gradient(90deg, ${e.map(e=>{const t=String(e);if(t.startsWith("#"))return t;try{const e=parseInt(t),n=e>>8&255,r=255&e;return`#${(e>>16&255).toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}catch{return"#000000"}}).join(", ")})`,r=JSON.stringify(e.map(String));return m.jsx("button",{className:`${Uk.colorButton} ${_===r?Uk.selected:""}`,style:{background:n},onClick:()=>b(r)},r)})]})]}),m.jsxs("div",{className:Uk.optionGroup,children:[m.jsx("p",{children:"Quantity:"}),m.jsxs("div",{className:Uk.quantitySelector,children:[m.jsx("button",{onClick:()=>x(e=>Math.max(1,e-1)),children:"-"}),m.jsx("span",{children:w}),m.jsx("button",{onClick:()=>x(e=>e+1),children:"+"})]})]}),m.jsxs("div",{className:Uk.actionButtons,children:[m.jsx("button",{className:Uk.addToCart,onClick:()=>{if(!p||!_)return void Vt.error("Please select both size and color",{style:{fontWeight:500}});let e=_;const n=String(_);if(n.startsWith("["))try{const t=JSON.parse(n).map(String);e=`linear-gradient(90deg, ${t.map(e=>{const t=String(e);if(t.startsWith("#"))return t;const n=parseInt(t),r=n>>8&255,i=255&n;return`#${(n>>16&255).toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}).join(", ")})`}catch(XD){e="#000000"}else if(!n.startsWith("#"))try{const t=parseInt(n),r=t>>8&255,i=255&t;e=`#${(t>>16&255).toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}catch(XD){console.error("Error parsing color code",XD)}const r={id:T.id,name:T.name,price:T.price,image:h,size:p,color:_,displayColor:e,quantity:w};t(Dx(r)),B(!0),Vt.success(`${T.name} has been added to your cart${w>1?` (${w})`:""}`,{style:{fontWeight:500}})},children:"ADD TO CART"}),m.jsxs("button",{onClick:()=>{T&&(a&&o?M?(t(Qx({userId:o.uid,productId:i})),Vt.success("Removed from favorites"),console.log(`Removed product ${i} from favorites`)):(t(Kx({userId:o.uid,product:{id:T.id,name:T.name,price:T.price,image:T.images[0]}})),Vt.success("Added to favorites"),console.log("Added product to favorites:",T)):M?(t(Zx(i)),Vt.success("Removed from favorites"),console.log(`Removed product ${i} from favorites`)):(t(Jx({id:T.id,name:T.name,price:T.price,image:T.images[0],productId:T.id})),Vt.success("Added to favorites"),console.log("Added product to favorites:",T)),console.log("Current favorites:",l),F(!M))},className:`${Uk.favoriteButton}`,title:M?"Remove from favorites":"Add to favorites",children:[m.jsx(Ub,{size:18,filled:M,color:M?"#e6994b":"currentColor"}),m.jsx("span",{children:M?"REMOVE FAVORITE":"ADD TO FAVORITE"})]})]})]}),S&&m.jsxs("div",{className:Uk.carouselOverlay,children:[m.jsx("button",{className:Uk.closeButton,onClick:()=>{C(!1)},children:m.jsx(Vk,{size:40})}),m.jsx("button",{className:`${Uk.navButton} ${Uk.prevButton}`,onClick:()=>{E(e=>0===e?T.images.length-1:e-1)},children:m.jsx($k,{size:40})}),m.jsx("div",{className:Uk.carouselImageContainer,children:m.jsx("img",{src:T.images[k],alt:T.image_descriptions[k]??T.name,className:Uk.carouselImage,onError:e=>{e.target.src="/images/placeholder.jpg"},priority:!0,quality:"high",blur:!1,style:{maxHeight:"90vh",width:"auto",objectFit:"contain",margin:"0 auto",display:"block",backgroundColor:"transparent",boxShadow:"none",border:"none"}})}),m.jsx("button",{className:`${Uk.navButton} ${Uk.nextButton}`,onClick:()=>{E(e=>e===T.images.length-1?0:e+1)},children:m.jsx(Bk,{size:40})})]})]}),m.jsx(XT,{descriptionText:T.description||"",featuresText:T.features||""}),m.jsx(MN,{isOpen:U,onClose:()=>{B(!1)}})]}):m.jsx("div",{className:Uk.container,children:m.jsxs("div",{className:Uk.errorContainer,children:[m.jsx("h2",{children:"Product Not Found"}),m.jsx("p",{children:"The product you are looking for does not exist."}),m.jsx("button",{className:Uk.backButton,onClick:()=>n("/shop"),children:"Back to Shop"})]})})},zN="_relatedProductsContainer_1xxrz_1",UN="_relatedProductsTitle_1xxrz_15",BN="_relatedProducts_1xxrz_1",$N="_shimmerCard_1xxrz_97",VN="_shimmerImage_1xxrz_115",qN="_shimmerTitle_1xxrz_133",HN="_shimmerPrice_1xxrz_151",WN=()=>{const{search:e}=ve(),t=new URLSearchParams(e).get("id"),[n,r]=g.useState([]),[i,s]=g.useState(!0);return g.useEffect(()=>{t&&(async()=>{try{let e=null;const n=await ug(qm(am(C_,"products"),Wm("__name__","==",t)));let i;n.empty||(e=n.docs[0].data().collection_id),i=e?qm(am(C_,"products"),Wm("collection_id","==",e),Wm("__name__","!=",t),Xm(4)):qm(am(C_,"products"),Wm("__name__","!=",t),Xm(4));const a=await ug(i);if(a.empty&&e){const e=qm(am(C_,"products"),Wm("__name__","!=",t),Xm(4)),n=(await ug(e)).docs.map(e=>({id:e.id,...e.data(),image:e.data().images&&e.data().images.length>0?e.data().images[0]:"/images/placeholder.jpg",hoverImage:e.data().images&&e.data().images.length>1?e.data().images[1]:e.data().images&&e.data().images.length>0?e.data().images[0]:"/images/placeholder.jpg",price:e.data().price?`AED ${e.data().price}`:"Price not available"}));r(n)}else{const e=a.docs.map(e=>({id:e.id,...e.data(),image:e.data().images&&e.data().images.length>0?e.data().images[0]:"/images/placeholder.jpg",hoverImage:e.data().images&&e.data().images.length>1?e.data().images[1]:e.data().images&&e.data().images.length>0?e.data().images[0]:"/images/placeholder.jpg",price:e.data().price?`AED ${e.data().price}`:"Price not available"}));r(e)}s(!1)}catch(e){console.error("Error fetching related products:",e),s(!1)}})()},[t]),i?m.jsxs("div",{className:zN,children:[m.jsx("h1",{className:UN,children:"Similar Products"}),m.jsx("div",{className:BN,children:[...Array(4)].map((e,t)=>m.jsxs("div",{className:$N,children:[m.jsx("div",{className:VN}),m.jsx("div",{className:qN}),m.jsx("div",{className:HN})]},t))})]}):0===n.length?null:m.jsxs("div",{className:zN,children:[m.jsx("h1",{className:UN,children:"Similar Products"}),m.jsx("div",{className:BN,children:n.map(e=>m.jsx(Qw,{product:e},e.id))})]})},GN="_productContainer_ppllp_1",KN=()=>{const e=zr(),t=we();return m.jsxs("div",{className:GN,children:[m.jsx(FN,{onBuyNow:n=>{e(Dx({...n,quantity:1})),t("/buy")}}),m.jsx(WN,{})]})},QN={cartProductContainer:"_cartProductContainer_11k7w_1",cartProduct:"_cartProduct_11k7w_1",imagePlaceholder:"_imagePlaceholder_11k7w_51",productDetailsContainer:"_productDetailsContainer_11k7w_83",productDetails:"_productDetails_11k7w_83",productName:"_productName_11k7w_113",productInfo:"_productInfo_11k7w_135",priceInfo:"_priceInfo_11k7w_159",priceDetails:"_priceDetails_11k7w_175",priceLabel:"_priceLabel_11k7w_189",price:"_price_11k7w_159",totalDetails:"_totalDetails_11k7w_229",totalLabel:"_totalLabel_11k7w_243",total:"_total_11k7w_229",removeButton:"_removeButton_11k7w_269",removeButtonIcon:"_removeButtonIcon_11k7w_301",itemCheckoutButton:"_itemCheckoutButton_11k7w_311",emptyCartContainer:"_emptyCartContainer_11k7w_383",emptyCartIcon:"_emptyCartIcon_11k7w_437",emptyCartText:"_emptyCartText_11k7w_453",emptyCartSubText:"_emptyCartSubText_11k7w_469",shopNowButton:"_shopNowButton_11k7w_487",cartFooter:"_cartFooter_11k7w_615",cartCheckout:"_cartCheckout_11k7w_633",cartTotal:"_cartTotal_11k7w_635",checkoutBtn:"_checkoutBtn_11k7w_667",delBtn:"_delBtn_11k7w_669",cartFooterDivider:"_cartFooterDivider_11k7w_739",continueShopping:"_continueShopping_11k7w_787",mobileCartGrid:"_mobileCartGrid_11k7w_809",mobileCartProduct:"_mobileCartProduct_11k7w_825",mobileImageContainer:"_mobileImageContainer_11k7w_849",mobileProductImage:"_mobileProductImage_11k7w_861",mobileProductHeader:"_mobileProductHeader_11k7w_873",mobileProductName:"_mobileProductName_11k7w_887",mobileRemoveButton:"_mobileRemoveButton_11k7w_901",mobileDivider:"_mobileDivider_11k7w_915",mobileProductDetails:"_mobileProductDetails_11k7w_931",mobileSpecRow:"_mobileSpecRow_11k7w_945",mobilePriceRow:"_mobilePriceRow_11k7w_959",mobileTotalRow:"_mobileTotalRow_11k7w_969",mobileCartActions:"_mobileCartActions_11k7w_987",checkoutButtonContainer:"_checkoutButtonContainer_11k7w_1039",mobileCheckoutBtn:"_mobileCheckoutBtn_11k7w_1053",quantityControl:"_quantityControl_11k7w_1145",quantityLabel:"_quantityLabel_11k7w_1159",quantityAdjuster:"_quantityAdjuster_11k7w_1173",quantityBtn:"_quantityBtn_11k7w_1189",quantityValue:"_quantityValue_11k7w_1235",mobileQuantityRow:"_mobileQuantityRow_11k7w_1257"},YN=()=>{const e=we(),t=zr(),{cartItems:n}=$r(e=>e.cart),[r,i]=g.useState(window.innerWidth>920);g.useEffect(()=>{const e=()=>{i(window.innerWidth>920)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const s=(e,n,r)=>{t(Rx({id:e,size:n,color:r}))},a=(e,n,r,i)=>{i>=1&&t(Lx({id:e,size:n,color:r,quantity:i}))},o=n.reduce((e,t)=>e+Number(null==t?void 0:t.price.replace(/AED\s?|,/g,""))*Number(null==t?void 0:t.quantity),0),l=n=>{console.log(`this is the item ${JSON.stringify(n)}`),t($x()),t(zx(n)),e("/buy"),window.scrollTo(0,0)},{selectedCartItems:c}=$r(e=>e.cart);console.log(`this is the selectedCartItems ${c}`);return m.jsxs("div",{className:QN.cartProductContainer,children:[n.length>0?m.jsx(m.Fragment,{children:r?n.map(e=>(e=>m.jsxs("div",{className:QN.cartProduct,children:[m.jsx("div",{className:QN.imagePlaceholder,children:m.jsx(Kw,{src:e.image,alt:e.name,className:QN.productImage,lazy:!0,quality:"medium"})}),m.jsxs("div",{className:QN.productDetailsContainer,children:[m.jsxs("div",{className:QN.productDetails,children:[m.jsx("p",{className:QN.productName,children:e.name}),m.jsxs("div",{className:QN.productInfo,children:[m.jsxs("p",{children:["Color:",e.displayColor&&e.displayColor.startsWith("linear-gradient")?m.jsx("span",{style:{display:"inline-block",width:"18px",height:"18px",marginLeft:"5px",borderRadius:"50%",background:e.displayColor,border:"1px solid #ccc",verticalAlign:"middle"},title:e.color}):e.displayColor?m.jsx("span",{style:{display:"inline-block",width:"18px",height:"18px",marginLeft:"5px",borderRadius:"50%",backgroundColor:e.displayColor,border:"1px solid #ccc",verticalAlign:"middle"},title:e.color}):e.color||"Blue"]}),m.jsxs("p",{children:["Size: ",e.size]})]})]}),m.jsxs("div",{className:QN.priceInfo,children:[m.jsxs("div",{className:QN.priceDetails,children:[m.jsx("p",{className:QN.priceLabel,children:"Price"}),m.jsxs("p",{className:QN.price,children:["AED ",null==e?void 0:e.price]}),m.jsxs("div",{className:QN.quantityControl,children:[m.jsx("p",{className:QN.quantityLabel,children:"Quantity"}),m.jsxs("div",{className:QN.quantityAdjuster,children:[m.jsx("button",{className:QN.quantityBtn,onClick:()=>a(e.id,e.size,e.color,e.quantity-1),disabled:e.quantity<=1,"aria-label":"Decrease quantity",children:m.jsx(jw,{size:10})}),m.jsx("span",{className:QN.quantityValue,children:e.quantity}),m.jsx("button",{className:QN.quantityBtn,onClick:()=>a(e.id,e.size,e.color,e.quantity+1),"aria-label":"Increase quantity",children:m.jsx(Ow,{size:10})})]})]})]}),m.jsxs("div",{className:QN.totalDetails,children:[m.jsx("p",{className:QN.totalLabel,children:"Total"}),m.jsxs("p",{className:QN.total,children:["AED"," ",(Number(null==e?void 0:e.price.replace(/AED\s?|,/g,""))*Number(null==e?void 0:e.quantity)).toLocaleString()]})]}),m.jsx("div",{className:QN.checkoutButtonContainer,children:m.jsx("button",{className:QN.itemCheckoutButton,onClick:()=>l(e),children:"Checkout"})})]})]}),m.jsx("button",{className:QN.removeButton,onClick:()=>s(e.id,e.size,e.color),children:m.jsx("img",{className:QN.removeButtonIcon,src:"/images/delete-icon.png",alt:"Remove"})})]},`${e.id}-${e.size}-${e.color}-desktop`))(e)):m.jsx("div",{className:QN.mobileCartGrid,children:n.map(e=>(e=>m.jsxs("div",{className:QN.mobileCartProduct,children:[m.jsx("div",{className:QN.mobileImageContainer,children:m.jsx(Kw,{src:e.image,alt:e.name,className:QN.mobileProductImage,lazy:!0,quality:"medium"})}),m.jsxs("div",{className:QN.mobileProductHeader,children:[m.jsx("h3",{className:QN.mobileProductName,children:e.name}),m.jsx("button",{className:QN.mobileRemoveButton,onClick:()=>s(e.id,e.size,e.color),children:m.jsx("img",{className:QN.removeButtonIcon,src:"/images/delete-icon.png",alt:"Remove"})})]}),m.jsx("hr",{className:QN.mobileDivider}),m.jsxs("div",{className:QN.mobileProductDetails,children:[m.jsxs("div",{className:QN.mobileSpecRow,children:[m.jsxs("span",{children:["Color:",e.displayColor&&e.displayColor.startsWith("linear-gradient")?m.jsx("span",{style:{display:"inline-block",width:"18px",height:"18px",marginLeft:"5px",borderRadius:"50%",background:e.displayColor,border:"1px solid #ccc",verticalAlign:"middle"},title:e.color}):e.displayColor?m.jsx("span",{style:{display:"inline-block",width:"18px",height:"18px",marginLeft:"5px",borderRadius:"50%",backgroundColor:e.displayColor,border:"1px solid #ccc",verticalAlign:"middle"},title:e.color}):e.color||"Blue"]}),m.jsxs("span",{children:["Size: ",e.size]})]}),m.jsxs("div",{className:QN.mobileQuantityRow,children:[m.jsx("span",{children:"Quantity:"}),m.jsxs("div",{className:QN.quantityAdjuster,children:[m.jsx("button",{className:QN.quantityBtn,onClick:()=>a(e.id,e.size,e.color,e.quantity-1),disabled:e.quantity<=1,"aria-label":"Decrease quantity",children:m.jsx(jw,{size:8})}),m.jsx("span",{className:QN.quantityValue,children:e.quantity}),m.jsx("button",{className:QN.quantityBtn,onClick:()=>a(e.id,e.size,e.color,e.quantity+1),"aria-label":"Increase quantity",children:m.jsx(Ow,{size:8})})]})]}),m.jsx("div",{className:QN.mobilePriceRow,children:m.jsxs("span",{children:["Price: AED ",null==e?void 0:e.price.toLocaleString()]})}),m.jsx("div",{className:QN.mobileTotalRow,children:m.jsxs("span",{children:["Total: AED"," ",(Number(null==e?void 0:e.price.replace(/AED\s?|,/g,""))*Number(null==e?void 0:e.quantity)).toLocaleString()]})})]}),m.jsx("hr",{className:QN.mobileDivider}),m.jsx("div",{className:QN.mobileCartActions,children:m.jsx("button",{className:QN.mobileCheckoutBtn,onClick:()=>l(e),children:"Checkout"})})]},`${e.id}-${e.size}-${e.color}-mobile`))(e))})}):m.jsxs("div",{className:QN.emptyCartContainer,children:[m.jsx(Mw,{className:QN.emptyCartIcon}),m.jsx("h2",{className:QN.emptyCartText,children:"Your Cart is Empty"}),m.jsx("p",{className:QN.emptyCartSubText,children:"Discover our collection of handcrafted products and add your favorites to cart."}),m.jsx("button",{className:QN.shopNowButton,onClick:()=>{e("/shop"),window.scrollTo(0,0)},children:"Browse Collection"})]}),n.length>0&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:QN.cartFooter,children:[m.jsxs("div",{className:QN.cartTotal,children:[m.jsx("p",{children:"Subtotal"}),m.jsxs("p",{children:["AED ",o.toLocaleString()]})]}),m.jsxs("div",{className:QN.cartCheckout,children:[m.jsx("button",{className:QN.checkoutBtn,onClick:()=>(t($x()),n.forEach(e=>{t(zx(e))}),e("/buy"),void window.scrollTo(0,0)),children:"Checkout All"}),m.jsx("button",{onClick:()=>{t(Mx())},className:QN.delBtn,children:"Delete All"})]})]}),m.jsx("hr",{className:QN.cartFooterDivider}),m.jsx("div",{className:QN.cartCheckout,children:m.jsx("button",{onClick:()=>{e("/shop"),window.scrollTo(0,0)},className:QN.continueShopping,children:"Continue Shopping"})})]})]})},XN={cartTitle:"_cartTitle_1xqep_1"},JN=()=>{const{cartItems:e}=$r(e=>e.cart),t={title:"Shopping Cart | Origins By The Sea",description:"Review your selected sustainable fashion items and complete your purchase.",canonicalUrl:"https://originsbythesea.com/cart",type:"website",pageType:"CheckoutPage",schema:{"@context":"https://schema.org","@type":"CheckoutPage",name:"Shopping Cart",description:"Review and checkout your selected items",url:"https://originsbythesea.com/cart",hasPart:null==e?void 0:e.map(e=>{var t;return{"@type":"Product",name:e.name,image:null==(t=e.images)?void 0:t[0],quantity:e.quantity,offers:{"@type":"Offer",price:e.price,priceCurrency:"AED"}}})}};return m.jsxs(m.Fragment,{children:[m.jsx(Zw,{...t}),m.jsxs("div",{className:XN.cartContainer,children:[m.jsx("h1",{className:XN.cartTitle,children:"Shopping Cart"}),m.jsx(YN,{})]})]})};function ZN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZN(Object(n),!0).forEach(function(t){nI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tI(e){return(tI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rI(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var aI=function(e,t,n){var r=!!n,i=y.useRef(n);y.useEffect(function(){i.current=n},[n]),y.useEffect(function(){if(!r||!e)return function(){};var n=function(){i.current&&i.current.apply(i,arguments)};return e.on(t,n),function(){e.off(t,n)}},[r,t,e,i])},oI=function(e){var t=y.useRef(e);return y.useEffect(function(){t.current=e},[e]),t.current},lI=function(e){return null!==e&&"object"===tI(e)},cI="[object Object]",uI=function e(t,n){if(!lI(t)||!lI(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===cI;if(i!==(Object.prototype.toString.call(n)===cI))return!1;if(!i&&!r)return t===n;var s=Object.keys(t),a=Object.keys(n);if(s.length!==a.length)return!1;for(var o={},l=0;l<s.length;l+=1)o[s[l]]=!0;for(var c=0;c<a.length;c+=1)o[a[c]]=!0;var u=Object.keys(o);if(u.length!==s.length)return!1;var d=t,h=n;return u.every(function(t){return e(d[t],h[t])})},dI=function(e,t,n){return lI(e)?Object.keys(e).reduce(function(r,i){var s=!lI(t)||!uI(e[i],t[i]);return n.includes(i)?(s&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),r):s?eI(eI({},r||{}),{},nI({},i,e[i])):r},null):null},hI="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",fI=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hI;if(null===e||lI(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(n)},pI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hI;if(function(e){return lI(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return fI(e,t)})};var n=fI(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},mI=y.createContext(null);mI.displayName="ElementsContext";var gI=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},yI=function(e){var t=e.stripe,n=e.options,r=e.children,i=y.useMemo(function(){return pI(t)},[t]),s=iI(y.useState(function(){return{stripe:"sync"===i.tag?i.stripe:null,elements:"sync"===i.tag?i.stripe.elements(n):null}}),2),a=s[0],o=s[1];y.useEffect(function(){var e=!0,t=function(e){o(function(t){return t.stripe?t:{stripe:e,elements:e.elements(n)}})};return"async"!==i.tag||a.stripe?"sync"!==i.tag||a.stripe||t(i.stripe):i.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[i,a,n]);var l=oI(t);y.useEffect(function(){null!==l&&l!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[l,t]);var c=oI(n);return y.useEffect(function(){if(a.elements){var e=dI(n,c,["clientSecret","fonts"]);e&&a.elements.update(e)}},[n,c,a.elements]),y.useEffect(function(){var e;(e=a.stripe)&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.10.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.10.0",url:"https://stripe.com/docs/stripe-js/react"}))},[a.stripe]),y.createElement(mI.Provider,{value:a},r)};yI.propTypes={stripe:kE.any,options:kE.object};var vI=function(){var e,t;return(e="calls useElements()",t=y.useContext(mI),gI(t,e)).elements};kE.func.isRequired;var _I=y.createContext(null);_I.displayName="CheckoutSdkContext";y.createContext(null).displayName="CheckoutContext",kE.any,kE.shape({fetchClientSecret:kE.func.isRequired,elementsOptions:kE.object}).isRequired;var bI=function(e){var t=y.useContext(_I),n=y.useContext(mI);if(t&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e}(t,e):gI(n,e)},wI=["mode"],xI=function(e,t){var n,r="".concat((n=e).charAt(0).toUpperCase()+n.slice(1),"Element"),i=t?function(e){bI("mounts <".concat(r,">"));var t=e.id,n=e.className;return y.createElement("div",{id:t,className:n})}:function(t){var n,i=t.id,s=t.className,a=t.options,o=void 0===a?{}:a,l=t.onBlur,c=t.onFocus,u=t.onReady,d=t.onChange,h=t.onEscape,f=t.onClick,p=t.onLoadError,m=t.onLoaderStart,g=t.onNetworksChange,v=t.onConfirm,_=t.onCancel,b=t.onShippingAddressChange,w=t.onShippingRateChange,x=t.onSavedPaymentMethodRemove,S=t.onSavedPaymentMethodUpdate,C=bI("mounts <".concat(r,">")),k="elements"in C?C.elements:null,E="checkoutSdk"in C?C.checkoutSdk:null,T=iI(y.useState(null),2),N=T[0],I=T[1],j=y.useRef(null),A=y.useRef(null);aI(N,"blur",l),aI(N,"focus",c),aI(N,"escape",h),aI(N,"click",f),aI(N,"loaderror",p),aI(N,"loaderstart",m),aI(N,"networkschange",g),aI(N,"confirm",v),aI(N,"cancel",_),aI(N,"shippingaddresschange",b),aI(N,"shippingratechange",w),aI(N,"savedpaymentmethodremove",x),aI(N,"savedpaymentmethodupdate",S),aI(N,"change",d),u&&(n="expressCheckout"===e?u:function(){u(N)}),aI(N,"ready",n),y.useLayoutEffect(function(){if(null===j.current&&null!==A.current&&(k||E)){var t=null;if(E)switch(e){case"payment":t=E.createPaymentElement(o);break;case"address":if(!("mode"in o))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=o.mode,i=rI(o,wI);if("shipping"===n)t=E.createShippingAddressElement(i);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=E.createBillingAddressElement(i)}break;case"expressCheckout":t=E.createExpressCheckoutElement(o);break;case"currencySelector":t=E.createCurrencySelectorElement();break;case"taxId":t=E.createTaxIdElement(o);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else k&&(t=k.create(e,o));j.current=t,I(t),t&&t.mount(A.current)}},[k,E,o]);var P=oI(o);return y.useEffect(function(){if(j.current){var e=dI(o,P,["paymentRequest"]);e&&"update"in j.current&&j.current.update(e)}},[o,P]),y.useLayoutEffect(function(){return function(){if(j.current&&"function"==typeof j.current.destroy)try{j.current.destroy(),j.current=null}catch(e){}}},[]),y.createElement("div",{id:i,className:s,ref:A})};return i.propTypes={id:kE.string,className:kE.string,onChange:kE.func,onBlur:kE.func,onFocus:kE.func,onReady:kE.func,onEscape:kE.func,onClick:kE.func,onLoadError:kE.func,onLoaderStart:kE.func,onNetworksChange:kE.func,onConfirm:kE.func,onCancel:kE.func,onShippingAddressChange:kE.func,onShippingRateChange:kE.func,onSavedPaymentMethodRemove:kE.func,onSavedPaymentMethodUpdate:kE.func,options:kE.object},i.displayName=r,i.__elementType=e,i},SI="undefined"==typeof window;y.createContext(null).displayName="EmbeddedCheckoutProviderContext";xI("auBankAccount",SI);var CI=xI("card",SI);xI("cardNumber",SI),xI("cardExpiry",SI),xI("cardCvc",SI),xI("fpxBank",SI),xI("iban",SI),xI("idealBank",SI),xI("p24Bank",SI),xI("epsBank",SI),xI("payment",SI),xI("expressCheckout",SI),xI("currencySelector",SI),xI("paymentRequestButton",SI),xI("linkAuthentication",SI),xI("address",SI),xI("shippingAddress",SI),xI("paymentMethodMessaging",SI),xI("affirmMessage",SI),xI("afterpayClearpayMessage",SI),xI("taxId",SI);const kI={container:"_container_1kmwp_1",guestBanner:"_guestBanner_1kmwp_12",signInLink:"_signInLink_1kmwp_17",leftColumn:"_leftColumn_1kmwp_32",rightColumn:"_rightColumn_1kmwp_39",payNowButton:"_payNowButton_1kmwp_64",summaryBox:"_summaryBox_1kmwp_161",summaryTitle:"_summaryTitle_1kmwp_169",productsList:"_productsList_1kmwp_176",product:"_product_1kmwp_176",productImage:"_productImage_1kmwp_190",productDetails:"_productDetails_1kmwp_199",productTitle:"_productTitle_1kmwp_203",productVariants:"_productVariants_1kmwp_211",productPrice:"_productPrice_1kmwp_218",pricingDetails:"_pricingDetails_1kmwp_278",row:"_row_1kmwp_285",amount:"_amount_1kmwp_291",divider:"_divider_1kmwp_300",totalRow:"_totalRow_1kmwp_306",totalAmount:"_totalAmount_1kmwp_314",useSavedAddress:"_useSavedAddress_1kmwp_322",savedAddressesSection:"_savedAddressesSection_1kmwp_331",sectionTitle:"_sectionTitle_1kmwp_339",savedAddressSelector:"_savedAddressSelector_1kmwp_346",selectedAddressDisplay:"_selectedAddressDisplay_1kmwp_351",addressPreview:"_addressPreview_1kmwp_367",addressName:"_addressName_1kmwp_372",addressesList:"_addressesList_1kmwp_380",addressOption:"_addressOption_1kmwp_395",selectedOption:"_selectedOption_1kmwp_410",defaultBadge:"_defaultBadge_1kmwp_418",addressDetails:"_addressDetails_1kmwp_429",phoneNumber:"_phoneNumber_1kmwp_435",addressesLoading:"_addressesLoading_1kmwp_445",manageAddressesButton:"_manageAddressesButton_1kmwp_451",dropdownHelper:"_dropdownHelper_1kmwp_467",quantityControl:"_quantityControl_1kmwp_552",quantityBtn:"_quantityBtn_1kmwp_556",quantityValue:"_quantityValue_1kmwp_561",removeBtn:"_removeBtn_1kmwp_566",loadingContainer:"_loadingContainer_1kmwp_606"},EI=()=>{const e=zr(),{selectedCartItems:t}=$r(e=>e.cart),n=t;console.log("Order items:",n);const r=(t,n,r,i)=>{i>=1&&e(Bx({id:t,size:n,color:r,quantity:i}))},i=n&&n.length>0?n.reduce((e,t)=>{const n=(null==t?void 0:t.price)??"0";return e+(parseFloat(n.replace(/[^0-9.]/g,""))||0)*(Number(null==t?void 0:t.quantity)||1)},0):0,s=i;return m.jsxs("div",{className:kI.summaryBox,children:[m.jsx("h3",{className:kI.summaryTitle,children:"Order Summary"}),m.jsx("div",{className:kI.productsList,children:n&&n.length>0?n.map((t,n)=>m.jsxs("div",{className:kI.product,children:[m.jsx("div",{className:kI.productImage,style:{backgroundImage:`url(${t.image})`}}),m.jsxs("div",{className:kI.productDetails,children:[m.jsx("p",{className:kI.productTitle,children:t.name}),m.jsxs("p",{className:kI.productVariants,children:[t.size&&m.jsxs("span",{children:["Size: ",t.size]}),t.displayColor&&(t.displayColor.startsWith("linear-gradient")?m.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",background:t.displayColor,marginLeft:"5px",borderRadius:"50%",border:"1px solid #ccc",verticalAlign:"middle"},title:t.color}):m.jsx("span",{style:{display:"inline-block",width:"16px",height:"16px",backgroundColor:t.displayColor,marginLeft:"5px",borderRadius:"50%",border:"1px solid #ccc",verticalAlign:"middle"},title:t.color}))]}),m.jsxs("div",{className:kI.quantityControl,children:[m.jsx("button",{className:kI.quantityBtn,onClick:()=>r(t.id,t.size,t.color,t.quantity-1),disabled:t.quantity<=1,"aria-label":"Decrease quantity",children:m.jsx(jw,{size:12})}),m.jsx("span",{className:kI.quantityValue,children:t.quantity}),m.jsx("button",{className:kI.quantityBtn,onClick:()=>r(t.id,t.size,t.color,t.quantity+1),"aria-label":"Increase quantity",children:m.jsx(Ow,{size:12})}),m.jsx("button",{className:kI.removeBtn,onClick:()=>{return n=t.id,r=t.size,i=t.color,void e(Ux({id:n,size:r,color:i}));var n,r,i},"aria-label":"Remove item",children:m.jsx(zw,{size:14})})]}),m.jsx("p",{className:kI.productPrice,children:t.price})]})]},n)):m.jsx("div",{className:kI.emptyCart,children:"No items in cart"})}),m.jsxs("div",{className:kI.pricingDetails,children:[m.jsxs("div",{className:kI.row,children:[m.jsx("span",{children:"Subtotal"}),m.jsxs("span",{className:kI.amount,children:["AED ",i.toFixed(2)]})]}),m.jsxs("div",{className:kI.row,children:[m.jsx("span",{children:"Shipping"}),m.jsx("span",{className:kI.amount,children:"FREE"})]}),m.jsx("hr",{className:kI.divider}),m.jsxs("div",{className:kI.totalRow,children:[m.jsx("span",{children:"Total"}),m.jsxs("span",{className:kI.totalAmount,children:["AED ",s.toFixed(2)]})]})]})]})},TI="_container_lo0me_1",NI="_title_lo0me_11",II="_formGroup_lo0me_25",jI="_nameRow_lo0me_37",AI="_locationRow_lo0me_39",PI="_inputGroup_lo0me_49",OI="_input_lo0me_49",DI="_select_lo0me_91",RI="_textarea_lo0me_93",LI="_inputError_lo0me_123",MI="_errorText_lo0me_131",FI="_noteGroup_lo0me_143",zI=({formData:e,setFormData:t,errors:n={}})=>{const r=e=>{const{name:n,value:r}=e.target;t(e=>({...e,[n]:r}))};return m.jsxs("div",{className:TI,children:[m.jsx("h3",{className:NI,children:"Shipping Information"}),m.jsxs("div",{className:II,children:[m.jsxs("div",{className:jI,children:[m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"firstName",children:"First Name*"}),m.jsx("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName||"",onChange:r,className:`${OI} ${n.firstName?LI:""}`}),n.firstName&&m.jsx("span",{className:MI,children:n.firstName})]}),m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"lastName",children:"Last Name*"}),m.jsx("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName||"",onChange:r,className:`${OI} ${n.lastName?LI:""}`}),n.lastName&&m.jsx("span",{className:MI,children:n.lastName})]})]}),m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"email",children:"Email Address*"}),m.jsx("input",{type:"email",id:"email",name:"email",value:e.email||"",onChange:r,className:`${OI} ${n.email?LI:""}`}),n.email&&m.jsx("span",{className:MI,children:n.email})]}),m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"phone",children:"Phone Number*"}),m.jsx("input",{type:"tel",id:"phone",name:"phone",value:e.phone||"",onChange:r,className:`${OI} ${n.phone?LI:""}`}),n.phone&&m.jsx("span",{className:MI,children:n.phone})]}),m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"address",children:"Street Address*"}),m.jsx("input",{type:"text",id:"address",name:"address",value:e.address||"",onChange:r,className:`${OI} ${n.address?LI:""}`}),n.address&&m.jsx("span",{className:MI,children:n.address})]}),m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"apartment",children:"Apartment, suite, etc.*"}),m.jsx("input",{type:"text",id:"apartment",name:"apartment",value:e.apartment||"",onChange:r,className:OI})]}),m.jsxs("div",{className:AI,children:[m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"city",children:"City*"}),m.jsx("input",{type:"text",id:"city",name:"city",value:e.city||"",onChange:r,className:`${OI} ${n.city?LI:""}`}),n.city&&m.jsx("span",{className:MI,children:n.city})]}),m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"state",children:"State*"}),m.jsx("input",{type:"text",id:"state",name:"state",value:e.state||"",onChange:r,className:`${OI} ${n.state?LI:""}`}),n.state&&m.jsx("span",{className:MI,children:n.state})]}),m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"zipCode",children:"ZIP Code*"}),m.jsx("input",{type:"text",id:"zipCode",name:"zipCode",value:e.zipCode||"",onChange:r,className:`${OI} ${n.zipCode?LI:""}`}),n.zipCode&&m.jsx("span",{className:MI,children:n.zipCode})]})]}),m.jsxs("div",{className:PI,children:[m.jsx("label",{htmlFor:"country",children:"Country*"}),m.jsxs("select",{id:"country",name:"country",value:e.country||"United Arab Emirates",onChange:r,className:`${DI} ${n.country?LI:""}`,children:[m.jsx("option",{value:"United Arab Emirates",children:"United Arab Emirates"}),m.jsx("option",{value:"Saudi Arabia",children:"Saudi Arabia"}),m.jsx("option",{value:"Qatar",children:"Qatar"}),m.jsx("option",{value:"Kuwait",children:"Kuwait"}),m.jsx("option",{value:"Bahrain",children:"Bahrain"}),m.jsx("option",{value:"Oman",children:"Oman"}),m.jsx("option",{value:"India",children:"India"}),m.jsx("option",{value:"United States",children:"United States"}),m.jsx("option",{value:"United Kingdom",children:"United Kingdom"})]}),n.country&&m.jsx("span",{className:MI,children:n.country})]})]}),m.jsxs("div",{className:FI,children:[m.jsx("label",{htmlFor:"orderNotes",children:"Order Notes (optional)"}),m.jsx("textarea",{id:"orderNotes",name:"orderNotes",rows:"3",value:e.orderNotes||"",onChange:r,className:RI,placeholder:"Special instructions for delivery"})]})]})},UI="_container_1m1qn_1",BI="_title_1m1qn_11",$I="_methodsContainer_1m1qn_25",VI="_methodCard_1m1qn_37",qI="_selected_1m1qn_69",HI="_methodIcon_1m1qn_79",WI="_methodInfo_1m1qn_89",GI="_methodName_1m1qn_97",KI="_methodDescription_1m1qn_111",QI="_methodRadio_1m1qn_121",YI="_radio_1m1qn_133",XI="_radioSelected_1m1qn_163",JI=[{id:"cod",name:"Cash On Delivery",description:"Pay when you receive your order",icon:""},{id:"card",name:"Credit / Debit Card",description:"Pay securely with your card",icon:""}],ZI=({selectedMethod:e,onMethodSelect:t})=>m.jsxs("div",{className:UI,children:[m.jsx("h3",{className:BI,children:"Payment Method"}),m.jsx("div",{className:$I,children:JI.map(n=>m.jsxs("div",{className:`${VI} ${e===n.id?qI:""}`,onClick:()=>{return r=n.id,console.log(" Payment method selected:",r),console.log(" Current selected method:",e),console.log(" Calling onMethodSelect with:",r),void t(r);var r},children:[m.jsx("div",{className:HI,children:n.icon}),m.jsxs("div",{className:WI,children:[m.jsx("div",{className:GI,children:n.name}),m.jsx("div",{className:KI,children:n.description})]}),m.jsx("div",{className:QI,children:m.jsx("div",{className:YI,children:m.jsx("div",{className:e===n.id?XI:""})})})]},n.id))})]}),ej="_formContainer_1mokh_1",tj="_paymentForm_1mokh_11",nj="_formGroup_1mokh_23",rj="_cardElementWrapper_1mokh_47",ij="_payButton_1mokh_73",sj="_errorMessage_1mokh_117",aj="_successMessage_1mokh_133",oj={style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},lj=({amount:e,clientSecret:t,billingDetails:n,onPaymentSuccess:r,onPaymentError:i})=>{const s=bI("calls useStripe()").stripe,a=vI(),[o,l]=g.useState(!1),[c,u]=g.useState(null),[d,h]=g.useState(!1),[f,p]=g.useState(!1);g.useEffect(()=>{t&&(u(null),h(!1),p(!1))},[t]);return m.jsx("div",{className:ej,children:m.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!s||!a)return;if(!t)return void u("Payment not initialized. Please try again.");p(!0);const o=a.getElement(CI);try{const e=await s.confirmCardPayment(t,{payment_method:{card:o,billing_details:n}});e.error?(u(`Payment failed: ${e.error.message}`),p(!1),i&&i(e.error)):(u(null),h(!0),p(!1),r&&r(e.paymentIntent))}catch(l){console.error("Payment error:",l),u("An unexpected error occurred. Please try again."),p(!1),i&&i(l)}},className:tj,children:[m.jsxs("div",{className:nj,children:[m.jsx("label",{htmlFor:"card-element",children:"Credit or debit card"}),m.jsx("div",{className:rj,children:m.jsx(CI,{id:"card-element",options:oj,onChange:e=>{u(e.error?e.error.message:"")}})})]}),c&&m.jsx("div",{className:sj,children:c}),m.jsx("button",{disabled:f||!s||d,className:ij,children:f?"Processing...":`Pay ${(e/100).toFixed(2)}`}),d&&m.jsx("div",{className:aj,children:"Payment succeeded! Thank you for your purchase."})]})})},cj="https://t7ck79lu3m.execute-api.eu-north-1.amazonaws.com/prod",uj=async()=>{try{const e=k_.currentUser;return e?await e.getIdToken(!0):(console.warn("No authenticated user found when getting auth token"),null)}catch(e){return console.error("Error getting auth token:",e),null}},dj=async e=>{try{const n=sessionStorage.getItem("pendingOrderId");if("card"===e.paymentMethod&&e.paymentIntentId&&n){sessionStorage.removeItem("pendingOrderId");try{const e=await uj(),t={"Content-Type":"application/json"};e&&(t.Authorization=`Bearer ${e}`),await fetch(`${cj}/api/orders/${n}`,{method:"PATCH",headers:t,body:JSON.stringify({status:"processing",paymentStatus:"paid",updatedAt:new Date}),credentials:"include"})}catch(t){console.error("Error updating order via API:",t)}return{orderId:n}}const r=Object.entries(e).reduce((e,[t,n])=>(e[t]=void 0===n?null:n,e),{}),i={...r,createdAt:new Date,updatedAt:new Date,status:"pending"!==r.status&&r.status?r.status:"processing"},s=await fg(am(C_,"orders"),i);if("cod"===e.paymentMethod)try{const e=await uj(),t={"Content-Type":"application/json"};e&&(t.Authorization=`Bearer ${e}`),await fetch(`${cj}/api/orders/cod`,{method:"POST",headers:t,body:JSON.stringify({...i,orderId:s.id}),credentials:"include"})}catch(t){console.error("Error notifying API about COD order:",t)}return{orderId:s.id}}catch(n){return console.error("Error creating order:",n),{error:n.message||"Failed to create order"}}},hj=async e=>{var t;try{if(!e)throw new Error("Order ID is required");const n=om(C_,"orders",e),r=await lg(n);if(!r.exists())return{error:"Order not found"};const i=r.data();return{order:{id:r.id,...i,createdAt:(null==(t=i.createdAt)?void 0:t.toDate)?i.createdAt.toDate():i.createdAt}}}catch(n){return console.error("Error getting order by ID:",n),{error:n.message||"Failed to get order"}}};var fj,pj="basil",mj="https://js.stripe.com",gj="".concat(mj,"/").concat(pj,"/stripe.js"),yj=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,vj=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,_j=function(e){return yj.test(e)||vj.test(e)},bj=function(e){var t=document.createElement("script");t.src="".concat(gj).concat("");var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},wj=null,xj=null,Sj=null,Cj=function(e){return null!==wj?wj:(wj=new Promise(function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(mj,'"]')),t=0;t<e.length;t++){var n=e[t];if(_j(n.src))return n}return null}();if(r&&e);else if(r){if(r&&null!==Sj&&null!==xj){var i;r.removeEventListener("load",Sj),r.removeEventListener("error",xj),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=bj()}}else r=bj();Sj=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),xj=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",Sj),r.addEventListener("error",xj)}catch(s){return void n(s)}else t(null)})).catch(function(e){return wj=null,Promise.reject(e)})},kj=!1,Ej=function(){return fj||(fj=Cj(null).catch(function(e){return fj=null,Promise.reject(e)}))};Promise.resolve().then(function(){return Ej()}).catch(function(e){kj||console.warn(e)});var Tj=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];kj=!0;var r=Date.now();return Ej().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),i=function(e){return 3===e?"v3":e}(e.version),s=pj;r&&i!==s&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(s,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})}(a,n),a}(e,t,r)})};let Nj=null;const Ij=async(e,t="usd",n={},r=null)=>{try{const i="https://t7ck79lu3m.execute-api.eu-north-1.amazonaws.com/prod/api/payment/create-intent",{userId:s,userEmail:a,email:o}=n||{},l=k_.currentUser,c=(null==l?void 0:l.uid)||s||"guest-user",u=(null==l?void 0:l.email)||a||o||"guest@example.com";console.log(" User identification for payment:",{hasFirebaseUser:!!l,firebaseUid:null==l?void 0:l.uid,firebaseEmail:null==l?void 0:l.email,metadataUserId:s,metadataUserEmail:a,metadataEmail:o,finalUserId:c,finalEmail:u});const d=await(async()=>{try{const e=k_.currentUser;return e?await e.getIdToken(!0):(console.warn("No authenticated user found when getting auth token"),null)}catch(e){return console.error("Error getting auth token:",e),null}})(),h={"Content-Type":"application/json"};d&&(h.Authorization=`Bearer ${d}`),console.log("Creating payment intent with:",{amount:e,currency:t,userId:c,email:u?`${u.substring(0,3)}...`:void 0,hasAuthToken:!!d,hasShipping:!!r,shippingCountry:r&&r.address?r.address.country:"Not provided"});const f={amount:e,currency:t||"aed",userId:c,metadata:{customerName:n.firstName&&n.lastName?`${n.firstName} ${n.lastName}`:(null==l?void 0:l.displayName)||"Guest User",email:u,phone:n.phone||"",address:n.shippingAddress?`${n.shippingAddress.address}, ${n.shippingAddress.city}, ${n.shippingAddress.country}`:"Address not provided"},cartItems:n.items||[],shipping:r};console.log(" Making payment intent API call to:",i),console.log(" Request headers:",h),console.log(" Request body:",f);const p=await fetch(i,{method:"POST",headers:h,body:JSON.stringify(f),credentials:"include"});console.log(" API response status:",p.status),console.log(" API response ok:",p.ok),console.log("Payment intent response status:",p.status);const m=await p.json();if(console.log(" API response data:",m),!p.ok)throw console.error(" Payment intent error response:",m),new Error(m.error||`Failed to create payment intent. Status code: ${p.status}`);if(console.log(" Payment intent created successfully:",{hasClientSecret:!!m.clientSecret,paymentIntentId:m.paymentIntentId,orderId:m.orderId,clientSecretPreview:m.clientSecret?m.clientSecret.substring(0,20)+"...":"None"}),!m.clientSecret)throw new Error("Server did not return a client secret");if(!m.paymentIntentId)throw new Error("Server did not return a payment intent ID");return console.log(" Payment intent created successfully:",m),{clientSecret:m.clientSecret,paymentIntentId:m.paymentIntentId,orderId:m.orderId}}catch(i){return console.error("Error creating payment intent:",i),{error:i.message}}},jj={modalOverlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},modalContent:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"24px",width:"90%",maxWidth:"500px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.3)",position:"relative",border:"2px solid #4a90e2",background:"linear-gradient(to bottom, #f9f9f9, #ffffff)",zIndex:1001}},Aj=()=>{const e=zr(),t=we(),n=ve(),{selectedCartItems:r}=$r(e=>e.cart||[]),i=cS()||{},{currentUser:s,userData:a,isAuthenticated:o=!1,loading:l=!1}=i,c="true"===localStorage.getItem("isGuestUser");g.useEffect(()=>{e(iS(c))},[e,c]);const u="true"===new URLSearchParams(n.search).get("direct"),[d,h]=g.useState(!1),[f,p]=g.useState("cod"),[y,v]=g.useState(null),[_,b]=g.useState(""),[w,x]=g.useState(!1),[S,C]=g.useState({firstName:(null==a?void 0:a.firstName)||"",lastName:(null==a?void 0:a.lastName)||"",email:(null==s?void 0:s.email)||"",phone:(null==a?void 0:a.phoneNumber)||"",country:"United Arab Emirates"}),[k,E]=g.useState({}),[T,N]=g.useState([]),[I,j]=g.useState(null),[A,P]=g.useState(!1),[O,D]=g.useState(!1);g.useEffect(()=>{if("card"===f){(async()=>{try{const e=await(Nj||(Nj=Tj("pk_live_51RmHI9IHBWfT3EaP9yCeGKvp3OuOtKbGR0jx9EXttPgPfxvWDIheoWSIoIUlzLtaIebehDypF1jz4Uqg7XCqv8zI00gvrVODPZ")),Nj);v(e)}catch(e){console.error(" Error loading Stripe:",e)}})()}},[f]);const R=g.useCallback(()=>r&&0!==r.length?r.reduce((e,t)=>e+parseFloat(t.price.replace(/AED\s?|Rs.\s?||,/g,""))*t.quantity,0):0,[r]),L=g.useCallback(()=>{const e=R(),t=.05*e,n=e+t;return{subtotalAmount:Math.round(100*e),vatAmount:Math.round(100*t),totalAmount:Math.round(100*n),vatRate:"5%",vatPercentage:"5%"}},[R]);g.useEffect(()=>{if((null==s?void 0:s.uid)&&o&&!c){(async()=>{try{D(!0);const e=am(C_,"users",s.uid,"addresses"),t=(await ug(e)).docs.map(e=>({id:e.id,...e.data()}));N(t);const n=t.find(e=>e.isDefault);n?(j(n),M(n)):t.length>0&&(j(t[0]),M(t[0]))}catch(e){console.error("Error fetching addresses:",e),Vt.error("Failed to load your saved addresses")}finally{D(!1)}})()}},[null==s?void 0:s.uid,o,c]);const M=e=>{e&&C(t=>({...t,firstName:e.firstName||t.firstName,lastName:e.lastName||t.lastName,address:e.address1||"",apartment:e.address2||"",city:e.city||"",state:e.state||"",zipCode:e.zipCode||"",country:e.country||"United Arab Emirates",phone:e.phone||t.phone}))};g.useEffect(()=>{a&&!c&&C(e=>({...e,firstName:a.firstName||e.firstName,lastName:a.lastName||e.lastName,email:(null==s?void 0:s.email)||e.email,phone:a.phoneNumber||e.phone}))},[a,s,c]),g.useEffect(()=>{r&&0!==r.length||(t("/shop"),Vt.info("Your cart is empty. Add items before checkout."))},[r,t]),g.useEffect(()=>{l||o||c||h(!0)},[o,l,c]);const F=g.useCallback(async()=>{if(console.log(" Creating payment intent immediately for card payment"),r&&0!==r.length)try{const e=L();console.log(" Order amounts calculated:",e);const t={cartItemCount:r.length,userId:c?"guest-user":(null==s?void 0:s.uid)||"guest-user",userEmail:c?S.email||"":(null==s?void 0:s.email)||S.email||"",customerName:`${S.firstName} ${S.lastName}`,phone:S.phone||"",address:`${S.address}, ${S.city}, ${S.state}, ${S.country}`,subtotalAmount:e.subtotalAmount.toString(),vatAmount:e.vatAmount.toString(),vatRate:e.vatRate,taxCompliant:"UAE_VAT_5_PERCENT",taxRegistrationNumber:"104803456300003",paymentMethod:"card",isGuestCheckout:c},n=S.address?{name:`${S.firstName} ${S.lastName}`,address:{line1:S.address,line2:S.apartment||"",city:S.city||"",state:S.state||"",postal_code:S.zipCode||"",country:Ok(S.country)},phone:S.phone||""}:null;console.log(" Creating payment intent with:",{amount:e.totalAmount,currency:"aed",userId:c?"guest-user":null==s?void 0:s.uid,email:c?S.email:(null==s?void 0:s.email)||S.email,cartItemCount:r.length,hasShippingData:!!n,isGuestCheckout:c});const{clientSecret:i,error:a,paymentIntentId:o,orderId:l}=await Ij(e.totalAmount,"aed",t,n);console.log(" Payment intent response:",{hasClientSecret:!!i,hasError:!!a,paymentIntentId:o,orderId:l,clientSecretPreview:i?i.substring(0,20)+"...":"None"}),a?(console.error(" Payment intent creation failed:",a),Vt.error("Could not initialize payment. Please try again.")):i?(console.log(" Payment intent created successfully"),console.log(" Payment Intent Details:",{paymentIntentId:o,orderId:l,clientSecretLength:i.length,clientSecretStartsWith:i.startsWith("pi_")?"Yes":"No"}),b(i),sessionStorage.setItem("currentPaymentIntentId",o),l&&sessionStorage.setItem("pendingOrderId",l),console.log(" Payment intent ready for Stripe")):(console.error(" No client secret received from payment intent creation"),Vt.error("Payment initialization failed. Please try again."))}catch(e){console.error(" Error creating payment intent:",e),Vt.error("Payment initialization failed. Please try again.")}else console.log(" No cart items, cannot create payment intent")},[r,L,c,s,S]);g.useEffect(()=>{console.log(" Payment method changed to:",f),"card"===f&&(console.log(" Card payment selected - triggering payment intent creation"),F())},[f,F]),g.useEffect(()=>{if(console.log(" Payment Intent useEffect triggered:",{paymentMethod:f,hasSelectedCartItems:!!r,cartItemsLength:(null==r?void 0:r.length)||0,isAuthenticated:o,isGuestUser:c,shouldCreatePaymentIntent:"card"===f&&r&&r.length>0&&(o||c)}),"card"===f&&r&&r.length>0){if(console.log(" Card payment selected, checking authentication..."),!c&&!(null==s?void 0:s.uid))return console.error(" User ID not available, cannot create payment intent"),Vt.error("User authentication required for payment"),void h(!0);if(!c&&!s)return console.error(" User authentication token expired"),Vt.error("Your session has expired. Please log in again."),void h(!0);console.log(" Authentication check passed, proceeding with payment intent creation");(async()=>{var e,t,n;try{console.log(" Starting payment intent creation...",{paymentMethod:f,cartItemsCount:r.length,isAuthenticated:o,isGuestUser:c,hasCurrentUser:!!(null==s?void 0:s.uid)});const e=L();console.log(" Order amounts calculated:",e);const t={cartItemCount:r.length,userId:c?"guest-user":s.uid,userEmail:c?S.email||"":s.email||S.email||"",customerName:`${S.firstName} ${S.lastName}`,phone:S.phone||"",address:`${S.address}, ${S.city}, ${S.state}, ${S.country}`,subtotalAmount:e.subtotalAmount.toString(),vatAmount:e.vatAmount.toString(),vatRate:e.vatRate,taxCompliant:"UAE_VAT_5_PERCENT",taxRegistrationNumber:"104803456300003",paymentMethod:f,isGuestCheckout:c},n=S.address?{name:`${S.firstName} ${S.lastName}`,address:{line1:S.address,line2:S.apartment||"",city:S.city||"",state:S.state||"",postal_code:S.zipCode||"",country:Ok(S.country)},phone:S.phone||""}:null;console.log("Creating payment intent with:",{amount:e.totalAmount,currency:"aed",userId:c?"guest-user":s.uid,email:c?S.email:s.email||S.email,cartItemCount:r.length,hasShippingData:!!n,isGuestCheckout:c});const{clientSecret:i,error:a,paymentIntentId:l,orderId:u}=await Ij(e.totalAmount,"aed",t,n);console.log("Payment intent response:",{hasClientSecret:!!i,hasError:!!a,paymentIntentId:l,orderId:u}),a?(console.error("Payment intent creation failed:",a),a.includes("UNAUTHENTICATED")||a.includes("authentication")?(Vt.error("Authentication failed. Please log in again."),h(!0)):(Vt.error("Could not initialize payment. Please try again."),console.error("Payment intent error:",a))):i?(console.log("Payment intent created successfully"),b(i),sessionStorage.setItem("currentPaymentIntentId",l),u&&sessionStorage.setItem("pendingOrderId",u)):(console.error("No client secret received from payment intent creation"),Vt.error("Payment initialization failed. Please try again."))}catch(i){console.error("Error creating payment intent:",i),!c&&((null==(e=i.message)?void 0:e.includes("User not authenticated"))||(null==(t=i.message)?void 0:t.includes("UNAUTHENTICATED"))||(null==(n=i.message)?void 0:n.includes("auth")))?(Vt.error("Authentication error. Please log in again."),h(!0)):Vt.error("Payment initialization failed. Please try again.")}})()}},[f,r,o,s,S,c,L]);const z=async n=>{try{const i=L(),a={address:{line1:S.address,line2:S.apartment||"",city:S.city,state:S.state,postal_code:S.zipCode,country:Ok(S.country)},name:`${S.firstName} ${S.lastName}`,phone:S.phone||"",status:"paid"},o=r.map(e=>({id:e.id,name:e.name,price:e.price,quantity:e.quantity,size:e.size||"",color:e.color||0,displayColor:e.displayColor||"#000000",image:e.image||""})),l={orderId:"",userId:c?"guest-user":(null==s?void 0:s.uid)||"",email:S.email||"",customerName:`${S.firstName} ${S.lastName}`,phone:S.phone||"",address:`${S.address}, ${S.city}, ${S.state}, ${S.country}`,subtotalAmount:i.subtotalAmount.toString(),vatAmount:i.vatAmount.toString(),vatRate:i.vatRate,taxCompliant:"UAE_VAT_5_PERCENT",taxRegistrationNumber:"104803456300003"},u={userId:c?"guest-user":(null==s?void 0:s.uid)||"",userEmail:S.email||"",items:o,shipping:a,metadata:l,currency:"aed",paymentMethod:"card",paymentStatus:"paid",paymentIntentId:n.id,paymentData:n,status:"paid",subtotalAmount:i.subtotalAmount,vatAmount:i.vatAmount,totalAmount:i.totalAmount,vatPercentage:i.vatPercentage,vatRate:.05,taxRegistrationNumber:"104803456300003",notes:S.orderNotes||"",isGuestOrder:c,createdAt:new Date,updatedAt:new Date},{orderId:d,error:h}=await dj(u);if(h)return Vt.error("Your payment was successful, but we could not create your order. Our team will contact you."),void x(!1);u.metadata.orderId=d,c?(e(Mx()),localStorage.removeItem("cartItems")):(null==s?void 0:s.uid)?(await e(Ax(s.uid)),e(Mx())):e(Mx()),c&&localStorage.removeItem("isGuestUser"),t("/order-success",{state:{orderDetails:{orderId:d,...u}}})}catch(i){console.error("Order error:",i),Vt.error("Your payment was successful, but there was an issue processing your order. Our team will contact you.")}},U=e=>{console.error("Payment error:",e),Vt.error("Payment failed. Please try again or use a different payment method."),x(!1)};return g.useEffect(()=>{u&&(o||c)&&!l&&(p("card"),I&&M(I),setTimeout(()=>{const e=document.getElementById("payment-method-section");e&&e.scrollIntoView({behavior:"smooth"})},500))},[u,o,c,l,I]),l?m.jsx("div",{className:kI.loadingContainer,children:"Loading checkout..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:kI.container,children:[m.jsxs("div",{className:kI.leftColumn,children:[c&&m.jsx("div",{className:kI.guestBanner,children:m.jsxs("p",{children:["You are checking out as a guest."," ",m.jsx("button",{onClick:()=>{localStorage.removeItem("isGuestUser"),h(!0)},className:kI.signInLink,children:"Sign in"})," ","to access your account benefits."]})}),!c&&T.length>0&&m.jsxs("div",{className:kI.savedAddressesSection,children:[m.jsx("h3",{className:kI.sectionTitle,children:"Shipping Address"}),m.jsxs("div",{className:kI.savedAddressSelector,children:[m.jsxs("div",{className:kI.selectedAddressDisplay,onClick:()=>P(!A),children:[I?m.jsxs("div",{className:kI.addressPreview,children:[m.jsxs("p",{className:kI.addressName,children:[m.jsxs("strong",{children:[I.firstName," ",I.lastName]}),I.isDefault&&m.jsx("span",{className:kI.defaultBadge,children:"Default"})]}),m.jsxs("p",{className:kI.addressDetails,children:[I.address1,I.address2&&`, ${I.address2}`,",",I.city,", ",I.state," ",I.zipCode]}),m.jsxs("p",{className:kI.phoneNumber,children:[m.jsx("span",{children:"Phone:"})," ",I.phone]})]}):m.jsx("p",{children:"Select a saved address"}),A?m.jsx(Cw,{}):m.jsx(Sw,{})]}),A&&m.jsxs("div",{className:kI.addressesList,children:[O?m.jsx("p",{className:kI.addressesLoading,children:"Loading addresses..."}):m.jsxs(m.Fragment,{children:[m.jsx("p",{className:kI.dropdownHelper,children:"Click on an address to select it"}),T.map(e=>m.jsxs("div",{className:`${kI.addressOption} ${(null==I?void 0:I.id)===e.id?kI.selectedOption:""}`,onClick:()=>(e=>{j(e),M(e),P(!1)})(e),children:[m.jsxs("p",{className:kI.addressName,children:[m.jsxs("strong",{children:[e.firstName," ",e.lastName]}),e.isDefault&&m.jsx("span",{className:kI.defaultBadge,children:"Default"})]}),m.jsxs("p",{className:kI.addressDetails,children:[e.address1,e.address2&&`, ${e.address2}`,",",e.city,", ",e.state," ",e.zipCode]}),m.jsxs("p",{className:kI.phoneNumber,children:[m.jsx("span",{children:"Phone:"})," ",e.phone]})]},e.id))]}),m.jsx("button",{className:kI.manageAddressesButton,onClick:()=>t("/account?tab=addresses"),children:"Manage Addresses"})]})]}),m.jsx("p",{className:kI.useSavedAddress,children:"Using saved address. You can edit details below if needed."})]}),c&&m.jsxs("div",{className:kI.guestFormHeader,children:[m.jsx("h3",{className:kI.sectionTitle,children:"Shipping Information"}),m.jsx("p",{children:"Please enter your shipping details below"})]}),m.jsx(zI,{formData:S,setFormData:C,errors:k}),m.jsx("div",{id:"payment-method-section",children:m.jsx(ZI,{selectedMethod:f,onMethodSelect:e=>{console.log(" Payment method selector called with:",e),p(e)}})}),(()=>{const e="card"===f&&y&&_;console.log(" Stripe form render check:",{paymentMethod:f,hasStripePromise:!!y,hasClientSecret:!!_,shouldShowStripeForm:e});const t=L();return e?m.jsx(yI,{stripe:y,children:m.jsx(lj,{amount:t.totalAmount,clientSecret:_,billingDetails:{name:`${S.firstName} ${S.lastName}`,email:S.email,phone:S.phone,address:{line1:S.address,line2:S.apartment,city:S.city,state:S.state,postal_code:S.zipCode,country:Ok(S.country)}},onPaymentSuccess:z,onPaymentError:U})}):null})(),"cod"===f&&m.jsx("button",{className:kI.payNowButton,onClick:async()=>{if((()=>{const e={};return["firstName","lastName","email","phone","address","city","state","zipCode","country"].forEach(t=>{S[t]&&""!==S[t].trim()||(e[t]=`${t.charAt(0).toUpperCase()+t.slice(1)} is required`)}),S.email&&!/\S+@\S+\.\S+/.test(S.email)&&(e.email="Please enter a valid email address"),S.phone&&S.phone.length<10&&(e.phone="Please enter a valid phone number"),E(e),0===Object.keys(e).length})())try{x(!0);const n=L(),i={address:{line1:S.address,line2:S.apartment||"",city:S.city,state:S.state,postal_code:S.zipCode,country:Ok(S.country)},name:`${S.firstName} ${S.lastName}`,phone:S.phone||"",status:"pending"},a=r.map(e=>({id:e.id,name:e.name,price:e.price,quantity:e.quantity,size:e.size||"",color:e.color||0,displayColor:e.displayColor||"#000000",image:e.image||""})),o={orderId:"",userId:c?"guest-user":(null==s?void 0:s.uid)||"",email:S.email||"",customerName:`${S.firstName} ${S.lastName}`,phone:S.phone||"",address:`${S.address}, ${S.city}, ${S.state}, ${S.country}`,subtotalAmount:n.subtotalAmount.toString(),vatAmount:n.vatAmount.toString(),vatRate:n.vatRate,taxCompliant:"UAE_VAT_5_PERCENT",taxRegistrationNumber:"104803456300003",paymentMethod:"cod"},l={userId:c?"guest-user":(null==s?void 0:s.uid)||"",userEmail:S.email||"",items:a,shipping:i,metadata:o,currency:"aed",paymentMethod:"cod",paymentStatus:"pending",status:"pending",subtotalAmount:n.subtotalAmount,vatAmount:n.vatAmount,totalAmount:n.totalAmount,vatPercentage:n.vatPercentage,vatRate:.05,taxRegistrationNumber:"104803456300003",notes:S.orderNotes||"",isGuestOrder:c,createdAt:new Date,updatedAt:new Date},{orderId:u,error:d}=await dj(l);if(d)return Vt.error("Failed to create your order. Please try again."),void x(!1);l.metadata.orderId=u,c?(e(Mx()),localStorage.removeItem("cartItems")):(null==s?void 0:s.uid)?(await e(Ax(s.uid)),e(Mx())):e(Mx()),c&&localStorage.removeItem("isGuestUser"),t("/order-success",{state:{orderDetails:{orderId:u,...l}}})}catch(n){console.error("Order error:",n),Vt.error("Something went wrong. Please try again."),x(!1)}else Vt.error("Please fill in all required fields correctly.")},disabled:w,children:w?"Processing...":"Complete Order"})]}),m.jsx("div",{className:kI.rightColumn,children:m.jsx(EI,{})})]}),d&&m.jsx("div",{style:jj.modalOverlay,children:m.jsx("div",{style:jj.modalContent,children:m.jsx(ZT,{isOpen:d,onClose:()=>{h(!1)}})})})]})},Pj={container:"_container_1k43a_1",accountContainer:"_accountContainer_1k43a_16",sidebar:"_sidebar_1k43a_27",welcomeText:"_welcomeText_1k43a_37",menuItems:"_menuItems_1k43a_44",menuItem:"_menuItem_1k43a_44",active:"_active_1k43a_71",logoutButton:"_logoutButton_1k43a_76",content:"_content_1k43a_95",ordersSection:"_ordersSection_1k43a_102",sectionTitle:"_sectionTitle_1k43a_109",orderFilters:"_orderFilters_1k43a_116",filterButton:"_filterButton_1k43a_125",activeFilter:"_activeFilter_1k43a_141",ordersList:"_ordersList_1k43a_147",emptyState:"_emptyState_1k43a_155",emptyStateIcon:"_emptyStateIcon_1k43a_164",emptyStateText:"_emptyStateText_1k43a_170",shopNowButton:"_shopNowButton_1k43a_176",addressesSection:"_addressesSection_1k43a_193",addAddressButton:"_addAddressButton_1k43a_200",addressGrid:"_addressGrid_1k43a_216",addressCard:"_addressCard_1k43a_222",defaultBadge:"_defaultBadge_1k43a_234",addressHeader:"_addressHeader_1k43a_245",addressActions:"_addressActions_1k43a_262",editButton:"_editButton_1k43a_271",deleteButton:"_deleteButton_1k43a_272",defaultButton:"_defaultButton_1k43a_273",loadingSpinner:"_loadingSpinner_1k43a_317",loginPrompt:"_loginPrompt_1k43a_342",loginButton:"_loginButton_1k43a_358",guestTrackOrder:"_guestTrackOrder_1k43a_373",guestHeader:"_guestHeader_1k43a_382",guestSubtitle:"_guestSubtitle_1k43a_394",inlineLink:"_inlineLink_1k43a_402",trackOrderSection:"_trackOrderSection_1k43a_424",trackForm:"_trackForm_1k43a_432",inputGroup:"_inputGroup_1k43a_436",orderInput:"_orderInput_1k43a_443",trackButton:"_trackButton_1k43a_463",guestActions:"_guestActions_1k43a_493",infoCard:"_infoCard_1k43a_499",benefitsList:"_benefitsList_1k43a_515",benefitItem:"_benefitItem_1k43a_522",benefitIcon:"_benefitIcon_1k43a_537",benefitText:"_benefitText_1k43a_549",actionButtons:"_actionButtons_1k43a_563",signupButton:"_signupButton_1k43a_571"},Oj="_modal_g5lkq_29",Dj="_modalTitle_g5lkq_83",Rj="_cancelButton_g5lkq_167",Lj="_modalOverlay_g5lkq_223",Mj="_form_g5lkq_287",Fj="_formRow_g5lkq_299",zj="_formGroup_g5lkq_323",Uj="_checkboxLabel_g5lkq_387",Bj="_buttonGroup_g5lkq_417",$j="_submitButton_g5lkq_433",Vj=({onClose:e,userId:t,address:n,onAddressAdded:r,onAddressUpdated:i})=>{const[s,a]=g.useState({firstName:"",lastName:"",company:"",address1:"",address2:"",city:"",state:"",zipCode:"",country:"United Arab Emirates",phone:"",isDefault:!1}),[o,l]=g.useState(!1),c=!!n;g.useEffect(()=>{n&&a({firstName:n.firstName||"",lastName:n.lastName||"",company:n.company||"",address1:n.address1||"",address2:n.address2||"",city:n.city||"",state:n.state||"",zipCode:n.zipCode||"",country:n.country||"United Arab Emirates",phone:n.phone||"",isDefault:n.isDefault||!1})},[n]);const u=e=>{const{name:t,value:n,type:r,checked:i}=e.target;a({...s,[t]:"checkbox"===r?i:n})};return m.jsx("div",{className:Lj,children:m.jsxs("div",{className:Oj,children:[m.jsx("h2",{className:Dj,children:c?"Edit Address":"Add New Address"}),m.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),t)if(s.firstName&&s.lastName&&s.address1&&s.city&&s.country&&s.phone){l(!0);try{if(c){const e=om(C_,"users",t,"addresses",n.id);await dg(e,{...s,updatedAt:gg()}),Vt.success("Address updated successfully"),i&&i({id:n.id,...s})}else{const e=am(C_,"users",t,"addresses"),n=await fg(e,{...s,createdAt:gg(),updatedAt:gg()});Vt.success("Address added successfully"),r&&r({id:n.id,...s})}e()}catch(o){console.error("Error saving address:",o),Vt.error("Failed to save address")}finally{l(!1)}}else Vt.error("Please fill in all required fields");else Vt.error("You must be logged in to save an address")},className:Mj,children:[m.jsxs("div",{className:Fj,children:[m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"firstName",children:"First Name *"}),m.jsx("input",{type:"text",id:"firstName",name:"firstName",value:s.firstName,onChange:u,required:!0,placeholder:"First Name"})]}),m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"lastName",children:"Last Name *"}),m.jsx("input",{type:"text",id:"lastName",name:"lastName",value:s.lastName,onChange:u,required:!0,placeholder:"Last Name"})]})]}),m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"company",children:"Company (Optional)"}),m.jsx("input",{type:"text",id:"company",name:"company",value:s.company,onChange:u,placeholder:"Company Name"})]}),m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"address1",children:"Address Line 1 *"}),m.jsx("input",{type:"text",id:"address1",name:"address1",value:s.address1,onChange:u,required:!0,placeholder:"Street Address, P.O. Box"})]}),m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"address2",children:"Address Line 2 (Optional)"}),m.jsx("input",{type:"text",id:"address2",name:"address2",value:s.address2,onChange:u,placeholder:"Apartment, Suite, Unit, etc."})]}),m.jsxs("div",{className:Fj,children:[m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"city",children:"City / Town *"}),m.jsx("input",{type:"text",id:"city",name:"city",value:s.city,onChange:u,required:!0,placeholder:"City"})]}),m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"state",children:"State / Province"}),m.jsx("input",{type:"text",id:"state",name:"state",value:s.state,onChange:u,placeholder:"State/Province/Emirate"})]})]}),m.jsxs("div",{className:Fj,children:[m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"zipCode",children:"Postal / Zip Code"}),m.jsx("input",{type:"text",id:"zipCode",name:"zipCode",value:s.zipCode,onChange:u,placeholder:"Postal/Zip Code"})]}),m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"country",children:"Country / Region *"}),m.jsxs("select",{id:"country",name:"country",value:s.country,onChange:u,required:!0,children:[m.jsx("option",{value:"United Arab Emirates",children:"United Arab Emirates"}),m.jsx("option",{value:"Saudi Arabia",children:"Saudi Arabia"}),m.jsx("option",{value:"Qatar",children:"Qatar"}),m.jsx("option",{value:"Bahrain",children:"Bahrain"}),m.jsx("option",{value:"Kuwait",children:"Kuwait"}),m.jsx("option",{value:"Oman",children:"Oman"}),m.jsx("option",{value:"Jordan",children:"Jordan"}),m.jsx("option",{value:"Lebanon",children:"Lebanon"}),m.jsx("option",{value:"Egypt",children:"Egypt"}),m.jsx("option",{value:"India",children:"India"}),m.jsx("option",{value:"Pakistan",children:"Pakistan"}),m.jsx("option",{value:"United States",children:"United States"}),m.jsx("option",{value:"United Kingdom",children:"United Kingdom"})]})]})]}),m.jsxs("div",{className:zj,children:[m.jsx("label",{htmlFor:"phone",children:"Phone *"}),m.jsx("input",{type:"tel",id:"phone",name:"phone",value:s.phone,onChange:u,required:!0,placeholder:"Phone Number"})]}),m.jsx("div",{className:zj,children:m.jsxs("label",{className:Uj,children:[m.jsx("input",{type:"checkbox",name:"isDefault",checked:s.isDefault,onChange:u}),"Set as default address"]})}),m.jsxs("div",{className:Bj,children:[m.jsx("button",{type:"button",className:Rj,onClick:e,children:"Cancel"}),m.jsx("button",{type:"submit",className:$j,disabled:o,children:o?"Saving...":c?"Update Address":"Add Address"})]})]})]})})},qj=6048e5,Hj=Symbol.for("constructDateFrom");function Wj(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Hj in e?e[Hj](t):e instanceof Date?new e.constructor(t):new Date(t)}function Gj(e,t){return Wj(t||e,e)}let Kj={};function Qj(){return Kj}function Yj(e,t){var n,r,i,s;const a=Qj(),o=(null==t?void 0:t.weekStartsOn)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)??a.weekStartsOn??(null==(s=null==(i=a.locale)?void 0:i.options)?void 0:s.weekStartsOn)??0,l=Gj(e,null==t?void 0:t.in),c=l.getDay(),u=(c<o?7:0)+c-o;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function Xj(e,t){return Yj(e,{...t,weekStartsOn:1})}function Jj(e,t){const n=Gj(e,null==t?void 0:t.in),r=n.getFullYear(),i=Wj(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Xj(i),a=Wj(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Xj(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Zj(e){const t=Gj(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function eA(e,t){const n=Gj(e,null==t?void 0:t.in);return n.setHours(0,0,0,0),n}function tA(e,t,n){const[r,i]=function(e,...t){const n=Wj.bind(null,t.find(e=>"object"==typeof e));return t.map(n)}(null==n||n.in,e,t),s=eA(r),a=eA(i),o=+s-Zj(s),l=+a-Zj(a);return Math.round((o-l)/864e5)}function nA(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Gj(e)));var t}const rA={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function iA(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const sA={date:iA({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:iA({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:iA({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},aA={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function oA(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function lA(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(a)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}var cA;const uA={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=rA[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:sA,formatRelative:(e,t,n,r)=>aA[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:oA({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:oA({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:oA({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:oA({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:oA({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(cA={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(cA.matchPattern);if(!n)return null;const r=n[0],i=e.match(cA.parsePattern);if(!i)return null;let s=cA.valueCallback?cA.valueCallback(i[0]):i[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:lA({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:lA({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:lA({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:lA({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:lA({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function dA(e,t){const n=Gj(e,null==t?void 0:t.in),r=tA(n,function(e,t){const n=Gj(e,null==t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return r+1}function hA(e,t){const n=Gj(e,null==t?void 0:t.in),r=+Xj(n)-+function(e,t){const n=Jj(e,t),r=Wj(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Xj(r)}(n);return Math.round(r/qj)+1}function fA(e,t){var n,r,i,s;const a=Gj(e,null==t?void 0:t.in),o=a.getFullYear(),l=Qj(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(s=null==(i=l.locale)?void 0:i.options)?void 0:s.firstWeekContainsDate)??1,u=Wj((null==t?void 0:t.in)||e,0);u.setFullYear(o+1,0,c),u.setHours(0,0,0,0);const d=Yj(u,t),h=Wj((null==t?void 0:t.in)||e,0);h.setFullYear(o,0,c),h.setHours(0,0,0,0);const f=Yj(h,t);return+a>=+d?o+1:+a>=+f?o:o-1}function pA(e,t){const n=Gj(e,null==t?void 0:t.in),r=+Yj(n,t)-+function(e,t){var n,r,i,s;const a=Qj(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??a.firstWeekContainsDate??(null==(s=null==(i=a.locale)?void 0:i.options)?void 0:s.firstWeekContainsDate)??1,l=fA(e,t),c=Wj((null==t?void 0:t.in)||e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),Yj(c,t)}(n,t);return Math.round(r/qj)+1}function mA(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const gA={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return mA("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):mA(n+1,2)},d:(e,t)=>mA(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>mA(e.getHours()%12||12,t.length),H:(e,t)=>mA(e.getHours(),t.length),m:(e,t)=>mA(e.getMinutes(),t.length),s:(e,t)=>mA(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return mA(Math.trunc(r*Math.pow(10,n-3)),t.length)}},yA="midnight",vA="noon",_A="morning",bA="afternoon",wA="evening",xA="night",SA={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return gA.y(e,t)},Y:function(e,t,n,r){const i=fA(e,r),s=i>0?i:1-i;if("YY"===t){return mA(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):mA(s,t.length)},R:function(e,t){return mA(Jj(e),t.length)},u:function(e,t){return mA(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return mA(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return mA(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return gA.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return mA(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=pA(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):mA(i,t.length)},I:function(e,t,n){const r=hA(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):mA(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):gA.d(e,t)},D:function(e,t,n){const r=dA(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):mA(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return mA(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return mA(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return mA(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?vA:0===r?yA:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?wA:r>=12?bA:r>=4?_A:xA,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return gA.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):gA.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):mA(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):mA(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):gA.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):gA.s(e,t)},S:function(e,t){return gA.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return kA(r);case"XXXX":case"XX":return EA(r);default:return EA(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return kA(r);case"xxxx":case"xx":return EA(r);default:return EA(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+CA(r,":");default:return"GMT"+EA(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+CA(r,":");default:return"GMT"+EA(r,":")}},t:function(e,t,n){return mA(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return mA(+e,t.length)}};function CA(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return 0===s?n+String(i):n+String(i)+t+mA(s,2)}function kA(e,t){if(e%60==0){return(e>0?"-":"+")+mA(Math.abs(e)/60,2)}return EA(e,t)}function EA(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+mA(Math.trunc(r/60),2)+t+mA(r%60,2)}const TA=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},NA=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},IA={p:NA,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return TA(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",TA(r,t)).replace("{{time}}",NA(i,t))}},jA=/^D+$/,AA=/^Y+$/,PA=["D","DD","YY","YYYY"];const OA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RA=/^'([^]*?)'?$/,LA=/''/g,MA=/[a-zA-Z]/;function FA(e,t,n){var r,i,s,a;const o=Qj(),l=o.locale??uA,c=o.firstWeekContainsDate??(null==(i=null==(r=o.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??1,u=o.weekStartsOn??(null==(a=null==(s=o.locale)?void 0:s.options)?void 0:a.weekStartsOn)??0,d=Gj(e,null==n?void 0:n.in);if(!nA(d))throw new RangeError("Invalid time value");let h=t.match(DA).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,IA[t])(e,l.formatLong)}return e}).join("").match(OA).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:zA(e)};if(SA[t])return{isToken:!0,value:e};if(t.match(MA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});l.localize.preprocessor&&(h=l.localize.preprocessor(d,h));const f={firstWeekContainsDate:c,weekStartsOn:u,locale:l};return h.map(n=>{if(!n.isToken)return n.value;const r=n.value;(function(e){return AA.test(e)}(r)||function(e){return jA.test(e)}(r))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),PA.includes(e))throw new RangeError(r)}(r,t,String(e));return(0,SA[r[0]])(d,r,l.localize,f)}).join("")}function zA(e){const t=e.match(RA);return t?t[1].replace(LA,"'"):e}const UA={orderCard:"_orderCard_1itg5_1",orderHeader:"_orderHeader_1itg5_29",orderBasicInfo:"_orderBasicInfo_1itg5_47",orderNumber:"_orderNumber_1itg5_59",orderLabel:"_orderLabel_1itg5_77",orderId:"_orderId_1itg5_87",copyButton:"_copyButton_1itg5_107",orderDate:"_orderDate_1itg5_153",orderStatusSection:"_orderStatusSection_1itg5_163",statusBadge:"_statusBadge_1itg5_175",statusPending:"_statusPending_1itg5_193",statusProcessing:"_statusProcessing_1itg5_203",statusShipped:"_statusShipped_1itg5_213",statusDelivered:"_statusDelivered_1itg5_223",statusCancelled:"_statusCancelled_1itg5_233",orderTotal:"_orderTotal_1itg5_243",expandButton:"_expandButton_1itg5_255",orderDetails:"_orderDetails_1itg5_287",sectionTitle:"_sectionTitle_1itg5_299",orderItems:"_orderItems_1itg5_313",orderItem:"_orderItem_1itg5_313",itemImageContainer:"_itemImageContainer_1itg5_343",itemImage:"_itemImage_1itg5_343",itemDetails:"_itemDetails_1itg5_373",itemName:"_itemName_1itg5_381",itemVariants:"_itemVariants_1itg5_393",colorDisplay:"_colorDisplay_1itg5_409",colorSwatch:"_colorSwatch_1itg5_421",itemPrice:"_itemPrice_1itg5_437",orderSummary:"_orderSummary_1itg5_451",summaryRow:"_summaryRow_1itg5_473",addressSection:"_addressSection_1itg5_497",addressText:"_addressText_1itg5_511",totalRow:"_totalRow_1itg5_535"},BA=({order:e})=>{var t,n,r;const[i,s]=g.useState(!1),[a,o]=g.useState(!1),l=e=>`AED ${parseFloat(e).toFixed(2)}`;return m.jsxs("div",{className:UA.orderCard,children:[m.jsxs("div",{className:UA.orderHeader,onClick:()=>s(!i),children:[m.jsxs("div",{className:UA.orderBasicInfo,children:[m.jsxs("div",{className:UA.orderNumber,children:[m.jsx("span",{className:UA.orderLabel,children:"Order ID:"}),m.jsx("span",{className:UA.orderId,children:e.id}),m.jsx("button",{className:UA.copyButton,onClick:t=>{t.stopPropagation(),navigator.clipboard.writeText(e.id),o(!0),setTimeout(()=>o(!1),2e3)},title:"Copy Order ID",children:a?m.jsx(xw,{}):m.jsx(kw,{})})]}),m.jsx("div",{className:UA.orderDate,children:(e=>{if(!e)return"N/A";try{return FA(new Date(e),"MMM dd, yyyy")}catch(t){return console.error("Error formatting date:",t),"Invalid date"}})(e.createdAt)})]}),m.jsxs("div",{className:UA.orderStatusSection,children:[m.jsx("div",{className:`${UA.statusBadge} ${(e=>{switch(e){case"pending":return UA.statusPending;case"processing":return UA.statusProcessing;case"shipped":return UA.statusShipped;case"delivered":return UA.statusDelivered;case"cancelled":return UA.statusCancelled;default:return""}})(e.status)}`,children:(null==(t=e.status)?void 0:t.charAt(0).toUpperCase())+(null==(n=e.status)?void 0:n.slice(1))}),m.jsx("div",{className:UA.orderTotal,children:l(e.totalAmount/100)}),m.jsx("button",{className:UA.expandButton,children:i?m.jsx(Cw,{}):m.jsx(Sw,{})})]})]}),i&&m.jsxs("div",{className:UA.orderDetails,children:[m.jsxs("div",{className:UA.orderItems,children:[m.jsx("h4",{className:UA.sectionTitle,children:"Items"}),null==(r=e.items)?void 0:r.map((e,t)=>m.jsxs("div",{className:UA.orderItem,children:[m.jsx("div",{className:UA.itemImageContainer,children:m.jsx("img",{src:e.image,alt:e.name,className:UA.itemImage,onError:e=>{e.target.src="/images/placeholder.jpg"}})}),m.jsxs("div",{className:UA.itemDetails,children:[m.jsx("div",{className:UA.itemName,children:e.name}),m.jsxs("div",{className:UA.itemVariants,children:[e.size&&m.jsxs("span",{children:["Size: ",e.size]}),e.color&&m.jsxs("span",{className:UA.colorDisplay,children:["Color:",m.jsx("span",{className:UA.colorSwatch,style:{backgroundColor:e.displayColor||e.color}})]}),m.jsxs("span",{children:["Qty: ",e.quantity]})]})]}),m.jsx("div",{className:UA.itemPrice,children:e.price})]},t))]}),m.jsxs("div",{className:UA.orderSummary,children:[m.jsx("h4",{className:UA.sectionTitle,children:"Order Summary"}),m.jsxs("div",{className:UA.summaryRow,children:[m.jsx("span",{children:"Payment Method"}),m.jsx("span",{children:"cod"===e.paymentMethod?"Cash On Delivery":"Card Payment"})]}),m.jsxs("div",{className:UA.summaryRow,children:[m.jsx("span",{children:"Payment Status"}),m.jsx("span",{children:(c=e.paymentStatus,u=e.paymentMethod,"cod"===u?"Cash On Delivery":"paid"===c?"Paid":"Payment Pending")})]}),e.shippingAddress&&m.jsxs("div",{className:UA.addressSection,children:[m.jsx("h4",{className:UA.sectionTitle,children:"Shipping Address"}),m.jsxs("p",{className:UA.addressText,children:[e.shippingAddress.firstName," ",e.shippingAddress.lastName,m.jsx("br",{}),e.shippingAddress.address,e.shippingAddress.apartment&&m.jsxs(m.Fragment,{children:[m.jsx("br",{}),e.shippingAddress.apartment]}),m.jsx("br",{}),e.shippingAddress.city,", ",e.shippingAddress.state," ",e.shippingAddress.zipCode,m.jsx("br",{}),e.shippingAddress.country]})]})]}),m.jsx("div",{className:UA.orderTotal,children:m.jsxs("div",{className:UA.totalRow,children:[m.jsx("span",{className:UA.totalLabel,children:"Total"}),m.jsx("span",{className:UA.totalAmount,children:l(e.totalAmount/100)})]})})]})]});var c,u},$A=()=>{var e,t;const n=we(),r=ve(),{currentUser:i,userData:s,logout:a}=cS(),{isGuestCheckout:o}=$r(e=>e.guest),l=new URLSearchParams(r.search).get("tab"),[c,u]=g.useState("addresses"===l?"addresses":"orders"),[d,h]=g.useState(!1),[f,p]=g.useState(null),[y,v]=g.useState([]),[_,b]=g.useState([]),[w,x]=g.useState("all"),[S,C]=g.useState(!0),[k,E]=g.useState(""),[T,N]=g.useState(null),[I,j]=g.useState(!1),[A,P]=g.useState("");g.useEffect(()=>{if(console.log("AccountPage - Guest Checkout Status:",o),o)try{const e=localStorage.getItem("guestRecentOrders");if(e){const t=JSON.parse(e);t&&t.length>0&&n("/account",{state:{recentOrders:t},replace:!0})}}catch(e){console.error("Error loading guest orders from localStorage:",e)}},[o,n]),g.useEffect(()=>{i||o||n("/login")},[i,o,n,S]),g.useEffect(()=>{i&&n(`/account?tab=${c}`,{replace:!0})},[c,n,i]),g.useEffect(()=>{(async()=>{if(null==i?void 0:i.uid)try{C(!0);const e=qm(am(C_,"orders"),Wm("userId","==",i.uid)),t=(await ug(e)).docs.map(e=>{var t,n;return{id:e.id,...e.data(),createdAt:(null==(n=null==(t=e.data().createdAt)?void 0:t.toDate)?void 0:n.call(t))||new Date}});t.sort((e,t)=>t.createdAt-e.createdAt),v(t)}catch(e){console.error("Error fetching orders:",e),Vt.error("Failed to load your orders")}finally{C(!1)}else C(!1)})()},[i]),g.useEffect(()=>{(async()=>{if(null==i?void 0:i.uid)try{const e=am(C_,"users",i.uid,"addresses"),t=(await ug(e)).docs.map(e=>({id:e.id,...e.data()}));b(t)}catch(e){console.error("Error fetching addresses:",e),Vt.error("Failed to load your addresses")}})()},[i]);const O=async e=>{if(e.preventDefault(),k.trim()){j(!0),P(""),N(null);try{const{order:e,error:n}=await hj(k);if(n)return void P("Order not found. Please check your order ID and try again.");if(N(e),o)try{const t=localStorage.getItem("guestRecentOrders");let n=t?JSON.parse(t):[];n.some(t=>t.id===e.id)||(n.unshift({id:e.id,createdAt:e.createdAt,total:e.total,status:e.status,paymentMethod:e.paymentMethod,paymentStatus:e.paymentStatus}),n=n.slice(0,5),localStorage.setItem("guestRecentOrders",JSON.stringify(n)))}catch(t){console.error("Error saving recent orders to localStorage:",t)}}catch(n){console.error("Error fetching order:",n),P("Failed to fetch order details. Please try again.")}finally{j(!1)}}else P("Please enter an order ID")},D="all"===w?y:y.filter(e=>e.status===w);return S?m.jsx("div",{className:Pj.container,children:m.jsx("div",{className:Pj.loadingSpinner,children:"Loading..."})}):i||o?o?m.jsx("div",{className:Pj.container,children:m.jsxs("div",{className:Pj.guestTrackOrder,children:[m.jsxs("div",{className:Pj.guestHeader,children:[m.jsx("h2",{children:"Track Your Order"}),m.jsxs("p",{className:Pj.guestSubtitle,children:["Enter your order ID to track your order status. Don't have an account?"," ",m.jsx("button",{className:Pj.inlineLink,onClick:()=>n("/signup"),children:"Create one to access more features!"})]})]}),m.jsx("div",{className:Pj.trackOrderSection,children:m.jsxs("form",{onSubmit:O,className:Pj.trackForm,children:[m.jsxs("div",{className:Pj.inputGroup,children:[m.jsx("input",{type:"text",value:k,onChange:e=>E(e.target.value),placeholder:"Enter your order ID",className:Pj.orderInput}),m.jsxs("button",{type:"submit",className:Pj.trackButton,disabled:I,children:[I?m.jsx(Fw,{className:Pj.spinner}):m.jsx(Rw,{}),"Track Order"]})]}),A&&m.jsx("p",{className:Pj.error,children:A})]})}),T&&m.jsxs("div",{className:Pj.orderDetails,children:[m.jsx("h3",{children:"Order Found"}),m.jsx(BA,{order:T})]}),(null==(e=r.state)?void 0:e.recentOrders)&&r.state.recentOrders.length>0&&m.jsxs("div",{className:Pj.recentOrdersSection,children:[m.jsx("h3",{children:"Recent Orders"}),m.jsx("p",{children:"Here are your recently tracked orders:"}),m.jsx("div",{className:Pj.ordersList,children:r.state.recentOrders.map(e=>m.jsx(BA,{order:e},e.id))})]}),m.jsxs("div",{className:Pj.guestActions,children:[m.jsx("div",{className:Pj.guestInfo,children:m.jsxs("div",{className:Pj.infoCard,children:[m.jsx("h3",{children:"Why Create an Account?"}),m.jsxs("div",{className:Pj.benefitsList,children:[m.jsxs("div",{className:Pj.benefitItem,children:[m.jsx("div",{className:Pj.benefitIcon,children:""}),m.jsxs("div",{className:Pj.benefitText,children:[m.jsx("h4",{children:"Complete Order History"}),m.jsx("p",{children:"Access all your past and current orders in one place"})]})]}),m.jsxs("div",{className:Pj.benefitItem,children:[m.jsx("div",{className:Pj.benefitIcon,children:""}),m.jsxs("div",{className:Pj.benefitText,children:[m.jsx("h4",{children:"Saved Addresses"}),m.jsx("p",{children:"Store multiple shipping addresses for faster checkout"})]})]}),m.jsxs("div",{className:Pj.benefitItem,children:[m.jsx("div",{className:Pj.benefitIcon,children:""}),m.jsxs("div",{className:Pj.benefitText,children:[m.jsx("h4",{children:"Faster Checkout"}),m.jsx("p",{children:"Skip the form filling with saved information"})]})]}),m.jsxs("div",{className:Pj.benefitItem,children:[m.jsx("div",{className:Pj.benefitIcon,children:""}),m.jsxs("div",{className:Pj.benefitText,children:[m.jsx("h4",{children:"Order Updates"}),m.jsx("p",{children:"Get real-time notifications about your orders"})]})]})]})]})}),m.jsxs("div",{className:Pj.actionButtons,children:[m.jsx("button",{className:Pj.loginButton,onClick:()=>n("/login"),children:"Log In to Your Account"}),m.jsx("button",{className:Pj.signupButton,onClick:()=>n("/signup"),children:"Create New Account"})]})]})]})}):m.jsxs("div",{className:Pj.accountContainer,children:[m.jsxs("div",{className:Pj.sidebar,children:[m.jsxs("h3",{className:Pj.welcomeText,children:["Welcome,"," ",(null==s?void 0:s.firstName)||(null==(t=null==i?void 0:i.email)?void 0:t.split("@")[0])||"User"]}),m.jsxs("div",{className:Pj.menuItems,children:[m.jsxs("button",{className:`${Pj.menuItem} ${"orders"===c?Pj.active:""}`,onClick:()=>u("orders"),children:[m.jsx(_w,{})," Orders"]}),m.jsxs("button",{className:`${Pj.menuItem} ${"addresses"===c?Pj.active:""}`,onClick:()=>u("addresses"),children:[m.jsx(Iw,{})," Addresses"]})]}),m.jsx("button",{className:Pj.logoutButton,onClick:async()=>{try{await a(),n("/"),Vt.success("Successfully logged out")}catch(e){console.error("Error logging out:",e),Vt.error("Failed to log out")}},children:"LOG OUT"})]}),m.jsxs("div",{className:Pj.content,children:["orders"===c&&m.jsxs("div",{className:Pj.ordersSection,children:[m.jsx("h2",{className:Pj.sectionTitle,children:"My Orders"}),m.jsxs("div",{className:Pj.orderFilters,children:[m.jsx("button",{className:`${Pj.filterButton} ${"all"===w?Pj.activeFilter:""}`,onClick:()=>x("all"),children:"All"}),m.jsx("button",{className:`${Pj.filterButton} ${"pending"===w?Pj.activeFilter:""}`,onClick:()=>x("pending"),children:"Pending"}),m.jsx("button",{className:`${Pj.filterButton} ${"processing"===w?Pj.activeFilter:""}`,onClick:()=>x("processing"),children:"Processing"}),m.jsx("button",{className:`${Pj.filterButton} ${"shipped"===w?Pj.activeFilter:""}`,onClick:()=>x("shipped"),children:"Shipped"}),m.jsx("button",{className:`${Pj.filterButton} ${"delivered"===w?Pj.activeFilter:""}`,onClick:()=>x("delivered"),children:"Delivered"})]}),m.jsx("div",{className:Pj.trackOrderSection,children:m.jsxs("form",{onSubmit:O,className:Pj.trackForm,children:[m.jsxs("div",{className:Pj.inputGroup,children:[m.jsx("input",{type:"text",value:k,onChange:e=>E(e.target.value),placeholder:"Enter order ID to track",className:Pj.orderInput}),m.jsxs("button",{type:"submit",className:Pj.trackButton,disabled:I,children:[I?m.jsx(Fw,{className:Pj.spinner}):m.jsx(Rw,{}),"Track Order"]})]}),A&&m.jsx("p",{className:Pj.error,children:A})]})}),T&&m.jsx("div",{className:Pj.orderDetails,children:m.jsx(BA,{order:T})}),0===D.length?m.jsxs("div",{className:Pj.emptyState,children:[m.jsx(Nw,{className:Pj.emptyStateIcon}),m.jsx("p",{className:Pj.emptyStateText,children:0===y.length?"You haven't placed any orders yet.":`No ${w} orders found.`}),m.jsx("button",{className:Pj.shopNowButton,onClick:()=>n("/shop"),children:"Browse Collection"})]}):m.jsx("div",{className:Pj.ordersList,children:D.map(e=>m.jsx(BA,{order:e},e.id))})]}),"addresses"===c&&m.jsxs("div",{className:Pj.addressesSection,id:"addresses-section",children:[m.jsx("h2",{className:Pj.sectionTitle,children:"My Addresses"}),m.jsx("button",{className:Pj.addAddressButton,onClick:()=>{p(null),h(!0)},children:"+ Add New Address"}),0===_.length?m.jsxs("div",{className:Pj.emptyState,children:[m.jsx(Iw,{className:Pj.emptyStateIcon}),m.jsx("p",{className:Pj.emptyStateText,children:"You haven't saved any addresses yet."})]}):m.jsx("div",{className:Pj.addressGrid,children:_.map(e=>m.jsxs("div",{className:Pj.addressCard,children:[e.isDefault&&m.jsx("span",{className:Pj.defaultBadge,children:"Default"}),m.jsx("div",{className:Pj.addressHeader,children:m.jsxs("h3",{children:[e.firstName," ",e.lastName]})}),m.jsx("p",{children:e.address1}),e.address2&&m.jsx("p",{children:e.address2}),m.jsxs("p",{children:[e.city,", ",e.state," ",e.zipCode]}),m.jsx("p",{children:e.country}),m.jsx("p",{children:e.phone}),m.jsxs("div",{className:Pj.addressActions,children:[m.jsxs("button",{className:Pj.editButton,onClick:()=>(e=>{p(e),h(!0)})(e),children:[m.jsx(iC,{})," Edit"]}),m.jsxs("button",{className:Pj.deleteButton,onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this address?"))try{await hg(om(C_,"users",i.uid,"addresses",e)),b(_.filter(t=>t.id!==e)),Vt.success("Address deleted successfully")}catch(t){console.error("Error deleting address:",t),Vt.error("Failed to delete address")}})(e.id),children:[m.jsx(rC,{})," Delete"]}),!e.isDefault&&m.jsx("button",{className:Pj.defaultButton,onClick:()=>(async e=>{try{const t=_.filter(e=>e.isDefault);for(const e of t)await dg(om(C_,"users",i.uid,"addresses",e.id),{isDefault:!1});await dg(om(C_,"users",i.uid,"addresses",e),{isDefault:!0}),b(_.map(t=>({...t,isDefault:t.id===e}))),Vt.success("Default address updated")}catch(t){console.error("Error updating default address:",t),Vt.error("Failed to update default address")}})(e.id),children:"Set as Default"})]})]},e.id))})]})]}),d&&m.jsx(Vj,{onClose:()=>{h(!1),p(null)},userId:null==i?void 0:i.uid,address:f,onAddressAdded:e=>{b([..._,e]),h(!1),p(null)},onAddressUpdated:e=>{b(_.map(t=>t.id===e.id?e:t)),h(!1),p(null)}})]}):m.jsx("div",{className:Pj.container,children:m.jsxs("div",{className:Pj.loginPrompt,children:[m.jsx("h2",{children:"Please log in to access your account"}),m.jsx("button",{className:Pj.loginButton,onClick:()=>n("/login"),children:"Log In"})]})})},VA="_container_11029_1",qA="_errorCode_11029_23",HA="_message_11029_35",WA="_description_11029_45",GA="_homeButton_11029_59",KA=()=>{const e=we();return m.jsxs("div",{className:VA,children:[m.jsx("h1",{className:qA,children:"404"}),m.jsx("h2",{className:HA,children:"Oops! The page you're looking for doesn't exist."}),m.jsx("p",{className:WA,children:"The page might have been removed, renamed, or is temporarily unavailable."}),m.jsx("button",{className:GA,onClick:()=>{e("/"),window.scrollTo(0,0)},children:"Go to Homepage"})]})},QA="_container_z3f2j_1",YA="_card_z3f2j_17",XA="_description_z3f2j_47",JA="_message_z3f2j_59",ZA="_input_z3f2j_71",eP="_submitButton_z3f2j_89",tP="_backButton_z3f2j_121",nP=()=>{const[e,t]=g.useState(""),[n,r]=g.useState(""),i=we();return m.jsxs("div",{children:[m.jsx(Bb,{}),m.jsx("div",{className:QA,children:m.jsxs("div",{className:YA,children:[m.jsx("h2",{children:"Forgot Password"}),m.jsx("p",{className:XA,children:"Enter your email address below, and well send you a link to reset your password."}),n&&m.jsx("p",{className:JA,children:n}),m.jsxs("form",{onSubmit:t=>{t.preventDefault(),r(e?`A password reset link has been sent to ${e}`:"Please enter your email address.")},children:[m.jsx("input",{type:"email",placeholder:"Enter your email",value:e,onChange:e=>t(e.target.value),className:ZA,required:!0}),m.jsx("button",{type:"submit",className:eP,children:"Send Reset Link"})]}),m.jsx("button",{className:tP,onClick:()=>i("/login"),children:"Back to Sign In"})]})})]})},rP="_container_9m9th_1",iP="_mainTitle_9m9th_21",sP="_title_9m9th_39",aP="_contentWrapper_9m9th_55",oP="_date_9m9th_77",lP="_section_9m9th_91",cP="_text_9m9th_99",uP="_bulletList_9m9th_113",dP=()=>m.jsxs("div",{className:rP,children:[m.jsx("div",{className:iP,children:m.jsx(lC,{width:"250px",height:"40px"})}),m.jsxs("div",{className:aP,children:[m.jsx("div",{className:oP,children:m.jsx(lC,{width:"200px"})}),[...Array(9)].map((e,t)=>m.jsxs("div",{className:lP,children:[m.jsx("div",{className:sP,children:m.jsx(lC,{width:"250px",height:"28px"})}),m.jsxs("div",{className:cP,children:[m.jsx(lC,{lines:3,width:"100%"}),2===t||3===t||5===t?m.jsx("div",{className:uP,children:[...Array(6)].map((e,t)=>m.jsx(lC,{width:"80%"},t))}):null]})]},t))]})]}),hP=()=>{var e;const[t,n]=g.useState(null),[r,i]=g.useState(!0);return g.useEffect(()=>{(async()=>{try{const e=await(async()=>{try{const e=om(C_,"PrivacyPolicy","content"),t=await lg(e);return t.exists()?t.data():(console.log("No privacy policy content found"),null)}catch(e){throw console.error("Error fetching privacy policy content:",e),new Error(`Failed to fetch privacy policy content: ${e.message}`)}})();n(e)}catch(e){console.error("Error loading privacy content:",e)}finally{i(!1)}})()},[]),r?m.jsx(dP,{}):m.jsxs("div",{className:rP,children:[m.jsx("h1",{className:iP,children:(null==t?void 0:t.title)||"Privacy Policy"}),m.jsxs("div",{className:aP,children:[m.jsxs("p",{className:oP,children:["Last Updated: ",(null==t?void 0:t.effectiveDate)?new Date(1e3*t.effectiveDate.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):(null==t?void 0:t.createdAt)?new Date(1e3*t.createdAt.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""]}),"        ",null==(e=null==t?void 0:t.sections)?void 0:e.map((e,t)=>m.jsxs("div",{className:lP,children:[m.jsx("h2",{className:sP,children:e.heading}),m.jsxs("div",{className:cP,children:[e.description.split("\\n").map((e,t)=>m.jsx("p",{className:cP,children:e},t)),e.bulletPoints&&e.bulletPoints.length>0&&m.jsx("ul",{className:uP,children:e.bulletPoints.map((e,t)=>m.jsx("li",{dangerouslySetInnerHTML:{__html:e}},t))})]})]},t))]})]})},fP=()=>m.jsxs("div",{className:rP,children:[m.jsx("div",{className:iP,children:m.jsx(lC,{width:"300px",height:"40px"})}),m.jsxs("div",{className:aP,children:[m.jsx("div",{className:oP,children:m.jsx(lC,{width:"200px"})}),[...Array(11)].map((e,t)=>m.jsxs("div",{className:lP,children:[m.jsx("div",{className:sP,children:m.jsx(lC,{width:"250px",height:"28px"})}),m.jsx("div",{className:cP,children:m.jsx(lC,{lines:3,width:"100%"})})]},t))]})]}),pP=()=>{var e;const[t,n]=g.useState(null),[r,i]=g.useState(!0);return g.useEffect(()=>{(async()=>{try{const e=await(async()=>{try{const e=om(C_,"TermsConditions","content"),t=await lg(e);return t.exists()?t.data():(console.log("No terms and conditions content found"),null)}catch(e){throw console.error("Error fetching terms content:",e),new Error(`Failed to fetch terms content: ${e.message}`)}})();n(e),console.log("Fetched terms content:",e)}catch(e){console.error("Error loading terms content:",e)}finally{i(!1)}})()},[]),r?m.jsx(fP,{}):m.jsxs("div",{className:rP,children:[m.jsx("h1",{className:iP,children:(null==t?void 0:t.title)||"Terms and Conditions"}),"      ",m.jsxs("div",{className:aP,children:[m.jsxs("p",{className:oP,children:["Last Updated: ",(null==t?void 0:t.effectiveDate)?new Date(1e3*t.effectiveDate.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):(null==t?void 0:t.createdAt)?new Date(1e3*t.createdAt.seconds).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""]}),null==(e=null==t?void 0:t.sections)?void 0:e.map((e,t)=>{var n;return m.jsxs("div",{className:lP,children:[m.jsx("h2",{className:sP,children:e.heading}),m.jsx("div",{className:cP,children:null==(n=e.description)?void 0:n.split("\\n").map((e,t)=>m.jsx("p",{children:e},t))})]},t)})]})]})},mP="_container_4xv4a_1",gP="_header_4xv4a_15",yP="_title_4xv4a_29",vP="_viewToggle_4xv4a_41",_P="_viewButton_4xv4a_51",bP="_active_4xv4a_67",wP="_count_4xv4a_79",xP="_emptyState_4xv4a_95",SP="_browseButton_4xv4a_139",CP="_loading_4xv4a_171",kP="_gridContainer_4xv4a_189",EP="_gridItem_4xv4a_201",TP="_imageContainer_4xv4a_227",NP="_productImage_4xv4a_239",IP="_removeButton_4xv4a_251",jP="_productInfo_4xv4a_293",AP="_productName_4xv4a_309",PP="_productPrice_4xv4a_331",OP="_addToCartButton_4xv4a_345",DP="_listContainer_4xv4a_385",RP="_listItem_4xv4a_397",LP="_listImageContainer_4xv4a_413",MP="_listProductImage_4xv4a_425",FP="_listProductInfo_4xv4a_437",zP="_listProductName_4xv4a_453",UP="_listProductPrice_4xv4a_475",BP="_listActions_4xv4a_489",$P="_listAddToCartButton_4xv4a_507",VP="_listRemoveButton_4xv4a_509",qP=()=>{const e=zr(),t=we(),{currentUser:n,isAuthenticated:r}=cS()||{},{favorites:i,loading:s}=$r(e=>e.favorites),[a,o]=g.useState(!0);g.useEffect(()=>{r&&(null==n?void 0:n.uid)&&e(Gx(n.uid))},[e,r,n]);const l=t=>{const i=t.productId||t.id;e(r&&n?Qx({userId:n.uid,productId:i}):Zx(i)),Vt.success("Removed from favorites")},c=t=>{const n={id:t.productId||t.id,name:t.name,price:t.price,image:t.image,size:t.size||"M",color:t.color||"000000",quantity:1};e(Dx(n)),Vt.success("Added to cart")},u=e=>{t(`/product?id=${e}`)};return m.jsxs("div",{className:mP,children:[m.jsxs("div",{className:gP,children:[m.jsx("h1",{className:yP,children:"My Favorites"}),i.length>0&&m.jsxs("div",{className:vP,children:[m.jsx("button",{className:`${_P} ${a?bP:""}`,onClick:()=>o(!0),children:"Grid"}),m.jsx("button",{className:`${_P} ${a?"":bP}`,onClick:()=>o(!1),children:"List"})]})]}),s?m.jsx("div",{className:CP,children:"Loading favorites..."}):0===i.length?m.jsxs("div",{className:xP,children:[m.jsx(Ub,{size:60,color:"#ccc"}),m.jsx("h2",{children:"Your Favorites List is Empty"}),m.jsx("p",{children:"Save items you love to your favorites list and they'll appear here."}),m.jsx("button",{className:SP,onClick:()=>t("/shop"),children:"Browse Collection"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("p",{className:wP,children:[i.length," item",1!==i.length?"s":""]}),a?m.jsx("div",{className:kP,children:i.map(e=>m.jsxs("div",{className:EP,children:[m.jsxs("div",{className:TP,onClick:()=>u(e.productId||e.id),children:[m.jsx("img",{src:e.image,alt:e.name,className:NP,onError:e=>{e.target.src="/images/placeholder.jpg"}}),m.jsx("button",{className:IP,onClick:t=>{t.stopPropagation(),l(e)},children:m.jsx(Ub,{size:18,filled:!0,color:"#e6994b"})})]}),m.jsxs("div",{className:jP,children:[m.jsx("h3",{className:AP,onClick:()=>u(e.productId||e.id),children:e.name}),m.jsx("p",{className:PP,children:e.price}),m.jsx("button",{className:OP,onClick:()=>c(e),children:"Add to Cart"})]})]},e.id||e.productId))}):m.jsx("div",{className:DP,children:i.map(e=>m.jsxs("div",{className:RP,children:[m.jsx("div",{className:LP,onClick:()=>u(e.productId||e.id),children:m.jsx("img",{src:e.image,alt:e.name,className:MP,onError:e=>{e.target.src="/images/placeholder.jpg"}})}),m.jsxs("div",{className:FP,children:[m.jsx("h3",{className:zP,onClick:()=>u(e.productId||e.id),children:e.name}),m.jsx("p",{className:UP,children:e.price})]}),m.jsxs("div",{className:BP,children:[m.jsx("button",{className:$P,onClick:()=>c(e),children:"Add to Cart"}),m.jsx("button",{className:VP,onClick:()=>l(e),children:"Remove"})]})]},e.id||e.productId))})]})]})},HP="_faqContainer_1vm5i_1",WP="_heroSection_1vm5i_13",GP="_heroContent_1vm5i_63",KP="_heroTitle_1vm5i_79",QP="_heroSubtitle_1vm5i_121",YP="_faqSection_1vm5i_137",XP="_faqList_1vm5i_157",JP="_faqItem_1vm5i_169",ZP="_faqQuestion_1vm5i_193",eO="_open_1vm5i_235",tO="_questionText_1vm5i_245",nO="_toggleIcon_1vm5i_257",rO="_faqAnswer_1vm5i_283",iO="_answerContent_1vm5i_305",sO=()=>{const[e,t]=g.useState(new Set),n=[{question:"Are your garments really handmade?",answer:"Absolutely. Every piece is 100% handmade by skilled Latin American artisans using traditional techniques such as macram, crochet, and hand-weaving. Each item is truly one of a kind."},{question:"What materials do you use?",answer:"We use premium, breathable cotton blends and natural fibers for comfort, durability, and an eco-conscious footprint. Some pieces also incorporate high-quality swimwear fabric in combination with cotton-blend macram for added function and style."},{question:"How do I know which size to order?",answer:"Each product page includes a detailed size guide. If you're between sizes or unsure, feel free to contact uswe'll gladly assist you and can offer custom sizing for select items."},{question:"Can I request a custom size or design?",answer:"Yes! We offer limited customization on selected garments. You can request adjustments at checkout or by contacting us directly. Please note that custom orders may require additional fees and longer production times."},{question:"How long will my order take to ship?",answer:"As all items are handmade to order, please allow 714 business days for production. Delivery usually takes approximately 20 days total after order confirmation."},{question:"Can I expedite my order?",answer:"If you need your item by a specific date or for an event, contact us before placing your order. Rush requests may be accommodated depending on current production capacity (rush fees may apply)."},{question:"Do you ship internationally?",answer:"Yes, we offer worldwide shipping. Delivery times and shipping fees vary by destination. Please note that customs duties or import taxes may apply based on your country's regulations."},{question:"What is your return and exchange policy?",answer:"We accept returns within 7 days of delivery for unworn, unused items returned in original condition and packaging. Please note:  Custom orders (including sizing, color, or design modifications) are non-returnable and non-refundable.  Final sale items are not eligible for return or exchange.  Refunds on customized pieces are considered only in exceptional cases, at the discretion of ORIGINS management."},{question:"How should I care for my garment?",answer:"Hand wash gently in cold water with mild soap and lay flat to dry. Avoid wringing, bleaching, or machine washing to maintain the integrity of the fabric and hand-knotted details."},{question:"Are your garments lined?",answer:'Many of our swim tops are lined. However, several garments are intentionally unlined to preserve their lightweight and semi-sheer aesthetic. Please refer to the "Description & Features" section on each product page for specific details.'},{question:"Are your products sustainably and ethically made?",answer:"Yes. We follow slow fashion principles and partner only with artisan communities that ensure ethical, fair-trade practices. Your purchase helps support women-led groups and preserve ancestral craftsmanship."},{question:"Do you offer wholesale or collaborations?",answer:"We do! We collaborate with select boutiques, stylists, and editors. For wholesale inquiries or partnership opportunities, please contact us at hello@originsbythesea.com."},{question:"Can I request a different color for a garment?",answer:"In some cases, yes. Contact us before placing your order to discuss alternative color options and fiber availability. Custom colors may extend the lead time."},{question:"Do you offer matching sets or family looks?",answer:"We occasionally create matching looks for bridal parties, mother-daughter sets, and special occasions. For group orders or bespoke designs, reach out to us directly."},{question:"What if my piece has a slight variation or irregularity?",answer:"Slight differences in stitching, pattern, or shade are a natural result of handmade craftsmanship and part of what makes each piece unique. These are not considered defects."},{question:"Can I swim in your garments?",answer:"Our bikinis and swimsuits are suitable for swimming. However, our macram dresses and cover-ups are designed primarily for lounging, festivals, or beachside wearnot prolonged exposure to chlorinated or salt water, which may affect durability over time."},{question:"Where are you based, and where are your products made?",answer:"Our creative studio is based in the United Arab Emirates, while our garments are handcrafted in Colombia and other Latin American countries by our artisan collaborators."},{question:"Do you offer styling support?",answer:"Yes! Whether you're shopping for a beach wedding, tropical trip, or editorial shoot, we're happy to assist with styling advice. Reach us via our contact form or DM us on Instagram @originsbythesea."},{question:"What payment methods do you accept?",answer:"We accept major credit cards, and cash on delivery. Customers in the UAE may request local bank transfercontact us for arrangements"},{question:"How can I stay updated on new drops and collections?",answer:"Subscribe to our newsletter and follow us on Instagram @originsbythesea to be the first to know about new releases, restocks, behind-the-scenes stories, and exclusive offers."}],r={title:"Frequently Asked Questions | Origins By The Sea",description:"Find answers to common questions about our handmade garments, sizing, shipping, returns, and more. Get all the information you need about Origins By The Sea.",canonicalUrl:"https://originsbythesea.com/faq",keywords:"FAQ, frequently asked questions, origins by the sea, handmade garments, sizing guide, shipping, returns, custom orders",type:"website",pageType:"FAQPage",schema:{"@context":"https://schema.org","@type":"FAQPage",name:"Frequently Asked Questions - Origins By The Sea",description:"Common questions and answers about our handmade sustainable fashion",publisher:{"@type":"Organization",name:"Origins By The Sea",logo:{"@type":"ImageObject",url:"https://originsbythesea.com/images/logo.png"}},url:"https://originsbythesea.com/faq",mainEntity:n.map(e=>({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer}}))}};return m.jsxs("div",{className:HP,children:[m.jsx(Zw,{...r}),m.jsx("section",{className:WP,children:m.jsxs("div",{className:GP,children:[m.jsx("h1",{className:KP,children:"Frequently Asked Questions"}),m.jsx("p",{className:QP,children:"Find answers to common questions about our handmade garments, sizing, shipping, and more."})]})}),m.jsx("section",{className:YP,children:m.jsx("div",{className:HP,children:m.jsx("div",{className:XP,children:n.map((n,r)=>m.jsxs("div",{className:JP,children:[m.jsxs("button",{className:`${ZP} ${e.has(r)?eO:""}`,onClick:()=>(n=>{const r=new Set(e);r.has(n)?r.delete(n):r.add(n),t(r)})(r),children:[m.jsx("span",{className:tO,children:n.question}),m.jsx("span",{className:nO,children:e.has(r)?"":"+"})]}),m.jsx("div",{className:`${rO} ${e.has(r)?eO:""}`,children:m.jsx("div",{className:iO,children:m.jsx("p",{children:n.answer})})})]},r))})})})]})},aO="_container_18xkn_1",oO="_trackOrderBox_18xkn_13",lO="_title_18xkn_27",cO="_guestMessage_18xkn_43",uO="_authenticatedMessage_18xkn_45",dO="_viewAllOrdersBtn_18xkn_77",hO="_trackForm_18xkn_115",fO="_inputGroup_18xkn_123",pO="_orderInput_18xkn_137",mO="_trackButton_18xkn_173",gO="_spinner_18xkn_237",yO="_error_18xkn_263",vO="_orderDetails_18xkn_275",_O="_orderIdSection_18xkn_303",bO="_orderIdLabel_18xkn_325",wO="_orderId_18xkn_303",xO="_copyButton_18xkn_353",SO="_orderInfo_18xkn_419",CO="_status_18xkn_445",kO="_productsList_18xkn_465",EO="_product_18xkn_465",TO="_productImage_18xkn_497",NO="_productDetails_18xkn_515",IO="_productTitle_18xkn_523",jO="_productVariants_18xkn_537",AO="_productPrice_18xkn_549",PO="_shippingSection_18xkn_563",OO="_addressInfo_18xkn_591",DO="_actionButtons_18xkn_605",RO="_continueShoppingBtn_18xkn_619",LO=()=>{const[e,t]=g.useState(""),[n,r]=g.useState(null),[i,s]=g.useState(!1),[a,o]=g.useState(""),[l,c]=g.useState(!1),u=we(),d=ve(),{isGuestCheckout:h}=$r(e=>e.guest||{isGuestCheckout:!1});g.useEffect(()=>{const e=new URLSearchParams(d.search).get("orderId");e&&(console.log("Found order ID in URL params:",e),t(e),f(e))},[d.search]),g.useEffect(()=>{var e,n;const i=null==(e=d.state)?void 0:e.orderId,s=null==(n=d.state)?void 0:n.orderData;console.log("TrackOrder - Order ID from state:",i),console.log("TrackOrder - Order data from state:",s),i&&(t(i),s?(r({id:i,...s,createdAt:s.createdAt||new Date}),console.log("Using order data from state:",s)):(console.log("Fetching order data from Firestore for ID:",i),f(i)))},[]);const f=async e=>{if(e&&e.trim()){s(!0),o(""),r(null);try{const{order:t,error:n}=await hj(e);if(n)return void o("Order not found. Please check your order ID and try again.");r(t)}catch(t){console.error("Error fetching order:",t),o("Failed to fetch order details. Please try again.")}finally{s(!1)}}};return m.jsx("div",{className:aO,children:m.jsxs("div",{className:oO,children:[m.jsx("h1",{className:lO,children:"Track Your Order"}),h?m.jsxs("div",{className:cO,children:[m.jsx("p",{children:"You're checking out as a guest. Please enter your order ID to track your order status."}),m.jsx("p",{children:"If you don't have your order ID, please check your order confirmation email or the order success page."})]}):m.jsxs("div",{className:uO,children:[m.jsx("p",{children:"You can track your order status here or view all your orders in your account."}),m.jsx("button",{className:dO,onClick:()=>u("/account?tab=orders"),children:"View All Orders"})]}),m.jsxs("form",{onSubmit:async t=>{t.preventDefault(),f(e)},className:hO,children:[m.jsxs("div",{className:fO,children:[m.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter your order ID",className:pO}),m.jsxs("button",{type:"submit",className:mO,disabled:i,children:[i?m.jsx(Fw,{className:gO}):m.jsx(Rw,{}),"Track Order"]})]}),a&&m.jsx("p",{className:yO,children:a})]}),n&&m.jsxs("div",{className:vO,children:[m.jsx("h2",{children:"Order Details"}),m.jsxs("div",{className:_O,children:[m.jsx("span",{className:bO,children:"Order ID:"}),m.jsx("span",{className:wO,children:n.id||n.orderId}),m.jsx("button",{className:xO,onClick:()=>{if(n){const e=n.id||n.orderId;navigator.clipboard.writeText(e),c(!0),setTimeout(()=>c(!1),2e3)}},title:"Copy Order ID",children:l?"Copied!":m.jsx(kw,{})})]}),m.jsxs("div",{className:SO,children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Date:"})," ",(p=n.createdAt,new Date(p).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}))]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Status:"})," ",m.jsx("span",{className:CO,style:{color:(e=>{switch(e){case"processing":default:return"#f59e0b";case"shipped":return"#3b82f6";case"delivered":return"#10b981";case"cancelled":return"#ef4444"}})(n.status)},children:(e=>{switch(e){case"processing":default:return"Processing";case"shipped":return"Shipped";case"delivered":return"Delivered";case"cancelled":return"Cancelled"}})(n.status)})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Payment Method:"})," ","cod"===n.paymentMethod?"Cash On Delivery":"Credit/Debit Card"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Payment Status:"})," ","paid"===n.paymentStatus?"Paid":"Pending"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Total Amount:"})," AED"," ",n.totalAmount?(n.totalAmount/100).toFixed(2):"0.00"]})]}),n.shippingAddress&&m.jsxs("div",{className:PO,children:[m.jsx("h3",{children:"Shipping Address"}),m.jsxs("div",{className:OO,children:[m.jsxs("p",{children:[n.shippingAddress.firstName," ",n.shippingAddress.lastName]}),m.jsx("p",{children:n.shippingAddress.address}),n.shippingAddress.apartment&&m.jsx("p",{children:n.shippingAddress.apartment}),m.jsxs("p",{children:[n.shippingAddress.city,","," ",n.shippingAddress.state," ",n.shippingAddress.zipCode]}),m.jsx("p",{children:n.shippingAddress.country})]})]}),m.jsx("h3",{children:"Items"}),m.jsx("div",{className:kO,children:n.items&&n.items.map((e,t)=>m.jsxs("div",{className:EO,children:[m.jsx("div",{className:TO,style:{backgroundImage:`url(${e.image})`}}),m.jsxs("div",{className:NO,children:[m.jsx("p",{className:IO,children:e.name}),m.jsxs("p",{className:jO,children:[e.size&&m.jsxs("span",{children:["Size: ",e.size]}),e.displayColor&&m.jsx("span",{style:{display:"inline-block",width:"12px",height:"12px",background:e.displayColor,marginLeft:"5px",borderRadius:"50%"}}),e.quantity>1&&m.jsxs("span",{children:["  ",e.quantity]})]}),m.jsx("p",{className:AO,children:e.price})]})]},t))}),m.jsxs("div",{className:DO,children:[m.jsx("button",{className:RO,onClick:()=>u("/shop"),children:"Continue Shopping"}),!h&&m.jsx("button",{className:dO,onClick:()=>u("/account?tab=orders"),children:"View All Orders"})]})]})]})});var p},MO="_successContainer_p3uhr_1",FO="_successHeader_p3uhr_17",zO="_successIcon_p3uhr_27",UO="_successTitle_p3uhr_39",BO="_successMessage_p3uhr_51",$O="_orderIdCard_p3uhr_67",VO="_orderIdContent_p3uhr_85",qO="_orderId_p3uhr_67",HO="_copyButton_p3uhr_129",WO="_copySuccess_p3uhr_173",GO="_orderIdMessage_p3uhr_187",KO="_guestAlert_p3uhr_203",QO="_orderDetailsCard_p3uhr_237",YO="_orderMetaGrid_p3uhr_269",XO="_orderMetaItem_p3uhr_283",JO="_paymentStatus_p3uhr_333",ZO="_totalAmount_p3uhr_347",eD="_vatBreakdown_p3uhr_357",tD="_priceBreakdown_p3uhr_373",nD="_breakdownItem_p3uhr_407",rD="_breakdownTotal_p3uhr_425",iD="_productsList_p3uhr_465",sD="_product_p3uhr_465",aD="_productImage_p3uhr_501",oD="_productDetails_p3uhr_523",lD="_productTitle_p3uhr_537",cD="_productVariants_p3uhr_549",uD="_variantTag_p3uhr_563",dD="_colorDot_p3uhr_573",hD="_quantityTag_p3uhr_589",fD="_productPrice_p3uhr_605",pD="_trackOrderSection_p3uhr_617",mD="_receiptSection_p3uhr_657",gD="_receiptSectionTitle_p3uhr_675",yD="_successButtons_p3uhr_691",vD="_primaryBtn_p3uhr_703",_D="_secondaryBtn_p3uhr_705",bD="_trackOrderBtn_p3uhr_775",wD=async(e,t,n="image/svg+xml")=>{try{let i=e,s="image/png";"image/svg+xml"===n&&(console.log("Converting SVG to PNG..."),i=await(r=e,new Promise((e,t)=>{try{const n=atob(r),i=new Image,s=document.createElement("canvas"),a=s.getContext("2d");i.onload=()=>{URL.revokeObjectURL(i.src),s.width=2*i.width,s.height=2*i.height,a.fillStyle="#ffffff",a.fillRect(0,0,s.width,s.height),a.scale(2,2),a.drawImage(i,0,0);const t=s.toDataURL("image/png",1).split(",")[1];e(t)},i.onerror=()=>{t(new Error("Failed to load SVG image"))};const o=new Blob([n],{type:"image/svg+xml"}),l=URL.createObjectURL(o);i.src=l}catch(n){t(n)}})));const a=atob(i),o=new Uint8Array(a.length);for(let e=0;e<a.length;e++)o[e]=a.charCodeAt(e);const l=new Blob([o],{type:s}),c=`receipt-${t}-${Date.now()}.png`,u=window.URL.createObjectURL(l),d=document.createElement("a");return d.href=u,d.download=c,d.style.display="none",document.body.appendChild(d),d.click(),setTimeout(()=>{document.body.removeChild(d),window.URL.revokeObjectURL(u)},100),console.log(` Receipt downloaded: ${c}`),!0}catch(i){throw console.error(" Error downloading receipt:",i),i}var r},xD="_receiptContainer_1onm2_1",SD="_receiptHeader_1onm2_13",CD="_successMessage_1onm2_35",kD="_successBadge_1onm2_81",ED="_successIcon_1onm2_99",TD="_actionButtons_1onm2_107",ND="_downloadButton_1onm2_117",ID="_printButton_1onm2_119",jD="_receiptPreview_1onm2_193",AD="_receiptImage_1onm2_219",PD="_receiptFooter_1onm2_247",OD="_footerText_1onm2_263",DD="_loadingState_1onm2_279",RD="_spinner_1onm2_297",LD="_errorState_1onm2_343",MD="_errorMessage_1onm2_367",FD="_retryButton_1onm2_379",zD="_loadButton_1onm2_381",UD="_emptyState_1onm2_417",BD=({orderId:e,autoFetch:t=!0})=>{var n;const[r,i]=g.useState(!1),[s,a]=g.useState(null),[o,l]=g.useState(null),[c,u]=g.useState(!1),[d,h]=g.useState(!1),f=async()=>{var t;i(!0),l(null),console.log(" Receipt Component - Loading receipt for orderId:",e);try{const n=await(async e=>{var t;try{const n=`https://t7ck79lu3m.execute-api.eu-north-1.amazonaws.com/prod/api/receipt/${e}`;console.log(" Fetching receipt from:",n),console.log(" Order ID:",e);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});console.log(" Receipt API response status:",r.status),console.log(" Receipt API response ok:",r.ok);const i=await r.json();if(console.log(" Receipt API response data:",{success:i.success,hasReceipt:!!i.receipt,mimeType:i.mimeType,format:i.format,receiptLength:null==(t=i.receipt)?void 0:t.length}),!r.ok)throw console.error(" Receipt API error:",i.error),new Error(i.error||"Failed to fetch receipt");return console.log(" Receipt fetched successfully"),{success:!0,receipt:i.receipt,mimeType:i.mimeType,orderDetails:i.orderDetails}}catch(o){return console.error(" Error fetching receipt:",o),{success:!1,error:o.message}}})(e);console.log(" Receipt Component - Fetch result:",n),n.success?(console.log(" Receipt Component - Receipt data received:",{hasReceipt:!!n.receipt,mimeType:n.mimeType,receiptLength:null==(t=n.receipt)?void 0:t.length}),a(n)):(console.error(" Receipt Component - Failed to load:",n.error),l(n.error||"Failed to load receipt"))}catch(n){console.error(" Receipt Component - Error loading receipt:",n),l(n.message||"An error occurred while loading the receipt")}finally{i(!1)}};g.useEffect(()=>{if(console.log(" Receipt Component - Mounted/Updated with:",{orderId:e,autoFetch:t}),t&&e){if("Unknown"===e||!e)return console.warn(" Receipt Component - Invalid orderId:",e),void l("Invalid order ID. Please check your order confirmation.");f()}},[e,t]);if(r)return m.jsx("div",{className:xD,children:m.jsxs("div",{className:DD,children:[m.jsx(Fw,{className:RD}),m.jsx("p",{children:"Loading receipt..."})]})});if(o)return m.jsx("div",{className:xD,children:m.jsxs("div",{className:LD,children:[m.jsxs("p",{className:MD,children:[" ",m.jsx("strong",{children:"Error:"})," ",o]}),m.jsxs("div",{style:{marginTop:"10px",fontSize:"13px",color:"#666"},children:[m.jsxs("p",{children:["Order ID: ",e||"Not provided"]}),m.jsxs("p",{children:["API URL: ","https://t7ck79lu3m.execute-api.eu-north-1.amazonaws.com/prod"]})]}),m.jsx("button",{onClick:f,className:FD,children:"Try Again"})]})});if(!s)return m.jsx("div",{className:xD,children:m.jsxs("div",{className:UD,children:[m.jsx("p",{children:"No receipt available"}),e&&m.jsx("button",{onClick:f,className:zD,children:"Load Receipt"})]})});const p=`data:${s.mimeType};base64,${s.receipt}`;console.log(" Image Data URL created:",{mimeType:s.mimeType,base64Length:null==(n=s.receipt)?void 0:n.length,dataUrlLength:p.length,dataUrlPreview:p.substring(0,100)+"..."});try{const e=atob(s.receipt);console.log(" Decoded SVG (first 500 chars):",e.substring(0,500)),console.log(" Decoded SVG (last 200 chars):",e.substring(e.length-200))}catch(XD){console.error(" Failed to decode base64:",XD)}return m.jsxs("div",{className:xD,children:[m.jsxs("div",{className:SD,children:[m.jsxs("div",{className:kD,children:[m.jsx(ww,{className:ED}),m.jsx("span",{children:"Receipt Generated"})]}),m.jsxs("div",{className:TD,children:[m.jsxs("button",{onClick:async()=>{if(s)try{if(u(!1),console.log(" Starting download..."),"image/svg+xml"===s.mimeType){const t=document.querySelector(`.${AD} svg`);if(!t)throw new Error("SVG element not found");const n=(new XMLSerializer).serializeToString(t),r=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),i=new Image,s=document.createElement("canvas"),a=s.getContext("2d");i.onload=()=>{s.width=2*t.width.baseVal.value,s.height=2*t.height.baseVal.value,a.fillStyle="#ffffff",a.fillRect(0,0,s.width,s.height),a.scale(2,2),a.drawImage(i,0,0),s.toBlob(t=>{const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`receipt-${e}-${Date.now()}.png`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),console.log(" Download complete"),u(!0),setTimeout(()=>u(!1),3e3)},"image/png")},i.onerror=()=>{throw new Error("Failed to load SVG for conversion")};const o=URL.createObjectURL(r);i.src=o}else await wD(s.receipt,e,s.mimeType),u(!0),setTimeout(()=>u(!1),3e3)}catch(t){console.error(" Download failed:",t),alert("Failed to download receipt. Please try again.")}},className:ND,"aria-label":"Download receipt",children:[m.jsx(Tw,{}),m.jsx("span",{children:c?"Downloaded!":"Download"})]}),m.jsxs("button",{onClick:()=>{if(s)try{if(console.log(" Starting print..."),"image/svg+xml"===s.mimeType){const t=document.querySelector(`.${AD} svg`);if(!t)throw new Error("SVG element not found");const n=(new XMLSerializer).serializeToString(t),r=window.open("","_blank");if(!r)throw new Error("Could not open print window. Please check your popup blocker.");r.document.write(`\n          <!DOCTYPE html>\n          <html>\n            <head>\n              <title>Receipt - Order ${e}</title>\n              <style>\n                body {\n                  margin: 0;\n                  padding: 20px;\n                  display: flex;\n                  justify-content: center;\n                  align-items: center;\n                  min-height: 100vh;\n                }\n                svg {\n                  max-width: 100%;\n                  height: auto;\n                }\n                @media print {\n                  body {\n                    padding: 0;\n                  }\n                }\n              </style>\n            </head>\n            <body>\n              ${n}\n              <script>\n                window.onload = function() {\n                  window.print();\n                  window.onafterprint = function() {\n                    window.close();\n                  };\n                };\n              <\/script>\n            </body>\n          </html>\n        `),r.document.close(),console.log(" Print dialog opened"),h(!0),setTimeout(()=>h(!1),3e3)}else{const e=((e,t="image/svg+xml")=>{try{const n=`data:${t};base64,${e}`,r=window.open("","_blank");if(!r)throw new Error("Could not open print window. Please check your popup blocker.");return r.document.write(`\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Receipt</title>\n          <style>\n            body {\n              margin: 0;\n              padding: 20px;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              min-height: 100vh;\n            }\n            img {\n              max-width: 100%;\n              height: auto;\n            }\n            @media print {\n              body {\n                padding: 0;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <img src="${n}" alt="Receipt" onload="window.print(); window.close();" />\n        </body>\n      </html>\n    `),r.document.close(),!0}catch(o){return console.error("Error printing receipt:",o),!1}})(s.receipt,s.mimeType);if(!e)throw new Error("Print failed");h(!0),setTimeout(()=>h(!1),3e3)}}catch(t){console.error(" Print failed:",t),alert("Failed to print receipt. Please try again.")}},className:ID,"aria-label":"Print receipt",children:[m.jsx(Dw,{}),m.jsx("span",{children:d?"Printing...":"Print"})]})]})]}),c&&m.jsx("div",{className:CD,children:" Receipt downloaded successfully!"}),m.jsx("div",{className:jD,children:"image/svg+xml"===s.mimeType?m.jsx("div",{className:AD,dangerouslySetInnerHTML:{__html:atob(s.receipt)}}):m.jsx("img",{src:`data:${s.mimeType};base64,${s.receipt}`,alt:"Receipt",className:AD,onLoad:()=>console.log(" Image loaded successfully"),onError:e=>{var t,n;console.error(" Image failed to load:",e),console.error("Image src length:",null==(t=e.target.src)?void 0:t.length),console.error("First 100 chars:",null==(n=e.target.src)?void 0:n.substring(0,100))}})}),m.jsx("div",{className:PD,children:m.jsx("p",{className:OD,children:"Your receipt has been generated successfully. You can download or print it for your records."})})]})},$D=()=>{var e,t,n;const[r,i]=g.useState(""),s=g.useRef(null),a=ve(),o=we(),{isGuestCheckout:l}=$r(e=>e.guest||{isGuestCheckout:!1});g.useEffect(()=>{console.log("OrderSuccess - Guest Checkout Status:",l)},[l]);const c=(null==(e=a.state)?void 0:e.orderDetails)||{orderId:"Unknown",totalAmount:0,subtotalAmount:0,vatAmount:0,items:[],paymentMethod:"Unknown",paymentStatus:"pending",status:"processing",metadata:{},shipping:{}},u=e=>e||0===e?(e/100).toFixed(2):"0.00",d=c.totalAmount?u(c.totalAmount):(null==(t=c.total)?void 0:t.toFixed(2))||"0.00",h=c.subtotalAmount?u(c.subtotalAmount):null,f=c.vatAmount?u(c.vatAmount):null;g.useEffect(()=>{console.log("OrderSuccess - Order Details:",c)},[c]);return m.jsxs("div",{className:MO,children:[m.jsxs("div",{className:FO,children:[m.jsx(ww,{className:zO}),m.jsx("h1",{className:UO,children:"Order Confirmed"}),m.jsxs("p",{className:BO,children:["Thank you for your purchase! Your order has been successfully placed and will be processed shortly.","cod"===c.paymentMethod?" You will pay when your order is delivered.":" Your payment was successful."]})]}),m.jsxs("div",{className:$O,children:[m.jsxs("div",{className:VO,children:[m.jsxs("div",{children:[m.jsx("h3",{children:"Order Reference"}),m.jsx("p",{className:qO,ref:s,children:c.orderId})]}),m.jsxs("button",{className:HO,onClick:()=>{s.current&&navigator.clipboard.writeText(c.orderId).then(()=>{i("Order ID copied!"),setTimeout(()=>i(""),3e3)}).catch(e=>{i("Failed to copy"),console.error("Copy failed: ",e)})},"aria-label":"Copy order ID",children:[m.jsx(kw,{})," Copy"]})]}),r&&m.jsx("div",{className:WO,children:r}),m.jsxs("div",{className:GO,children:[m.jsx("strong",{children:"Important:"})," Please save your Order ID to easily track your order status in the future."]})]}),l&&m.jsx("div",{className:KO,children:m.jsxs("p",{children:[m.jsx("strong",{children:"Guest checkout:"})," Since you're checking out as a guest, you'll need your Order ID to track your order status."]})}),m.jsxs("div",{className:QO,children:[m.jsx("h2",{children:"Order Summary"}),m.jsxs("div",{className:YO,children:[m.jsxs("div",{className:XO,children:[m.jsx(bw,{}),m.jsxs("div",{children:[m.jsx("h4",{children:"Date"}),m.jsx("p",{children:(p=c.createdAt||new Date,new Date(p).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}))})]})]}),m.jsxs("div",{className:XO,children:[m.jsx(_w,{}),m.jsxs("div",{children:[m.jsx("h4",{children:"Status"}),m.jsx("p",{style:{color:(e=>{switch(e){case"processing":default:return"#f59e0b";case"shipped":return"#3b82f6";case"delivered":return"#10b981";case"cancelled":return"#ef4444"}})(c.status)},children:(e=>{switch(e){case"processing":default:return"Processing";case"shipped":return"Shipped";case"delivered":return"Delivered";case"cancelled":return"Cancelled"}})(c.status)})]})]}),m.jsxs("div",{className:XO,children:[m.jsx(Ew,{}),m.jsxs("div",{children:[m.jsx("h4",{children:"Payment"}),m.jsxs("p",{children:["cod"===c.paymentMethod?"Cash On Delivery":"Credit/Debit Card",m.jsxs("span",{className:JO,children:["(","paid"===c.paymentStatus?"Paid":"Pending",")"]})]})]})]}),m.jsxs("div",{className:XO,children:[m.jsx(Lw,{}),m.jsxs("div",{children:[m.jsx("h4",{children:"Total"}),m.jsxs("p",{className:ZO,children:["AED ",d]}),h&&f&&m.jsxs("span",{className:eD,children:["(Subtotal: ",h," + VAT: ",f,")"]})]})]})]}),h&&f&&m.jsxs("div",{className:tD,children:[m.jsx("h3",{children:"Price Breakdown"}),m.jsxs("div",{className:nD,children:[m.jsx("span",{children:"Subtotal"}),m.jsxs("span",{children:["AED ",h]})]}),m.jsxs("div",{className:nD,children:[m.jsxs("span",{children:["VAT (",c.vatPercentage||(null==(n=c.metadata)?void 0:n.vatRate)||"5%",")"]}),m.jsxs("span",{children:["AED ",f]})]}),m.jsxs("div",{className:`${nD} ${rD}`,children:[m.jsx("span",{children:m.jsx("strong",{children:"Total Amount"})}),m.jsx("span",{children:m.jsxs("strong",{children:["AED ",d]})})]})]}),m.jsx("h3",{children:"Items Purchased"}),m.jsx("div",{className:iD,children:c.items.map((e,t)=>{const n="string"==typeof e.price?e.price:`AED ${"number"==typeof e.price?e.price.toFixed(2):"0.00"}`;return m.jsxs("div",{className:sD,children:[m.jsx("div",{className:aD,style:{backgroundImage:`url(${e.image})`}}),m.jsxs("div",{className:oD,children:[m.jsx("p",{className:lD,children:e.name}),m.jsxs("div",{className:cD,children:[e.size&&m.jsxs("span",{className:uD,children:["Size: ",e.size]}),e.displayColor&&m.jsx("span",{className:dD,style:{background:e.displayColor},title:e.color||"Color"}),e.quantity>1&&m.jsxs("span",{className:hD,children:["Qty: ",e.quantity]})]}),m.jsx("p",{className:fD,children:n})]})]},t)})})]}),m.jsxs("div",{className:pD,children:[m.jsx("h3",{children:"What's Next?"}),l?m.jsx("p",{children:"You can track your order status using your Order ID anytime."}):m.jsx("p",{children:"You can check your order status anytime in your account orders section."})]}),m.jsxs("div",{className:mD,children:[m.jsx("h2",{className:gD,children:"Your Receipt"}),m.jsx(BD,{orderId:c.orderId,autoFetch:!0})]}),m.jsxs("div",{className:yD,children:[m.jsx(lt,{to:"/",className:vD,children:"Continue Shopping"}),m.jsx("button",{onClick:()=>{console.log("Track order button clicked, isGuestCheckout:",l),console.log("Order details being passed:",c),l?o(`/track-order?orderId=${c.orderId}`,{state:{orderId:c.orderId,orderData:{...c,id:c.orderId,items:c.items||[],total:c.total||0,status:c.status||"processing",paymentMethod:c.paymentMethod||"Unknown",paymentStatus:c.paymentStatus||"pending"}}}):o("/account?tab=orders")},className:`${_D} ${bD}`,children:l?"Track Order":"View Orders"})]})]});var p};function VD(){const{pathname:e}=ve();return g.useEffect(()=>{window.scrollTo(0,0)},[e]),null}const qD=()=>{const e=zr(),{currentUser:t,isAuthenticated:n,loading:r}=cS()||{};return g.useEffect(()=>{r||(n&&t?(e(Tx(t.uid)),e(Gx(t.uid))):(e(Fx(!1)),e(tS(!1))))},[e,t,n,r]),null},HD="_layoutContainer_8rfuk_1",WD="_mainContent_8rfuk_13",GD=()=>m.jsxs("div",{className:HD,children:[m.jsx(fw,{}),m.jsx("main",{className:WD,children:m.jsx(De,{})}),m.jsx(Uw,{})]}),KD=({children:e})=>e,QD=()=>{const e=ve(),t=e.pathname;return m.jsx(fn,{mode:"wait",children:m.jsxs(Me,{location:e,children:[m.jsxs(Re,{element:m.jsx(GD,{}),children:[m.jsx(Re,{path:"/",element:m.jsx(KD,{children:m.jsx(ex,{})})}),m.jsx(Re,{path:"/about",element:m.jsx(KD,{children:m.jsx(hC,{})})}),m.jsx(Re,{path:"/shop/*",element:m.jsx(KD,{children:m.jsx(zk,{})})}),m.jsx(Re,{path:"/product/*",element:m.jsx(KD,{children:m.jsx(KN,{})})}),m.jsx(Re,{path:"/cart",element:m.jsx(KD,{children:m.jsx(JN,{})})}),m.jsx(Re,{path:"/favorites",element:m.jsx(KD,{children:m.jsx(qP,{})})}),m.jsx(Re,{path:"/buy",element:m.jsx(KD,{children:m.jsx(Aj,{})})}),m.jsx(Re,{path:"/order-success",element:m.jsx(KD,{children:m.jsx($D,{})})}),m.jsx(Re,{path:"/track-order",element:m.jsx(KD,{children:m.jsx(LO,{})})}),m.jsx(Re,{path:"/privacy-policy",element:m.jsx(KD,{children:m.jsx(hP,{})})}),m.jsx(Re,{path:"/terms-and-conditions",element:m.jsx(KD,{children:m.jsx(pP,{})})}),m.jsx(Re,{path:"/faq",element:m.jsx(KD,{children:m.jsx(sO,{})})}),m.jsx(Re,{path:"/account",element:m.jsx(KD,{children:m.jsx($A,{})})}),m.jsx(Re,{path:"*",element:m.jsx(KD,{children:m.jsx(KA,{})})})]}),m.jsx(Re,{path:"/signup",element:m.jsx(KD,{children:m.jsx(hS,{})})}),m.jsx(Re,{path:"/login",element:m.jsx(KD,{children:m.jsx(NS,{})})}),m.jsx(Re,{path:"/forgot-password",element:m.jsx(KD,{children:m.jsx(nP,{})})})]},t)})},YD=()=>m.jsx(sr,{children:m.jsxs(at,{children:[m.jsx(VD,{}),m.jsx(qD,{}),m.jsx(Jt,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",toastClassName:"custom-toast",progressClassName:"custom-progress",icon:({type:e})=>"success"===e?"":"error"===e?"!":"i",limit:3}),m.jsx(_r,{children:m.jsx(QD,{})})]})});gr(),A.createRoot(document.getElementById("root")).render(m.jsx(Or,{store:aS,children:m.jsx(uS,{children:m.jsx(YD,{})})}));
